<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><link rel="stylesheet" type="text/css" href="isabelle.css"/>
<title>Theory Phi_Algebras.Phi_Fiction</title>
</head>


<body>
<div class="head">
<h1>Theory Phi_Algebras.Phi_Fiction</h1>
</div>

<pre class="source"><span class="keyword1"><span class="command"><span>theory</span></span></span><span> </span><a href="Phi_Algebras.Phi_Fiction.html"><span>Phi_Fiction</span></a><span>
  </span><span class="keyword2"><span class="keyword"><span>imports</span></span></span><span> </span><a href="Phi_Algebras.Phi_Algebra_Set.html"><span>Phi_Algebra_Set</span></a><span> </span><a href="Phi_Algebras.Unital_Homo.html"><span>Unital_Homo</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Interpretation of Fictional Separation›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Algebraic Structure›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Auxiliary Helper›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Phi_Fiction.pairself_def|fact"><span class="entity_def" id="Phi_Fiction.pairself_def|thm"><span class="entity_def" id="Phi_Fiction.pairself_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span class="entity_def" id="Phi_Fiction.pairself|const"><span>pairself</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span class="main"><span>,</span></span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Fiction.pairself|fact"><span class="entity_def" id="Phi_Fiction.pairself|thm"><span>pairself</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.pairself|const"><span>pairself</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span class="main"><span>,</span></span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.pairself_def|fact"><span>pairself_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Fiction.pairself_image_Id_on|fact"><span class="entity_def" id="Phi_Fiction.pairself_image_Id_on|thm"><span>pairself_image_Id_on</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.pairself|const"><span>pairself</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id_on|const"><span>Id_on</span></a><span> </span><span class="free"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id_on|const"><span>Id_on</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="free"><span>S</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set_eq_iff|fact"><span>set_eq_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id_on_iff|fact"><span>Id_on_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image_iff|fact"><span>image_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Bex_def|fact"><span>Bex_def</span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span>)</span></span><span>


</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Fictional Interpretation›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹
  Referring to Fictional Separation Logic~\cite{FSL}, the interpretation of fictional separation
  maps a fictional resource to a set of concrete resource.
  The interpretation can be any map to set that preserves </span><span class="antiquoted"><span class="raw_text"><span class="operator"><span>‹</span></span><span>1›</span></span></span><span>, the unit of the separation algebra.›</span></span></span><span>


</span><span class="keyword1"><span class="command"><span>type_synonym</span></span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="entity_def" id="Phi_Fiction.spec|type"><span>spec</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span>›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>type_synonym</span></span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>,</span></span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><span class="entity_def" id="Phi_Fiction.interp|type"><span>interp</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.spec|type"><span>spec</span></a><span>›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>type_synonym</span></span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>,</span></span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><span class="entity_def" id="Phi_Fiction.unital_homo_interp|type"><span>unital_homo_interp</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>,</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.spec|type"><span>spec</span></a><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Unital_Homo.html#Unital_Homo.unital_homo|type"><span>unital_homo</span></a><span>›</span></span></span><span>

</span><span class="comment1"><span>(*
definition ℐ<span class="hidden">⇩</span><sub>r</sub><span class="hidden">⇩</span><sub>e</sub><span class="hidden">⇩</span><sub>l</sub> :: ‹('a::one,'b::one) interp ⇒ ('a × 'b) set› 
  where ‹ℐ<span class="hidden">⇩</span><sub>r</sub><span class="hidden">⇩</span><sub>e</sub><span class="hidden">⇩</span><sub>l</sub> I = {(x,y). y ∈ ℐ I x}› *)</span></span><span>


</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Fictional Refinement›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Phi_Fiction.Fictional_Forward_Simulation_def|fact"><span class="entity_def" id="Phi_Fiction.Fictional_Forward_Simulation_def|thm"><span class="entity_def" id="Phi_Fiction.Fictional_Forward_Simulation_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Phi_Fiction.Fictional_Forward_Simulation|const"><span>Fictional_Forward_Simulation</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="tfree"><span>'c</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.rel|type"><span>rel</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.rel|type"><span>rel</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_magma|class"><span>sep_magma</span></a><span class="main"><span>,</span></span><span class="tfree"><span>'c</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_magma|class"><span>sep_magma</span></a><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.interp|type"><span>interp</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span>›</span></span></span><span>
      </span><span class="main"><span>(</span></span><span class="quoted"><span>"_</span><span class="keyword3"><span>/ </span></span><span class="keyword1"><span>𝗋𝖾𝖿𝗂𝗇𝖾𝗌</span></span><span> _</span><span class="keyword3"><span>/ </span></span><span class="keyword1"><span>𝗐.𝗋.𝗍</span></span><span> _</span><span class="keyword3"><span>/ </span></span><span class="keyword1"><span>𝗂𝗇</span></span><span> _"</span></span><span> </span><span class="main"><span>[</span></span><span>11</span><span class="main"><span>,</span></span><span>11</span><span class="main"><span>,</span></span><span>11</span><span class="main"><span>]</span></span><span> 10</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>F</span></span></span></span><span> </span><span class="keyword1"><span class="free"><span>𝗋𝖾𝖿𝗂𝗇𝖾𝗌</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>G</span></span></span></span><span> </span><span class="keyword1"><span class="free"><span>𝗐.𝗋.𝗍</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>T</span></span></span></span><span> </span><span class="keyword1"><span class="free"><span>𝗂𝗇</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>D</span></span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="bound"><span>R</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>F</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Image|const"><span>``</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>T</span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="bound"><span>r</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="bound"><span>R</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Spec_Pre.html#Phi_Spec_Pre.Subjection|const"><span>𝗌𝗎𝖻𝗃</span></a></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_disj_class.sep_disj|const"><span>##</span></a></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>D</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="main"><span>{</span></span><span> </span><span class="bound"><span>y'</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>y</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="bound"><span>y'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>T</span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="bound"><span>r</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="bound"><span>R</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_disj_class.sep_disj|const"><span>##</span></a></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span class="main"><span>,</span></span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>G</span></span></span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹We use relation directly here but doesn't mean we cannot model return value or threw exceptions.
They can parameterize the relation, as we don't need to (it is not designed to) abstract the values.
We only relate resources in different abstractions.

</span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">prop</span><span class="hidden">&gt;</span></span></span><span class="quoted"><span>‹</span><span class="main"><span>⋀</span></span><span class="bound"><span>ret</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>F</span></span><span> </span><span class="bound"><span>ret</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗋𝖾𝖿𝗂𝗇𝖾𝗌</span></a></span><span> </span><span class="free"><span>G</span></span><span> </span><span class="bound"><span>ret</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗐.𝗋.𝗍</span></a></span><span> </span><span class="free"><span>T</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗂𝗇</span></a></span><span> </span><span class="free"><span>D</span></span><span>›</span></span></span><span>
›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Fiction.empty_refines_any|fact"><span class="entity_def" id="Phi_Fiction.empty_refines_any|thm"><span>empty_refines_any</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗋𝖾𝖿𝗂𝗇𝖾𝗌</span></a></span><span> </span><span class="free"><span>Any</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗐.𝗋.𝗍</span></a></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗂𝗇</span></a></span><span> </span><span class="free"><span>D</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation_def|fact"><span>Fictional_Forward_Simulation_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Fiction.refinement_sub_domain|fact"><span class="entity_def" id="Phi_Fiction.refinement_sub_domain|thm"><span>refinement_sub_domain</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><span class="free"><span>D'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="free"><span>D</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗋𝖾𝖿𝗂𝗇𝖾𝗌</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗐.𝗋.𝗍</span></a></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗂𝗇</span></a></span><span> </span><span class="free"><span>D</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗋𝖾𝖿𝗂𝗇𝖾𝗌</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗐.𝗋.𝗍</span></a></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗂𝗇</span></a></span><span> </span><span class="free"><span>D'</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation_def|fact"><span>Fictional_Forward_Simulation_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Spec_Pre.html#Phi_Spec_Pre.Subjection_expn_set|fact"><span>Subjection_expn_set</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_iff|fact"><span>subset_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Image_def|fact"><span>Image_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Bex_def|fact"><span>Bex_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id_on_iff|fact"><span>Id_on_iff</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Fiction.refinement_sub_fun|fact"><span class="entity_def" id="Phi_Fiction.refinement_sub_fun|thm"><span>refinement_sub_fun</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><span class="free"><span>A'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="free"><span>A</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>A</span></span><span>  </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗋𝖾𝖿𝗂𝗇𝖾𝗌</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗐.𝗋.𝗍</span></a></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗂𝗇</span></a></span><span> </span><span class="free"><span>D</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>A'</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗋𝖾𝖿𝗂𝗇𝖾𝗌</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗐.𝗋.𝗍</span></a></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗂𝗇</span></a></span><span> </span><span class="free"><span>D</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation_def|fact"><span>Fictional_Forward_Simulation_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Spec_Pre.html#Phi_Spec_Pre.Subjection_expn_set|fact"><span>Subjection_expn_set</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_iff|fact"><span>subset_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Image_def|fact"><span>Image_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Bex_def|fact"><span>Bex_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id_on_iff|fact"><span>Id_on_iff</span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Fiction.refinement_sub_fun_right|fact"><span class="entity_def" id="Phi_Fiction.refinement_sub_fun_right|thm"><span>refinement_sub_fun_right</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="free"><span>B'</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗋𝖾𝖿𝗂𝗇𝖾𝗌</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗐.𝗋.𝗍</span></a></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗂𝗇</span></a></span><span> </span><span class="free"><span>D</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗋𝖾𝖿𝗂𝗇𝖾𝗌</span></a></span><span> </span><span class="free"><span>B'</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗐.𝗋.𝗍</span></a></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗂𝗇</span></a></span><span> </span><span class="free"><span>D</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation_def|fact"><span>Fictional_Forward_Simulation_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Spec_Pre.html#Phi_Spec_Pre.Subjection_expn_set|fact"><span>Subjection_expn_set</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_iff|fact"><span>subset_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Image_def|fact"><span>Image_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Bex_def|fact"><span>Bex_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id_on_iff|fact"><span>Id_on_iff</span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Fiction.refinement_frame|fact"><span class="entity_def" id="Phi_Fiction.refinement_frame|thm"><span>refinement_frame</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><span class="free"><span>A</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗋𝖾𝖿𝗂𝗇𝖾𝗌</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗐.𝗋.𝗍</span></a></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗂𝗇</span></a></span><span> </span><span class="free"><span>D</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗋𝖾𝖿𝗂𝗇𝖾𝗌</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id_on|const"><span>Id_on</span></a><span> </span><span class="free"><span>R</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗐.𝗋.𝗍</span></a></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗂𝗇</span></a></span><span> </span><span class="free"><span>D</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>R</span></span><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="tfree"><span>'b</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_semigroup|class"><span>sep_semigroup</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.rel|type"><span>rel</span></a><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation_def|fact"><span>Fictional_Forward_Simulation_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_iff|fact"><span>subset_iff</span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Spec_Pre.html#Phi_Spec_Pre.Subjection_expn_set|fact"><span>Subjection_expn_set</span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.set_mult_expn|fact"><span>set_mult_expn</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Image_def|fact"><span>Image_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Bex_def|fact"><span>Bex_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id_on_iff|fact"><span>Id_on_iff</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/SMT/smt_systems.ML.html#SMT.smt|method"><span class="operator"><span>smt</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>z3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_semigroup_class.sep_disj_multD1|fact"><span>sep_disj_multD1</span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_semigroup_class.sep_disj_multD2|fact"><span>sep_disj_multD2</span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_semigroup_class.sep_disj_multI1|fact"><span>sep_disj_multI1</span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_semigroup_class.sep_disj_multI2|fact"><span>sep_disj_multI2</span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_semigroup_class.sep_mult_assoc&apos;|fact"><span>sep_mult_assoc'</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Fiction.sep_refinement_horizontal_stepwise|fact"><span class="entity_def" id="Phi_Fiction.sep_refinement_horizontal_stepwise|thm"><span>sep_refinement_horizontal_stepwise</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><span class="free"><span>A1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗋𝖾𝖿𝗂𝗇𝖾𝗌</span></a></span><span> </span><span class="free"><span>B1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗐.𝗋.𝗍</span></a></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗂𝗇</span></a></span><span> </span><span class="free"><span>D</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>A2</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗋𝖾𝖿𝗂𝗇𝖾𝗌</span></a></span><span> </span><span class="free"><span>B2</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗐.𝗋.𝗍</span></a></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗂𝗇</span></a></span><span> </span><span class="free"><span>D'</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>B1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Image|const"><span>``</span></a></span><span> </span><span class="free"><span>D</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="free"><span>D'</span></span><span class="main"><span>)</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>A1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.relcomp|const"><span>O</span></a></span><span> </span><span class="free"><span>A2</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗋𝖾𝖿𝗂𝗇𝖾𝗌</span></a></span><span> </span><span class="free"><span>B1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.relcomp|const"><span>O</span></a></span><span> </span><span class="free"><span>B2</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗐.𝗋.𝗍</span></a></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗂𝗇</span></a></span><span> </span><span class="free"><span>D</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation_def|fact"><span>Fictional_Forward_Simulation_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.set_mult_expn|fact"><span>set_mult_expn</span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Spec_Pre.html#Phi_Spec_Pre.Subjection_expn_set|fact"><span>Subjection_expn_set</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_iff|fact"><span>subset_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Image_def|fact"><span>Image_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Bex_def|fact"><span>Bex_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>premises</span></span></span><span> </span><span class="entity_def" id="offset_3208..3213">prems</span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> x r R u v y z
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>xa</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>u</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="bound"><span>xa</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="skolem"><span>r</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="skolem"><span>R</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_disj_class.sep_disj|const"><span>##</span></a></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_disj_class.sep_disj|const"><span>##</span></a></span><span> </span><span class="skolem"><span>r</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>D</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>xa</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>A1</span></span><span>›</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#offset_3208..3213"><span>prems</span></a><span class="main"><span>(</span></span><span>10</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#offset_3208..3213"><span>prems</span></a><span class="main"><span>(</span></span><span>4</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#offset_3208..3213"><span>prems</span></a><span class="main"><span>(</span></span><span>5</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#offset_3208..3213"><span>prems</span></a><span class="main"><span>(</span></span><span>6</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#offset_3208..3213"><span>prems</span></a><span class="main"><span>(</span></span><span>8</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#offset_3208..3213"><span>prems</span></a><span class="main"><span>(</span></span><span>9</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_3409..3411">by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#offset_3208..3213"><span>prems</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><span>spec</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> x</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="skolem"><span>x</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><span>spec</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> x</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="skolem"><span>r</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><span>spec</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> x</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="skolem"><span>R</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><span>spec</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> x</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="skolem"><span>y</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>,</span></span><span>
          </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.mp|fact"><span>mp</span></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#offset_3409..3411"><span>this</span></a><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>premises</span></span></span><span> </span><span class="entity_def" id="offset_3618..3624">prems2</span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> y' u' v'
      </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
        </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>u</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>y'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="skolem"><span>r</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="skolem"><span>R</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_disj_class.sep_disj|const"><span>##</span></a></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="skolem"><span>y'</span></span><span> </span><span class="main"><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_disj_class.sep_disj|const"><span>##</span></a></span><span> </span><span class="skolem"><span>r</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="skolem"><span>y'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>D'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>z</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>A2</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#offset_3208..3213"><span>prems</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#offset_3208..3213"><span>prems</span></a><span class="main"><span>(</span></span><span>5</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#offset_3208..3213"><span>prems</span></a><span class="main"><span>(</span></span><span>7</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#offset_3618..3624"><span>prems2</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#offset_3618..3624"><span>prems2</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#offset_3618..3624"><span>prems2</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#offset_3618..3624"><span>prems2</span></a><span class="main"><span>(</span></span><span>4</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#offset_3618..3624"><span>prems2</span></a><span class="main"><span>(</span></span><span>5</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#offset_3618..3624"><span>prems2</span></a><span class="main"><span>(</span></span><span>6</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_3862..3864">by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#offset_3208..3213"><span>prems</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><span>spec</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> x</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="skolem"><span>y'</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><span>spec</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> x</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="skolem"><span>r</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><span>spec</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> x</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="skolem"><span>R</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><span>spec</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> x</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="skolem"><span>z</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>,</span></span><span>
          </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.mp|fact"><span>mp</span></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#offset_3862..3864"><span>this</span></a><span class="main"><span>]</span></span><span>
        </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#offset_3618..3624"><span>prems2</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Fiction.constant_refinement|fact"><span class="entity_def" id="Phi_Fiction.constant_refinement|thm"><span>constant_refinement</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id_on|const"><span>Id_on</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id_on|const"><span>Id_on</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗋𝖾𝖿𝗂𝗇𝖾𝗌</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id_on|const"><span>Id_on</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗐.𝗋.𝗍</span></a></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗂𝗇</span></a></span><span> </span><span class="free"><span>B</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation_def|fact"><span>Fictional_Forward_Simulation_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_iff|fact"><span>subset_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id_on_iff|fact"><span>Id_on_iff</span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.set_mult_expn|fact"><span>set_mult_expn</span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Spec_Pre.html#Phi_Spec_Pre.Subjection_expn_set|fact"><span>Subjection_expn_set</span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.times_fun|fact"><span>times_fun</span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Fiction.refinement_subjection|fact"><span class="entity_def" id="Phi_Fiction.refinement_subjection|thm"><span>refinement_subjection</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><span class="main"><span>(</span></span><span class="free"><span>P</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗋𝖾𝖿𝗂𝗇𝖾𝗌</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗐.𝗋.𝗍</span></a></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗂𝗇</span></a></span><span> </span><span class="free"><span>D</span></span><span class="main"><span>)</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="free"><span>Q</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Spec_Pre.html#Phi_Spec_Pre.Subjection|const"><span>𝗌𝗎𝖻𝗃</span></a></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗋𝖾𝖿𝗂𝗇𝖾𝗌</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Spec_Pre.html#Phi_Spec_Pre.Subjection|const"><span>𝗌𝗎𝖻𝗃</span></a></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗐.𝗋.𝗍</span></a></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗂𝗇</span></a></span><span> </span><span class="free"><span>D</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation_def|fact"><span>Fictional_Forward_Simulation_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Spec_Pre.html#Phi_Spec_Pre.Subjection_expn_set|fact"><span>Subjection_expn_set</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_iff|fact"><span>subset_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Image_def|fact"><span>Image_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Bex_def|fact"><span>Bex_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id_on_iff|fact"><span>Id_on_iff</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Fiction.refinement_existential|fact"><span class="entity_def" id="Phi_Fiction.refinement_existential|thm"><span>refinement_existential</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><span class="main"><span>(</span></span><span class="main"><span>⋀</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗋𝖾𝖿𝗂𝗇𝖾𝗌</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗐.𝗋.𝗍</span></a></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗂𝗇</span></a></span><span> </span><span class="free"><span>D</span></span><span class="main"><span>)</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Spec_Pre.html#Phi_Spec_Pre.ExSet|const"><span>ExSet</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗋𝖾𝖿𝗂𝗇𝖾𝗌</span></a></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Spec_Pre.html#Phi_Spec_Pre.ExSet|const"><span>ExSet</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗐.𝗋.𝗍</span></a></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗂𝗇</span></a></span><span> </span><span class="free"><span>D</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation_def|fact"><span>Fictional_Forward_Simulation_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Spec_Pre.html#Phi_Spec_Pre.Subjection_expn_set|fact"><span>Subjection_expn_set</span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Spec_Pre.html#Phi_Spec_Pre.ExSet_expn_set|fact"><span>ExSet_expn_set</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_iff|fact"><span>subset_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Image_def|fact"><span>Image_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Bex_def|fact"><span>Bex_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id_on_iff|fact"><span>Id_on_iff</span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Fiction.refinement_source_subjection|fact"><span class="entity_def" id="Phi_Fiction.refinement_source_subjection|thm"><span>refinement_source_subjection</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Spec_Pre.html#Phi_Spec_Pre.Subjection|const"><span>𝗌𝗎𝖻𝗃</span></a></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗋𝖾𝖿𝗂𝗇𝖾𝗌</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗐.𝗋.𝗍</span></a></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗂𝗇</span></a></span><span> </span><span class="free"><span>D</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>P</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗋𝖾𝖿𝗂𝗇𝖾𝗌</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗐.𝗋.𝗍</span></a></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗂𝗇</span></a></span><span> </span><span class="free"><span>D</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation_def|fact"><span>Fictional_Forward_Simulation_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Spec_Pre.html#Phi_Spec_Pre.Subjection_expn_set|fact"><span>Subjection_expn_set</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_iff|fact"><span>subset_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Image_def|fact"><span>Image_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Bex_def|fact"><span>Bex_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id_on_iff|fact"><span>Id_on_iff</span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.set_mult_expn|fact"><span>set_mult_expn</span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Fiction.refinement_ExSet|fact"><span class="entity_def" id="Phi_Fiction.refinement_ExSet|thm"><span>refinement_ExSet</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><span class="main"><span>(</span></span><span class="main"><span>⋀</span></span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗋𝖾𝖿𝗂𝗇𝖾𝗌</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗐.𝗋.𝗍</span></a></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗂𝗇</span></a></span><span> </span><span class="free"><span>D</span></span><span class="main"><span>)</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Spec_Pre.html#Phi_Spec_Pre.ExSet|const"><span>ExSet</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗋𝖾𝖿𝗂𝗇𝖾𝗌</span></a></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Spec_Pre.html#Phi_Spec_Pre.ExSet|const"><span>ExSet</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗐.𝗋.𝗍</span></a></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗂𝗇</span></a></span><span> </span><span class="free"><span>D</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation_def|fact"><span>Fictional_Forward_Simulation_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Spec_Pre.html#Phi_Spec_Pre.ExSet_expn_set|fact"><span>ExSet_expn_set</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_iff|fact"><span>subset_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Image_def|fact"><span>Image_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Bex_def|fact"><span>Bex_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id_on_iff|fact"><span>Id_on_iff</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span>)</span></span><span>


</span><span class="keyword1"><span class="command"><span class="entity_def" id="Phi_Fiction.refinement_projection_def|fact"><span class="entity_def" id="Phi_Fiction.refinement_projection_def|thm"><span class="entity_def" id="Phi_Fiction.refinement_projection_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Phi_Fiction.refinement_projection|const"><span>refinement_projection</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><span class="tfree"><span>'abstract</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_magma|class"><span>sep_magma</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'concrete</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'abstract</span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.spec|type"><span>spec</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'concrete</span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.spec|type"><span>spec</span></a><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>refinement_projection</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>I</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>D</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.Union|const"><span>⋃</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>I</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>D</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Fiction.refinement_projection_mono|fact"><span class="entity_def" id="Phi_Fiction.refinement_projection_mono|thm"><span>refinement_projection_mono</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><span class="free"><span>D</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="free"><span>D'</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.refinement_projection|const"><span>refinement_projection</span></a><span> </span><span class="free"><span>I</span></span><span> </span><span class="free"><span>D</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.refinement_projection|const"><span>refinement_projection</span></a><span> </span><span class="free"><span>I</span></span><span> </span><span class="free"><span>D'</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.refinement_projection_def|fact"><span>refinement_projection_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.set_mult_expn|fact"><span>set_mult_expn</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Bex_def|fact"><span>Bex_def</span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Fiction.UNIV_times_idem|fact"><span class="entity_def" id="Phi_Fiction.UNIV_times_idem|thm"><span>UNIV_times_idem</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_magma_1|class"><span>sep_magma_1</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span class="main"><span>)</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set_eq_iff|fact"><span>set_eq_iff</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.set_mult_expn|fact"><span>set_mult_expn</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.mult_1_class.mult_1_right|fact"><span>mult_1_class.mult_1_right</span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_magma_1_class.sep_magma_1_left|fact"><span>sep_magma_1_left</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Fiction.refinement_projection_UNIV_times_D|fact"><span class="entity_def" id="Phi_Fiction.refinement_projection_UNIV_times_D|thm"><span>refinement_projection_UNIV_times_D</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.refinement_projection|const"><span>refinement_projection</span></a><span> </span><span class="free"><span>I</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>D</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.refinement_projection|const"><span>refinement_projection</span></a><span> </span><span class="free"><span>I</span></span><span> </span><span class="free"><span>D</span></span><span> ›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>D</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_monoid|class"><span>sep_monoid</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.refinement_projection_def|fact"><span>refinement_projection_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.semigroup_mult_class.mult.assoc|fact"><span>mult.assoc</span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.UNIV_times_idem|fact"><span>UNIV_times_idem</span></a><span> </span><span class="keyword1"><span class="command"><span>..</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Instances›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Itself›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Phi_Fiction.\&lt;F&gt;_it_def|fact"><span class="entity_def" id="Phi_Fiction.\&lt;F&gt;_it_def|thm"><span class="entity_def" id="Phi_Fiction.\&lt;F&gt;_it_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Phi_Fiction.\&lt;F&gt;_it|const"><span>ℱ_it</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>{</span></span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Fiction.\&lt;F&gt;_it_refinement_projection|fact"><span class="entity_def" id="Phi_Fiction.\&lt;F&gt;_it_refinement_projection|thm"><span>ℱ_it_refinement_projection</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><span class="free"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="free"><span>S'</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.refinement_projection|const"><span>refinement_projection</span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.\&lt;F&gt;_it|const"><span>ℱ_it</span></a><span> </span><span class="free"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="free"><span>S'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.refinement_projection_def|fact"><span>refinement_projection_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.set_mult_expn|fact"><span>set_mult_expn</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Fiction.\&lt;F&gt;_it_refinement|fact"><span class="entity_def" id="Phi_Fiction.\&lt;F&gt;_it_refinement|thm"><span>ℱ_it_refinement</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><span class="free"><span>u</span></span><span class="main"><span>,</span></span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id_on|const"><span>Id_on</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗋𝖾𝖿𝗂𝗇𝖾𝗌</span></a></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><span class="free"><span>u</span></span><span class="main"><span>,</span></span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗐.𝗋.𝗍</span></a></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.\&lt;F&gt;_it|const"><span>ℱ_it</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗂𝗇</span></a></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>u</span></span><span class="main"><span>}</span></span><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>u</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><span class="main"><span>{</span></span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_cancel|class"><span>sep_cancel</span></a><span class="main"><span>,</span></span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_semigroup|class"><span>sep_semigroup</span></a><span class="main"><span>}</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation_def|fact"><span>Fictional_Forward_Simulation_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Spec_Pre.html#Phi_Spec_Pre.Subjection_expn_set|fact"><span>Subjection_expn_set</span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.set_mult_expn|fact"><span>set_mult_expn</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span>
      </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_cancel_class.sep_cancel|fact"><span>sep_cancel</span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_semigroup_class.sep_disj_multD1|fact"><span>sep_disj_multD1</span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_semigroup_class.sep_disj_multD2|fact"><span>sep_disj_multD2</span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_semigroup_class.sep_disj_multI1|fact"><span>sep_disj_multI1</span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_semigroup_class.sep_disj_multI2|fact"><span>sep_disj_multI2</span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_semigroup_class.sep_mult_assoc|fact"><span>sep_mult_assoc</span></a><span class="main"><span>)</span></span><span>


</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Composition›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Phi_Fiction.interp_comp_def|fact"><span class="entity_def" id="Phi_Fiction.interp_comp_def|thm"><span class="entity_def" id="Phi_Fiction.interp_comp_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Phi_Fiction.interp_comp|const"><span>interp_comp</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><span class="tfree"><span>'b</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one|class"><span>one</span></a><span class="main"><span>,</span></span><span class="tfree"><span>'c</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one|class"><span>one</span></a><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.interp|type"><span>interp</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one|class"><span>one</span></a><span class="main"><span>,</span></span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.interp|type"><span>interp</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>,</span></span><span class="tfree"><span>'c</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.interp|type"><span>interp</span></a><span>›</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>infixr</span></span></span><span> </span><span class="quoted"><span>"</span><span class="keyword1"><span>⨾<span class="hidden">⇩</span><sub>ℐ</sub></span></span><span>"</span></span><span> 55</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>I1</span></span></span></span><span> </span><span class="keyword1"><span class="free"><span>⨾<span class="hidden">⇩</span><sub>ℐ</sub></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>I2</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.Union|const"><span>⋃</span></a></span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>I1</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>I2</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Fiction.interp_comp_assoc|fact"><span class="entity_def" id="Phi_Fiction.interp_comp_assoc|thm"><span>interp_comp_assoc</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><span class="free"><span>I1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.interp_comp|const"><span>⨾<span class="hidden">⇩</span><sub>ℐ</sub></span></a></span><span> </span><span class="free"><span>I2</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.interp_comp|const"><span>⨾<span class="hidden">⇩</span><sub>ℐ</sub></span></a></span><span> </span><span class="free"><span>I3</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>I1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.interp_comp|const"><span>⨾<span class="hidden">⇩</span><sub>ℐ</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>I2</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.interp_comp|const"><span>⨾<span class="hidden">⇩</span><sub>ℐ</sub></span></a></span><span> </span><span class="free"><span>I3</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><span>fun_eq_iff</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Fiction.interp_comp_homo_one|fact"><span class="entity_def" id="Phi_Fiction.interp_comp_homo_one|thm"><span>interp_comp_homo_one</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.homo_one|const"><span>homo_one</span></a><span> </span><span class="free"><span>Ia</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.homo_one|const"><span>homo_one</span></a><span> </span><span class="free"><span>Ib</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.homo_one|const"><span>homo_one</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>Ia</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.interp_comp|const"><span>⨾<span class="hidden">⇩</span><sub>ℐ</sub></span></a></span><span> </span><span class="free"><span>Ib</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.homo_one_def|fact"><span>homo_one_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set_eq_iff|fact"><span>set_eq_iff</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Fiction.\&lt;F&gt;_it_comp|fact"><span class="entity_def" id="Phi_Fiction.\&lt;F&gt;_it_comp(2)|thm"><span class="entity_def" id="Phi_Fiction.\&lt;F&gt;_it_comp(1)|thm"><span>ℱ_it_comp</span></span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.\&lt;F&gt;_it|const"><span>ℱ_it</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.interp_comp|const"><span>⨾<span class="hidden">⇩</span><sub>ℐ</sub></span></a></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>I</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>I</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.interp_comp|const"><span>⨾<span class="hidden">⇩</span><sub>ℐ</sub></span></a></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.\&lt;F&gt;_it|const"><span>ℱ_it</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>I</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><span>fun_eq_iff</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Fiction.sep_refinement_stepwise|fact"><span class="entity_def" id="Phi_Fiction.sep_refinement_stepwise|thm"><span>sep_refinement_stepwise</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><span class="free"><span>S1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗋𝖾𝖿𝗂𝗇𝖾𝗌</span></a></span><span> </span><span class="free"><span>S2</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗐.𝗋.𝗍</span></a></span><span> </span><span class="free"><span>Ia</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗂𝗇</span></a></span><span> </span><span class="free"><span>D</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>S2</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗋𝖾𝖿𝗂𝗇𝖾𝗌</span></a></span><span> </span><span class="free"><span>S3</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗐.𝗋.𝗍</span></a></span><span> </span><span class="free"><span>Ib</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗂𝗇</span></a></span><span> </span><span class="free"><span>D'</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.refinement_projection|const"><span>refinement_projection</span></a><span> </span><span class="free"><span>Ib</span></span><span> </span><span class="free"><span>D'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="free"><span>D</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>S1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗋𝖾𝖿𝗂𝗇𝖾𝗌</span></a></span><span> </span><span class="free"><span>S3</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗐.𝗋.𝗍</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>Ia</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.interp_comp|const"><span>⨾<span class="hidden">⇩</span><sub>ℐ</sub></span></a></span><span> </span><span class="free"><span>Ib</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗂𝗇</span></a></span><span> </span><span class="free"><span>D'</span></span><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>Ia</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="tfree"><span>'b</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_magma_1|class"><span>sep_magma_1</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_magma_1|class"><span>sep_magma_1</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation_def|fact"><span>Fictional_Forward_Simulation_def</span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.refinement_projection_def|fact"><span>refinement_projection_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_iff|fact"><span>subset_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Image_def|fact"><span>Image_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Bex_def|fact"><span>Bex_def</span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Spec_Pre.html#Phi_Spec_Pre.Subjection_expn_set|fact"><span>Subjection_expn_set</span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.set_mult_expn|fact"><span>set_mult_expn</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.split_option_all|fact"><span>split_option_all</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>premises</span></span></span><span> </span><span class="entity_def" id="offset_7628..7633">prems</span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> x r R t u v xb
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>thm</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#offset_7628..7633"><span>prems</span></a><span>
    </span><span class="keyword1"><span class="command"><span>thm</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#offset_7628..7633"><span>prems</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><span>spec</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> x</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="skolem"><span>xb</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>,</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><span>spec</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> x</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>,</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><span>spec</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> x</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>R</span></span><span>›</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>,</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><span>spec</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> x</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>t</span></span><span>›</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>u</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>Ia</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>xb</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="skolem"><span>R</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_disj_class.sep_disj|const"><span>##</span></a></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="skolem"><span>xb</span></span><span> </span><span class="main"><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_disj_class.sep_disj|const"><span>##</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="skolem"><span>xb</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>D</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>S1</span></span><span>›</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#offset_7628..7633"><span>prems</span></a><span class="main"><span>(</span></span><span>10</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#offset_7628..7633"><span>prems</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#offset_7628..7633"><span>prems</span></a><span class="main"><span>(</span></span><span>4</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#offset_7628..7633"><span>prems</span></a><span class="main"><span>(</span></span><span>5</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#offset_7628..7633"><span>prems</span></a><span class="main"><span>(</span></span><span>6</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#offset_7628..7633"><span>prems</span></a><span class="main"><span>(</span></span><span>7</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#offset_7628..7633"><span>prems</span></a><span class="main"><span>(</span></span><span>8</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#offset_7628..7633"><span>prems</span></a><span class="main"><span>(</span></span><span>9</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_7970..7972">by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#offset_7628..7633"><span>prems</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><span>spec</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> x</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="skolem"><span>xb</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>,</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><span>spec</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> x</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>,</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><span>spec</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> x</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>R</span></span><span>›</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>,</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><span>spec</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> x</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>t</span></span><span>›</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>,</span></span><span>
          </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.mp|fact"><span>mp</span></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#offset_7970..7972"><span>this</span></a><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>premises</span></span></span><span> </span><span class="entity_def" id="offset_8185..8191">prems2</span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> y u'' v''
      </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
        </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>xa</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>u</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="bound"><span>xa</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>Ib</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="skolem"><span>r</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="main"><span>{</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_disj_class.sep_disj|const"><span>##</span></a></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_disj_class.sep_disj|const"><span>##</span></a></span><span> </span><span class="skolem"><span>r</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>D'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>xa</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>S2</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_8340..8342">by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.exI|fact"><span>exI</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> x</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="skolem"><span class="quoted"><span class="skolem"><span class="quoted"><span class="skolem"><span>xb</span></span></span></span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#offset_8185..8191"><span>prems2</span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#offset_7628..7633"><span>prems</span></a><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#offset_7628..7633"><span>prems</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><span>spec</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> x</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="skolem"><span>x</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>,</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><span>spec</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> x</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="skolem"><span>r</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>,</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><span>spec</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> x</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>{</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>}</span></span><span>›</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><span>spec</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> x</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="skolem"><span>y</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>,</span></span><span>
                </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.mp|fact"><span>mp</span></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#offset_8340..8342"><span>this</span></a><span class="main"><span>]</span></span><span>
        </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#offset_8185..8191"><span>prems2</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#offset_8185..8191"><span>prems2</span></a><span class="main"><span>(</span></span><span>4</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#offset_8185..8191"><span>prems2</span></a><span class="main"><span>(</span></span><span>5</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Fiction.sep_refinement_stepwise&apos;|fact"><span class="entity_def" id="Phi_Fiction.sep_refinement_stepwise&apos;|thm"><span>sep_refinement_stepwise'</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><span class="free"><span>S1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗋𝖾𝖿𝗂𝗇𝖾𝗌</span></a></span><span> </span><span class="free"><span>S2</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗐.𝗋.𝗍</span></a></span><span> </span><span class="free"><span>Ia</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗂𝗇</span></a></span><span> </span><span class="free"><span>D</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>S2'</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗋𝖾𝖿𝗂𝗇𝖾𝗌</span></a></span><span> </span><span class="free"><span>S3</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗐.𝗋.𝗍</span></a></span><span> </span><span class="free"><span>Ib</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗂𝗇</span></a></span><span> </span><span class="free"><span>D'</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.refinement_projection|const"><span>refinement_projection</span></a><span> </span><span class="free"><span>Ib</span></span><span> </span><span class="free"><span>D'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="free"><span>D</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>S2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="free"><span>S2'</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>S1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗋𝖾𝖿𝗂𝗇𝖾𝗌</span></a></span><span> </span><span class="free"><span>S3</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗐.𝗋.𝗍</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>Ia</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.interp_comp|const"><span>⨾<span class="hidden">⇩</span><sub>ℐ</sub></span></a></span><span> </span><span class="free"><span>Ib</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗂𝗇</span></a></span><span> </span><span class="free"><span>D'</span></span><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>Ia</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="tfree"><span>'b</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_magma_1|class"><span>sep_magma_1</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_magma_1|class"><span>sep_magma_1</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.refinement_sub_fun|fact"><span>refinement_sub_fun</span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.sep_refinement_stepwise|fact"><span>sep_refinement_stepwise</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Fiction.refinement_projections_stepwise|fact"><span class="entity_def" id="Phi_Fiction.refinement_projections_stepwise|thm"><span>refinement_projections_stepwise</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.refinement_projection|const"><span>refinement_projection</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>Ia</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.interp_comp|const"><span>⨾<span class="hidden">⇩</span><sub>ℐ</sub></span></a></span><span> </span><span class="free"><span>Ib</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>D</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.refinement_projection|const"><span>refinement_projection</span></a><span> </span><span class="free"><span>Ia</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.refinement_projection|const"><span>refinement_projection</span></a><span> </span><span class="free"><span>Ib</span></span><span> </span><span class="free"><span>D</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>Ia</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><span class="tfree"><span>'c</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_monoid|class"><span>sep_monoid</span></a><span class="main"><span>,</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_magma_1|class"><span>sep_magma_1</span></a><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.interp|type"><span>interp</span></a><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.refinement_projection_def|fact"><span>refinement_projection_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Bex_def|fact"><span>Bex_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set_eq_iff|fact"><span>set_eq_iff</span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.set_mult_expn|fact"><span>set_mult_expn</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> x x' u v
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.mult_1_class.mult_1_right|fact"><span>mult_1_class.mult_1_right</span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_magma_1_class.sep_magma_1_left|fact"><span>sep_magma_1_left</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Fiction.refinement_projections_stepwise_UNIV_paired|fact"><span class="entity_def" id="Phi_Fiction.refinement_projections_stepwise_UNIV_paired|thm"><span>refinement_projections_stepwise_UNIV_paired</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.refinement_projection|const"><span>refinement_projection</span></a><span> </span><span class="free"><span>Ia</span></span><span> </span><span class="free"><span>Da</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="free"><span>Dc</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span>
</span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.refinement_projection|const"><span>refinement_projection</span></a><span> </span><span class="free"><span>Ib</span></span><span> </span><span class="free"><span>Db</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="free"><span>Da</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span>
</span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.refinement_projection|const"><span>refinement_projection</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>Ia</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.interp_comp|const"><span>⨾<span class="hidden">⇩</span><sub>ℐ</sub></span></a></span><span> </span><span class="free"><span>Ib</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>Db</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="free"><span>Dc</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> ›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>Ia</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><span class="tfree"><span>'c</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_monoid|class"><span>sep_monoid</span></a><span class="main"><span>,</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_magma_1|class"><span>sep_magma_1</span></a><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.interp|type"><span>interp</span></a><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.refinement_projections_stepwise|fact"><span>refinement_projections_stepwise</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>mono_tags</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.refinement_projection_UNIV_times_D|fact"><span>refinement_projection_UNIV_times_D</span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.refinement_projection_mono|fact"><span>refinement_projection_mono</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_trans|fact"><span>subset_trans</span></a><span class="main"><span>)</span></span><span>


</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Function, pointwise›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Phi_Fiction.\&lt;F&gt;_finite_product_def|fact"><span class="entity_def" id="Phi_Fiction.\&lt;F&gt;_finite_product_def|thm"><span class="entity_def" id="Phi_Fiction.\&lt;F&gt;_finite_product_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Phi_Fiction.\&lt;F&gt;_finite_product|const"><span>ℱ_finite_product</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>I</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups_Big.html#Groups_Big.comm_monoid_mult_class.prod|const"><span>prod</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>I</span></span></span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.dom1|const"><span>dom1</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Fiction.\&lt;F&gt;_finite_product_split|fact"><span class="entity_def" id="Phi_Fiction.\&lt;F&gt;_finite_product_split|thm"><span>ℱ_finite_product_split</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>" </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.dom1|const"><span>dom1</span></a><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>⋀</span></span><span class="bound"><span>k</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.homo_one|const"><span>homo_one</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>I</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.\&lt;F&gt;_finite_product|const"><span>ℱ_finite_product</span></a><span> </span><span class="free"><span>I</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="free"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.\&lt;F&gt;_finite_product|const"><span>ℱ_finite_product</span></a><span> </span><span class="free"><span>I</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span class="main"><span>(</span></span><span class="free"><span>k</span></span><span class="main"><span>:=</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
   </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.\&lt;F&gt;_finite_product|const"><span>ℱ_finite_product</span></a><span> </span><span class="free"><span>I</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span class="main"><span>(</span></span><span class="free"><span>k</span></span><span class="main"><span>:=</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_disj_class.sep_disj|const"><span>##</span></a></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="free"><span>k</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_algebra|class"><span>sep_algebra</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'c</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_algebra|class"><span>sep_algebra</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.homo_one_def|fact"><span>homo_one_def</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span>
      </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/SMT/smt_systems.ML.html#SMT.smt|method"><span class="operator"><span>smt</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> best</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.dom1_upd|fact"><span>dom1_upd</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.fun_upd_triv|fact"><span>fun_upd_triv</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.comm_monoid_mult_class.mult.comm_neutral|fact"><span>mult.comm_neutral</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ab_semigroup_mult_class.mult.commute|fact"><span>mult.commute</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups_Big.html#Groups_Big.comm_monoid_mult_class.prod.insert_remove|fact"><span>prod.insert_remove</span></a><span class="main"><span>)</span></span><span>


</span><span class="keyword1"><span class="command"><span class="entity_def" id="Phi_Fiction.\&lt;F&gt;_FP_homo_def|fact"><span class="entity_def" id="Phi_Fiction.\&lt;F&gt;_FP_homo_def|thm"><span class="entity_def" id="Phi_Fiction.\&lt;F&gt;_FP_homo_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Phi_Fiction.\&lt;F&gt;_FP_homo|const"><span>ℱ_FP_homo</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>I</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups_Big.html#Groups_Big.comm_monoid_mult_class.prod|const"><span>prod</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Unital_Homo.html#Unital_Homo.unital_homo.apply_unital_homo|const"><span>apply_unital_homo</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>I</span></span></span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.dom1|const"><span>dom1</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Fiction.\&lt;F&gt;_FP_homo_split|fact"><span class="entity_def" id="Phi_Fiction.\&lt;F&gt;_FP_homo_split|thm"><span>ℱ_FP_homo_split</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>" </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.dom1|const"><span>dom1</span></a><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.\&lt;F&gt;_FP_homo|const"><span>ℱ_FP_homo</span></a><span> </span><span class="free"><span>I</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Phi_Algebras.Unital_Homo.html#Unital_Homo.unital_homo.apply_unital_homo|const"><span>apply_unital_homo</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>I</span></span><span> </span><span class="free"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="free"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.\&lt;F&gt;_FP_homo|const"><span>ℱ_FP_homo</span></a><span> </span><span class="free"><span>I</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span class="main"><span>(</span></span><span class="free"><span>k</span></span><span class="main"><span>:=</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
   </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="Phi_Algebras.Unital_Homo.html#Unital_Homo.unital_homo.apply_unital_homo|const"><span>apply_unital_homo</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>I</span></span><span> </span><span class="free"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="free"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_disj_class.sep_disj|const"><span>##</span></a></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.\&lt;F&gt;_FP_homo|const"><span>ℱ_FP_homo</span></a><span> </span><span class="free"><span>I</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span class="main"><span>(</span></span><span class="free"><span>k</span></span><span class="main"><span>:=</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> "</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'b</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_algebra|class"><span>sep_algebra</span></a><span class="main"><span>,</span></span><span> </span><span class="tfree"><span>'c</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_algebra|class"><span>sep_algebra</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Unital_Homo.html#Unital_Homo.unital_homo|type"><span>unital_homo</span></a><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.homo_one_def|fact"><span>homo_one_def</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span>
      </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/SMT/smt_systems.ML.html#SMT.smt|method"><span class="operator"><span>smt</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> ccfv_SIG</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Diff_empty|fact"><span>Diff_empty</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Diff_insert0|fact"><span>Diff_insert0</span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Unital_Homo.html#Unital_Homo.apply_unital_homo_1|fact"><span>apply_unital_homo_1</span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.dom1_def|fact"><span>dom1_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.mem_Collect_eq|fact"><span>mem_Collect_eq</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ab_semigroup_mult_class.mult.commute|fact"><span>mult.commute</span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.mult_1_class.mult_1_right|fact"><span>mult_1_class.mult_1_right</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups_Big.html#Groups_Big.comm_monoid_mult_class.prod.remove|fact"><span>prod.remove</span></a><span class="main"><span>)</span></span><span>

</span><span class="comment1"><span>(*
definition "ℱ_fun I = ℱ_fun' (λ_. I)"

lemma ℱ_fun_ℐ[simp]: "ℐ (ℱ_fun I) = (λf. prod (ℐ I o f) (dom1 f))"
  unfolding ℱ_fun_def by simp

lemma ℱ_fun_split:
  " finite (dom1 f)
⟹ ℐ (ℱ_fun I) f = ℐ (ℱ_fun I) (f(k:=1)) * ℐ I (f k)
  ∧ ℐ (ℱ_fun I) (f(k:=1)) ## ℐ I (f k)"
  for f :: "'a ⇒ 'b::sep_algebra"
  unfolding ℱ_fun_def using ℱ_fun'_split .

lemma ℱ_interp_fun_ℐ_1_fupdt[simp]: "ℐ (ℱ_fun I) (1(k:=v)) = ℐ I v" by simp
*)</span></span><span>
</span><span class="comment1"><span>(*
definition "ℱ_pointwise I = Interp (λf. {g. ∀x. g x ∈ ℐ I (f x) })"

lemma ℱ_pointwise_ℐ[simp]:
  "ℐ (ℱ_pointwise I) = (λf. {g. ∀x. g x ∈ ℐ I (f x) })"
  unfolding ℱ_pointwise_def
  by (rule Interp_inverse) (auto simp add: Interpretation_def one_fun_def fun_eq_iff)

lemma ℱ_pointwise_ℱ_it:
  ‹ℱ_pointwise ℱ_it = ℱ_it›
  by (rule interp_eq_I; simp add: fun_eq_iff set_eq_iff) *)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Phi_Fiction.\&lt;F&gt;_pointwise_def|fact"><span class="entity_def" id="Phi_Fiction.\&lt;F&gt;_pointwise_def|thm"><span class="entity_def" id="Phi_Fiction.\&lt;F&gt;_pointwise_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Phi_Fiction.\&lt;F&gt;_pointwise|const"><span>ℱ_pointwise</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>I</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>g</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span class="bound"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><span class="bound"><span>g</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>I</span></span></span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Fiction.\&lt;F&gt;_pointwise_homo_one|fact"><span class="entity_def" id="Phi_Fiction.\&lt;F&gt;_pointwise_homo_one|thm"><span>ℱ_pointwise_homo_one</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.locale_intro|attribute"><span class="operator"><span>locale_intro</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><span class="main"><span>(</span></span><span class="main"><span>⋀</span></span><span class="bound"><span>k</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.homo_one|const"><span>homo_one</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>I</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.homo_one|const"><span>homo_one</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.\&lt;F&gt;_pointwise|const"><span>ℱ_pointwise</span></a><span> </span><span class="free"><span>I</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.homo_one_def|fact"><span>homo_one_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set_eq_iff|fact"><span>set_eq_iff</span></a><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Fiction.\&lt;F&gt;_pointwise_\&lt;F&gt;_it|fact"><span class="entity_def" id="Phi_Fiction.\&lt;F&gt;_pointwise_\&lt;F&gt;_it|thm"><span>ℱ_pointwise_ℱ_it</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.\&lt;F&gt;_pointwise|const"><span>ℱ_pointwise</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.\&lt;F&gt;_it|const"><span>ℱ_it</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.\&lt;F&gt;_it|const"><span>ℱ_it</span></a><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><span>fun_eq_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set_eq_iff|fact"><span>set_eq_iff</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Fiction.\&lt;F&gt;_pointwise_projection|fact"><span class="entity_def" id="Phi_Fiction.\&lt;F&gt;_pointwise_projection|thm"><span>ℱ_pointwise_projection</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.refinement_projection|const"><span>refinement_projection</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>I</span></span><span> </span><span class="free"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>D'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="free"><span>D</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span>
</span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.refinement_projection|const"><span>refinement_projection</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.\&lt;F&gt;_pointwise|const"><span>ℱ_pointwise</span></a><span> </span><span class="free"><span>I</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.fun_upd|const"><span>fun_upd</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="free"><span>D'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.fun_upd|const"><span>fun_upd</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="free"><span>D</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>D</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="tfree"><span>'b</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_monoid|class"><span>sep_monoid</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_iff|fact"><span>subset_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Bex_def|fact"><span>Bex_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image_iff|fact"><span>image_iff</span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.set_mult_expn|fact"><span>set_mult_expn</span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.times_fun|fact"><span>times_fun</span></a><span>
            </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.refinement_projection_def|fact"><span>refinement_projection_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>premises</span></span></span><span> </span><span class="entity_def" id="offset_12203..12208">prems</span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> t u xb
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_12239..12241">t1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>xb</span></span><span> </span><span class="main"><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_disj_class.sep_disj|const"><span>##</span></a></span><span> </span><span class="skolem"><span>u</span></span><span> </span><span class="free"><span>k</span></span><span>›</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.fun_upd_same|fact"><span>fun_upd_same</span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#offset_12203..12208"><span>prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_disj_fun|fact"><span>sep_disj_fun</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>xa</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>u</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="bound"><span>xa</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>D'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_disj_class.sep_disj|const"><span>##</span></a></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="bound"><span>xa</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="skolem"><span>t</span></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_12397..12399">by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#offset_12203..12208"><span>prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#offset_12203..12208"><span>prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>4</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#offset_12239..12241"><span>t1</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#offset_12203..12208"><span>prems</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><span>spec</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> x</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>t</span></span><span> </span><span class="free"><span>k</span></span><span>›</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.mp|fact"><span>mp</span></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#offset_12397..12399"><span>this</span></a><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>premises</span></span></span><span> </span><span class="entity_def" id="offset_12557..12563">prems2</span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> u' v'
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.exI|fact"><span>exI</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> x</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span></a></span></a></span><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span><span class="free"><span class="free"><span class="free"><span>k</span></span></span></span><span> </span><span class="main"><span class="main"><span class="main"><span>:=</span></span></span></span><span> </span><span class="skolem"><span class="skolem"><span class="skolem"><span>u'</span></span></span></span><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span><span>›</span></span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.exI|fact"><span>exI</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> x</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span class="skolem"><span class="skolem"><span>t</span></span></span></span><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span><span class="free"><span class="free"><span class="free"><span>k</span></span></span></span><span> </span><span class="main"><span class="main"><span class="main"><span>:=</span></span></span></span><span> </span><span class="skolem"><span class="skolem"><span class="skolem"><span>v'</span></span></span></span><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span><span>›</span></span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span>
            </span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><span>fun_eq_iff</span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#offset_12557..12563"><span>prems2</span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_disj_fun_def|fact"><span>sep_disj_fun_def</span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.times_fun|fact"><span>times_fun</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Fiction.\&lt;F&gt;_pointwise_refinement|fact"><span class="entity_def" id="Phi_Fiction.\&lt;F&gt;_pointwise_refinement|thm"><span>ℱ_pointwise_refinement</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id_on|const"><span>Id_on</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗋𝖾𝖿𝗂𝗇𝖾𝗌</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗐.𝗋.𝗍</span></a></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗂𝗇</span></a></span><span> </span><span class="free"><span>D</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.pairself|const"><span>pairself</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.fun_upd|const"><span>fun_upd</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="free"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id_on|const"><span>Id_on</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗋𝖾𝖿𝗂𝗇𝖾𝗌</span></a></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.pairself|const"><span>pairself</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.fun_upd|const"><span>fun_upd</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="free"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="free"><span>B</span></span><span>
    </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗐.𝗋.𝗍</span></a></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.\&lt;F&gt;_pointwise|const"><span>ℱ_pointwise</span></a><span> </span><span class="free"><span>I</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗂𝗇</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.fun_upd|const"><span>fun_upd</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="free"><span>D</span></span><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="tfree"><span>'c</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_magma_1|class"><span>sep_magma_1</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_magma_1|class"><span>sep_magma_1</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation_def|fact"><span>Fictional_Forward_Simulation_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.set_mult_expn|fact"><span>set_mult_expn</span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Spec_Pre.html#Phi_Spec_Pre.Subjection_expn_set|fact"><span>Subjection_expn_set</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image_iff|fact"><span>image_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Image_def|fact"><span>Image_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_iff|fact"><span>subset_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Bex_def|fact"><span>Bex_def</span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.times_fun|fact"><span>times_fun</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id_on_iff|fact"><span>Id_on_iff</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>premises</span></span></span><span> </span><span class="entity_def" id="offset_13166..13171">prems</span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> r R u v xb xc a b
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_13213..13215">t1</span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_disj_class.sep_disj|const"><span>##</span></a></span><span> </span><span class="skolem"><span>xc</span></span><span> </span><span class="free"><span>k</span></span><span>›</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.fun_upd_same|fact"><span>fun_upd_same</span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#offset_13166..13171"><span>prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>8</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_disj_fun|fact"><span>sep_disj_fun</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_13296..13298">t2</span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_disj_class.sep_disj|const"><span>##</span></a></span><span> </span><span class="skolem"><span>xc</span></span><span> </span><span class="free"><span>k</span></span><span>›</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.fun_upd_same|fact"><span>fun_upd_same</span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#offset_13166..13171"><span>prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>9</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_disj_fun|fact"><span>sep_disj_fun</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>u</span></span><span> </span><span class="bound"><span>va</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="bound"><span>va</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>xb</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="skolem"><span>r</span></span><span> </span><span class="free"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>va</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="main"><span>{</span></span><span class="skolem"><span>v</span></span><span> </span><span class="free"><span>k</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_disj_class.sep_disj|const"><span>##</span></a></span><span> </span><span class="bound"><span>va</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span>
      </span><span class="skolem"><span>xb</span></span><span> </span><span class="main"><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_disj_class.sep_disj|const"><span>##</span></a></span><span> </span><span class="skolem"><span>r</span></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="skolem"><span>xb</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>D</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>a</span></span><span> </span><span class="bound"><span>ba</span></span><span> </span><span class="bound"><span>aa</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="bound"><span>aa</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="skolem"><span>xc</span></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>ba</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="bound"><span>aa</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>a</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>ba</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_disj_class.sep_disj|const"><span>##</span></a></span><span> </span><span class="bound"><span>aa</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>ba</span></span><span> </span><span class="main"><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_disj_class.sep_disj|const"><span>##</span></a></span><span> </span><span class="bound"><span>aa</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_13563..13565">by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#offset_13166..13171"><span>prems</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span>
          </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/SMT/smt_systems.ML.html#SMT.smt|method"><span class="operator"><span>smt</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> ccfv_threshold</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.fun_upd_same|fact"><span>fun_upd_same</span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#offset_13166..13171"><span>prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>10</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#offset_13166..13171"><span>prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#offset_13166..13171"><span>prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#offset_13166..13171"><span>prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>5</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#offset_13166..13171"><span>prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>7</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_disj_fun_def|fact"><span>sep_disj_fun_def</span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#offset_13213..13215"><span>t1</span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#offset_13296..13298"><span>t2</span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.times_fun_def|fact"><span>times_fun_def</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#offset_13166..13171"><span>prems</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><span>spec</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> x</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="skolem"><span>xb</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><span>spec</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> x</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>r</span></span><span> </span><span class="free"><span>k</span></span><span>›</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><span>spec</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> x</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>{</span></span><span class="skolem"><span>v</span></span><span> </span><span class="free"><span>k</span></span><span class="main"><span>}</span></span><span>›</span></span></span><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><span>spec</span></a><span class="main"><span class="main"><span class="main"><span>[</span></span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> x</span><span class="main"><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span></span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="skolem"><span>xc</span></span><span> </span><span class="free"><span>k</span></span><span>›</span></span></span><span class="main"><span class="main"><span class="main"><span>]</span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>,</span></span><span>
          </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.mp|fact"><span>mp</span></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#offset_13563..13565"><span>this</span></a><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>premises</span></span></span><span> </span><span class="entity_def" id="offset_13944..13950">prems2</span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> y v'
      </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
        </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_13987..13989">t4</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>u</span></span><span class="main"><span>(</span></span><span class="free"><span>k</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="skolem"><span>v'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_disj_class.sep_disj|const"><span>##</span></a></span><span> </span><span class="skolem"><span>v</span></span><span>›</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_disj_fun_def|fact"><span>sep_disj_fun_def</span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#offset_13944..13950"><span>prems2</span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#offset_13166..13171"><span>prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>7</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#offset_13166..13171"><span>prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>7</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_14110..14112">t3</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>(</span></span><span class="free"><span>k</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="skolem"><span>xc</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>u</span></span><span class="main"><span>(</span></span><span class="free"><span>k</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="skolem"><span>v'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="skolem"><span>v</span></span><span>›</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><span>fun_eq_iff</span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.times_fun|fact"><span>times_fun</span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#offset_13944..13950"><span>prems2</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span>
              </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>mono_tags</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.fun_upd_apply|fact"><span>fun_upd_apply</span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.mult_1_class.mult_1_left|fact"><span>mult_1_class.mult_1_left</span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#offset_13166..13171"><span>prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>5</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.times_fun_def|fact"><span>times_fun_def</span></a><span class="main"><span>)</span></span><span>
        </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.exI|fact"><span>exI</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> x</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span></a></span></a></span><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span><span class="free"><span class="free"><span class="free"><span>k</span></span></span></span><span> </span><span class="main"><span class="main"><span class="main"><span>:=</span></span></span></span><span> </span><span class="skolem"><span class="skolem"><span class="skolem"><span>y</span></span></span></span><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span><span>›</span></span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#offset_13166..13171"><span>prems</span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#offset_13944..13950"><span>prems2</span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span>
              </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/SMT/smt_systems.ML.html#SMT.smt|method"><span class="operator"><span>smt</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.fun_upd_apply|fact"><span>fun_upd_apply</span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.mult_1_class.mult_1_left|fact"><span>mult_1_class.mult_1_left</span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.one_fun_def|fact"><span>one_fun_def</span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#offset_13166..13171"><span>prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#offset_13166..13171"><span>prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>6</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#offset_13944..13950"><span>prems2</span></a><span class="main"><span class="main"><span>(</span></span></span><span>4</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#offset_14110..14112"><span>t3</span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#offset_13987..13989"><span>t4</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span>
              </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.fun_sep_disj_1_fupdt|fact"><span>fun_sep_disj_1_fupdt</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.fun_upd_triv|fact"><span>fun_upd_triv</span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#offset_13944..13950"><span>prems2</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#offset_13944..13950"><span>prems2</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>

</span><span class="comment1"><span>(* subsubsection ‹Pairwise›

definition "ℱ_pair I1 I2 = (λ(x,y). I1 x * I2 y) "

lemma ℱ_pair[simp]: "ℱ_pair I1 I2 (x,y) = I1 x * I2 y"
  for I1 :: "('a::one,'b::sep_monoid) interp"
  unfolding ℱ_pair_def by (simp add: one_prod_def)

notation ℱ_pair (infixl "∙<span class="hidden">⇩</span><sub>ℱ</sub>" 50)


subsubsection ‹Option›

definition "ℱ_option I = Interp (case_option 1 I)"

lemma ℱ_option_ℐ[simp]: "ℐ (ℱ_option I) = (case_option 1 I)"
  unfolding ℱ_option_def
  by (rule Interp_inverse) (simp add: Interpretation_def)


definition "ℱ_optionwise I = Interp (λx. case x of Some x' ⇒ Some ` I x' | _ ⇒ {None})"

lemma ℱ_optionwise_ℐ[simp]:
  "ℐ (ℱ_optionwise I) = (λx. case x of Some x' ⇒ Some ` I x' | _ ⇒ {None})"
  unfolding ℱ_optionwise_def
  by (rule Interp_inverse) (auto simp add: Interpretation_def)
*)</span></span><span>

</span><span class="comment1"><span>(* subsubsection ‹Partiality›

definition "fine I = Interp (case_fine (ℐ I) {})"
lemma fine_ℐ[simp]: "ℐ (fine I) = case_fine (ℐ I) {}"
  unfolding fine_def by (rule Interp_inverse) (simp add: Interpretation_def one_fine_def)

definition "defined I = Interp (λx. Fine ` ℐ I x)"
lemma defined_ℐ[simp]: "ℐ (defined I) = (λx. Fine ` ℐ I x)"
  unfolding defined_def
  by (rule Interp_inverse) (auto simp add: Interpretation_def one_fine_def)

definition "partialwise I = ℱ_fine (defined I)"
lemma partialwise_ℐ[simp]: "ℐ (partialwise I) (Fine x) = { Fine y |y. y ∈ ℐ I x }"
  unfolding partialwise_def by auto
*)</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Functional Fiction›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Phi_Fiction.\&lt;F&gt;_functional_def|fact"><span class="entity_def" id="Phi_Fiction.\&lt;F&gt;_functional_def|thm"><span class="entity_def" id="Phi_Fiction.\&lt;F&gt;_functional_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span class="entity_def" id="Phi_Fiction.\&lt;F&gt;_functional|const"><span>ℱ_functional</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>ψ</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>D</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>y</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>ψ</span></span></span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>D</span></span></span></span><span> </span><span class="main"><span>}</span></span><span>›</span></span></span><span>

</span><span class="comment1"><span>(* lemma (in kernel_is_1) ℱ_functional_ℐ[simp]:
  ‹ℐ (ℱ_functional ψ) = (λx. {y. x = ψ y})›
  unfolding ℱ_functional_def
  by (rule Interp_inverse, simp add: Interpretation_def one_set_def set_eq_iff inj_at_1) *)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Fiction.\&lt;F&gt;_functional_homo_one|fact"><span class="entity_def" id="Phi_Fiction.\&lt;F&gt;_functional_homo_one|thm"><span>ℱ_functional_homo_one</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.locale_intro|attribute"><span class="operator"><span>locale_intro</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.simple_homo_mul|const"><span>simple_homo_mul</span></a><span> </span><span class="free"><span>ψ</span></span><span> </span><span class="free"><span>D</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.homo_one|const"><span>homo_one</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.\&lt;F&gt;_functional|const"><span>ℱ_functional</span></a><span> </span><span class="free"><span>ψ</span></span><span> </span><span class="free"><span>D</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.homo_one_def|fact"><span>homo_one_def</span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.\&lt;F&gt;_functional_def|fact"><span>ℱ_functional_def</span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.simple_homo_mul_def|fact"><span>simple_homo_mul_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set_eq_iff|fact"><span>set_eq_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Ball_def|fact"><span>Ball_def</span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span>)</span></span><span>

</span><span class="comment1"><span>(*TODO: move this or remove this*)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Fiction.map_option_inj_at_1|fact"><span class="entity_def" id="Phi_Fiction.map_option_inj_at_1|thm"><span>map_option_inj_at_1</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.simple_homo_mul|const"><span>simple_homo_mul</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.map_option|const"><span>map_option</span></a><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.one_option_def|fact"><span>one_option_def</span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.simple_homo_mul_def|fact"><span>simple_homo_mul_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.split_option_all|fact"><span>split_option_all</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_orthogonal_monoid|locale"><span>sep_orthogonal_monoid</span></a><span class="main"><span>)</span></span><span> </span><span class="entity_def" id="Phi_Fiction.sep_orthogonal_monoid.\&lt;F&gt;_functional_projection|fact"><span class="entity_def" id="Phi_Fiction.sep_orthogonal_monoid.\&lt;F&gt;_functional_projection|thm"><span>ℱ_functional_projection</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><span class="free"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="free"><span>D</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.refinement_projection|const"><span>refinement_projection</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.\&lt;F&gt;_functional|const"><span>ℱ_functional</span></a><span> </span><span class="free"><span>ψ</span></span><span> </span><span class="free"><span>D</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>ψ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="free"><span>S</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="free"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.refinement_projection_def|fact"><span>refinement_projection_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_iff|fact"><span>subset_iff</span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.set_mult_expn|fact"><span>set_mult_expn</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq_commute|fact"><span>eq_commute</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> a</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>ψ</span></span><span> </span><span class="main"><span>_</span></span><span>›</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><span>sep_orthogonal</span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Fiction.\&lt;F&gt;_functional_pointwise|fact"><span class="entity_def" id="Phi_Fiction.\&lt;F&gt;_functional_pointwise|thm"><span>ℱ_functional_pointwise</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.\&lt;F&gt;_functional|const"><span>ℱ_functional</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>(∘)</span></a></span><span> </span><span class="free"><span>ψ</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.pointwise_set|const"><span>pointwise_set</span></a><span> </span><span class="free"><span>D</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.\&lt;F&gt;_pointwise|const"><span>ℱ_pointwise</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.\&lt;F&gt;_functional|const"><span>ℱ_functional</span></a><span> </span><span class="free"><span>ψ</span></span><span> </span><span class="free"><span>D</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><span>fun_eq_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set_eq_iff|fact"><span>set_eq_iff</span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.pointwise_set_def|fact"><span>pointwise_set_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Fiction.\&lt;F&gt;_functional_comp|fact"><span class="entity_def" id="Phi_Fiction.\&lt;F&gt;_functional_comp|thm"><span>ℱ_functional_comp</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><span class="free"><span>g</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="free"><span>Dg</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="free"><span>Df</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.\&lt;F&gt;_functional|const"><span>ℱ_functional</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>Dg</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.\&lt;F&gt;_functional|const"><span>ℱ_functional</span></a><span> </span><span class="free"><span>g</span></span><span> </span><span class="free"><span>Dg</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.interp_comp|const"><span>⨾<span class="hidden">⇩</span><sub>ℐ</sub></span></a></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.\&lt;F&gt;_functional|const"><span>ℱ_functional</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>Df</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><span>fun_eq_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set_eq_iff|fact"><span>set_eq_iff</span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span>)</span></span><span>
  

</span><span class="comment1"><span>(* definition "ℱ_share s = (case s of Share w v ⇒ if w = 1 then {v} else {})"

lemma ℱ_share_ℐ[simp]: "ℱ_share (Share w v) = (if w = 1 then {v} else {})"
  unfolding ℱ_share_def by simp *)</span></span><span>

</span><span class="comment1"><span>(* lemma In_ficion_fine [simp]:
  ‹x ∈ (case some_fine of Fine y ⇒ f y | Undef ⇒ {})
        ⟷ (∃y. some_fine = Fine y ∧ x ∈ f y)›
  by (cases some_fine; simp)
*)</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Agreement›</span></span></span><span>

</span><span class="comment1"><span>(* TODO: check this!!!!
definition ‹ℱ_agree = (λx. case x of agree x' ⇒ {x'})› *)</span></span><span>


</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Refinement of Algebraic Structures›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Cancellative Separation Insertion Homomorphism›</span></span></span><span>

</span><span class="comment1"><span>(*
lemma refinement_projection:
  ‹ kernel_is_1 ψ
⟹ Id_on UNIV * {(a, b)} 𝗋𝖾𝖿𝗂𝗇𝖾𝗌 pairself ψ ` {(a,b)} 𝗐.𝗋.𝗍 ℱ_functional ψ 𝗂𝗇 ψ ` {a}›
  unfolding Fictional_Forward_Simulation_def
  apply (clarsimp simp add: set_mult_expn Subjection_expn_set)
subgoal for r R u v w *)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Phi_Fiction.\&lt;F&gt;_functional_condition_def|fact"><span class="entity_def" id="Phi_Fiction.\&lt;F&gt;_functional_condition_def|thm"><span class="entity_def" id="Phi_Fiction.\&lt;F&gt;_functional_condition_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Phi_Fiction.\&lt;F&gt;_functional_condition|const"><span>ℱ_functional_condition</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>ℱ_functional_condition</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>D</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span class="bound"><span>r</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_disj_class.sep_disj|const"><span>##</span></a></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_disj_class.sep_disj|const"><span>##</span></a></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>D</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>D</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>D</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>D</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>D</span></span></span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Fiction.\&lt;F&gt;_functional_condition_UNIV|fact"><span class="entity_def" id="Phi_Fiction.\&lt;F&gt;_functional_condition_UNIV|thm"><span>ℱ_functional_condition_UNIV</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.\&lt;F&gt;_functional_condition|const"><span>ℱ_functional_condition</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.\&lt;F&gt;_functional_condition_def|fact"><span>ℱ_functional_condition_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Phi_Fiction.frame_preserving_relation_def|fact"><span class="entity_def" id="Phi_Fiction.frame_preserving_relation_def|thm"><span class="entity_def" id="Phi_Fiction.frame_preserving_relation_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Phi_Fiction.frame_preserving_relation|const"><span>frame_preserving_relation</span></span></span><span> </span><span class="comment1"><span>― ‹TODO: REALLY UGLY!›</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>frame_preserving_relation</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>R</span></span></span></span><span>
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span class="bound"><span>a</span></span><span> </span><span class="bound"><span>b</span></span><span> </span><span class="bound"><span>c</span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="bound"><span>w</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>a</span></span><span class="main"><span>,</span></span><span class="bound"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>R</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>c</span></span><span class="main"><span>,</span></span><span class="bound"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>R</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>c</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="bound"><span>w</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_disj_class.sep_disj|const"><span>##</span></a></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_disj_class.sep_disj|const"><span>##</span></a></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>c</span></span><span> </span><span class="main"><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_disj_class.sep_disj|const"><span>##</span></a></span><span> </span><span class="bound"><span>w</span></span><span>
            </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="bound"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="bound"><span>w</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_disj_class.sep_disj|const"><span>##</span></a></span><span> </span><span class="bound"><span>w</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>context</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.cancl_sep_orthogonal_monoid|locale"><span>cancl_sep_orthogonal_monoid</span></a><span> </span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Fiction.cancl_sep_orthogonal_monoid.\&lt;F&gt;_functional_refinement_complex|fact"><span class="entity_def" id="Phi_Fiction.cancl_sep_orthogonal_monoid.\&lt;F&gt;_functional_refinement_complex|thm"><span>ℱ_functional_refinement_complex</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span class="bound"><span>a</span></span><span> </span><span class="bound"><span>b</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>a</span></span><span class="main"><span>,</span></span><span class="bound"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>D</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>D</span></span><span class="main"><span>)</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.frame_preserving_relation|const"><span>frame_preserving_relation</span></a><span> </span><span class="free"><span>R</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Algebra_Set.html#Phi_Algebra_Set.Sep_Closed|const"><span>Sep_Closed</span></a><span> </span><span class="free"><span>D</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id_on|const"><span>Id_on</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗋𝖾𝖿𝗂𝗇𝖾𝗌</span></a></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.pairself|const"><span>pairself</span></a><span> </span><span class="free"><span>ψ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗐.𝗋.𝗍</span></a></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.\&lt;F&gt;_functional|const"><span>ℱ_functional</span></a><span> </span><span class="free"><span>ψ</span></span><span> </span><span class="free"><span>D</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗂𝗇</span></a></span><span> </span><span class="free"><span>ψ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Domain|const"><span>Domain</span></a><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span> ›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation_def|fact"><span>Fictional_Forward_Simulation_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.set_mult_expn|fact"><span>set_mult_expn</span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Spec_Pre.html#Phi_Spec_Pre.Subjection_expn_set|fact"><span>Subjection_expn_set</span></a><span> </span><span>sep_orthogonal</span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Algebra_Set.html#Phi_Algebra_Set.Sep_Closed_def|fact"><span>Sep_Closed_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image_iff|fact"><span>image_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Bex_def|fact"><span>Bex_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/SMT/smt_systems.ML.html#SMT.smt|method"><span class="operator"><span>smt</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>z3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.frame_preserving_relation_def|fact"><span>frame_preserving_relation_def</span></a><span> </span><span>homo_mult</span><span> </span><span>sep_disj_homo_semi</span><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_semigroup_class.sep_disj_multD1|fact"><span>sep_disj_multD1</span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_semigroup_class.sep_disj_multD2|fact"><span>sep_disj_multD2</span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_semigroup_class.sep_disj_multI1|fact"><span>sep_disj_multI1</span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_semigroup_class.sep_disj_multI2|fact"><span>sep_disj_multI2</span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_semigroup_class.sep_mult_assoc|fact"><span>sep_mult_assoc</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Fiction.cancl_sep_orthogonal_monoid.\&lt;F&gt;_functional_refinement|fact"><span class="entity_def" id="Phi_Fiction.cancl_sep_orthogonal_monoid.\&lt;F&gt;_functional_refinement|thm"><span>ℱ_functional_refinement</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>D</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>D</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.\&lt;F&gt;_functional_condition|const"><span>ℱ_functional_condition</span></a><span> </span><span class="free"><span>D</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><span class="free"><span>a</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id_on|const"><span>Id_on</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗋𝖾𝖿𝗂𝗇𝖾𝗌</span></a></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.pairself|const"><span>pairself</span></a><span> </span><span class="free"><span>ψ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><span class="free"><span>a</span></span><span class="main"><span>,</span></span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗐.𝗋.𝗍</span></a></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.\&lt;F&gt;_functional|const"><span>ℱ_functional</span></a><span> </span><span class="free"><span>ψ</span></span><span> </span><span class="free"><span>D</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗂𝗇</span></a></span><span> </span><span class="free"><span>ψ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>a</span></span><span class="main"><span>}</span></span><span> ›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation_def|fact"><span>Fictional_Forward_Simulation_def</span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.\&lt;F&gt;_functional_condition_def|fact"><span>ℱ_functional_condition_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.set_mult_expn|fact"><span>set_mult_expn</span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Spec_Pre.html#Phi_Spec_Pre.Subjection_expn_set|fact"><span>Subjection_expn_set</span></a><span> </span><span>sep_orthogonal</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>no_types</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>homo_mult</span><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_cancel_class.sep_cancel|fact"><span>sep_cancel</span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_semigroup_class.sep_disj_multD1|fact"><span>sep_disj_multD1</span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_semigroup_class.sep_disj_multD2|fact"><span>sep_disj_multD2</span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_semigroup_class.sep_disj_multI1|fact"><span>sep_disj_multI1</span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_semigroup_class.sep_disj_multI2|fact"><span>sep_disj_multI2</span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_semigroup_class.sep_mult_assoc|fact"><span>sep_mult_assoc</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_cancel_class.sep_cancel|fact"><span>sep_cancel</span></a><span> </span><span>sep_disj_homo_semi</span><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_semigroup_class.sep_disj_multD1|fact"><span>sep_disj_multD1</span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_semigroup_class.sep_disj_multD2|fact"><span>sep_disj_multD2</span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_semigroup_class.sep_disj_multI2|fact"><span>sep_disj_multI2</span></a><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.sep_semigroup_class.sep_mult_assoc|fact"><span>sep_mult_assoc</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Cancellative Permission Insertion Homomorphism›</span></span></span><span>


</span><span class="keyword1"><span class="command"><span>context</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.cancl_share_orthogonal_homo|locale"><span>cancl_share_orthogonal_homo</span></a><span> </span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Fiction.cancl_share_orthogonal_homo.refinement_projection_half_perm|fact"><span class="entity_def" id="Phi_Fiction.cancl_share_orthogonal_homo.refinement_projection_half_perm|thm"><span>refinement_projection_half_perm</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="free"><span>D</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.refinement_projection|const"><span>refinement_projection</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.\&lt;F&gt;_functional|const"><span>ℱ_functional</span></a><span> </span><span class="free"><span>ψ</span></span><span> </span><span class="free"><span>D</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.raw_share_class.share|const"><span>share</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><span class="free"><span>ψ</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="free"><span>S</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="free"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Phi_Fiction.html#Phi_Fiction.refinement_projection_def|fact"><span>refinement_projection_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.set_mult_expn|fact"><span>set_mult_expn</span></a><span> </span><span>sep_orthogonal</span><span> </span><span>share_orthogonal'</span><span class="main"><span class="keyword3"><span>;</span></span></span><span>
      </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>›</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span>
      </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="operator"><span>insert</span></span><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.share_orthogonal_homo.share_orthogonal&apos;|fact"><span>share_orthogonal_homo.share_orthogonal'</span></a><span> </span><span>share_orthogonal_homo_axioms</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>[</span></span></span><span>1</span><span class="main"><span class="keyword3"><span>]</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span>
       </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.in_mono|fact"><span>in_mono</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.linorder_class.leI|fact"><span>leI</span></a><span> </span><span>sep_orthogonal</span><span> </span><span>share_bounded</span><span> </span><a class="entity_ref" href="Phi_Algebras.Algebras.html#Algebras.share_one_class.share_right_one|fact"><span>share_right_one</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>


</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>



</span><span class="keyword2"><span class="keyword"><span>end</span></span></span></pre>
</body>

</html>