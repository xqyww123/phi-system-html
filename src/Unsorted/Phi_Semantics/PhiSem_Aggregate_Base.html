<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><link rel="stylesheet" type="text/css" href="isabelle.css"/>
<title>Theory PhiSem_Aggregate_Base</title>
</head>


<body>
<div class="head">
<h1>Theory PhiSem_Aggregate_Base</h1>
</div>

<pre class="source"><span class="keyword1"><span class="command"><span>theory</span></span></span><span> </span><a href="PhiSem_Aggregate_Base.html"><span>PhiSem_Aggregate_Base</span></a><span>
  </span><span class="keyword2"><span class="keyword"><span>imports</span></span></span><span> </span><a href="PhiSem_Common_Int.html"><span>PhiSem_Common_Int</span></a><span> </span><a href="PhiSem_Symbol.html"><span>PhiSem_Symbol</span></a><span>
  </span><span class="keyword2"><span class="keyword"><span>keywords</span></span></span><span> </span><span class="quoted"><span>"⦃"</span></span><span> </span><span class="quoted"><span>"⦄"</span></span><span> </span><span class="quoted"><span>"‣"</span></span><span> </span><span class="main"><span>::</span></span><span> quasi_command
  </span><span class="keyword2"><span class="keyword"><span>abbrevs</span></span></span><span> </span><span class="quoted"><span>"|&gt;"</span></span><span>  </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>"‣"</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹The base for aggregate values which have inner structures and whose members can be
  accessed using indexes.›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Semantics›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>debt_axiomatization</span></span></span><span>
        </span><span class="free"><span class="entity_def" id="PhiSem_Aggregate_Base.valid_idx_step|const"><span>valid_idx_step</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.TY|type"><span>TY</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../Phi_System/Phi_Element_Path.html#Phi_Element_Path.aggregate_index|type"><span>aggregate_index</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span>›</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span class="entity_def" id="PhiSem_Aggregate_Base.idx_step_type|const"><span>idx_step_type</span></span></span><span>  </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../Phi_System/Phi_Element_Path.html#Phi_Element_Path.aggregate_index|type"><span>aggregate_index</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.TY|type"><span>TY</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.TY|type"><span>TY</span></a><span>›</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span class="entity_def" id="PhiSem_Aggregate_Base.idx_step_value|const"><span>idx_step_value</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../Phi_System/Phi_Element_Path.html#Phi_Element_Path.aggregate_index|type"><span>aggregate_index</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.VAL|type"><span>VAL</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.VAL|type"><span>VAL</span></a><span>›</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span class="entity_def" id="PhiSem_Aggregate_Base.idx_step_mod_value|const"><span>idx_step_mod_value</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../Phi_System/Phi_Element_Path.html#Phi_Element_Path.aggregate_index|type"><span>aggregate_index</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.VAL|type"><span>VAL</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.VAL|type"><span>VAL</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.VAL|type"><span>VAL</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.VAL|type"><span>VAL</span></a><span>›</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span class="entity_def" id="PhiSem_Aggregate_Base.type_measure|const"><span>type_measure</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.TY|type"><span>TY</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span>›</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="PhiSem_Aggregate_Base.idx_step_value_welltyp|fact"><span class="entity_def" id="PhiSem_Aggregate_Base.idx_step_value_welltyp|thm"><span>idx_step_value_welltyp</span></span></span><span class="main"><span>:</span></span><span>
           </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>valid_idx_step</span></span><span> </span><span class="free"><span>T</span></span><span> </span><span class="free"><span>i</span></span><span>
        </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="free"><span>T</span></span><span>
        </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>idx_step_value</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>idx_step_type</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="free"><span>T</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>   </span><span class="entity_def" id="PhiSem_Aggregate_Base.idx_step_mod_value|fact"><span class="entity_def" id="PhiSem_Aggregate_Base.idx_step_mod_value|thm"><span>idx_step_mod_value</span></span></span><span> </span><span class="main"><span>:</span></span><span>
           </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>valid_idx_step</span></span><span> </span><span class="free"><span>T</span></span><span> </span><span class="free"><span>i</span></span><span>
        </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>valid_idx_step</span></span><span> </span><span class="free"><span>T</span></span><span> </span><span class="free"><span>j</span></span><span>
        </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="free"><span>T</span></span><span>
        </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>idx_step_value</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>idx_step_mod_value</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span>
              </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>idx_step_value</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="free"><span>idx_step_value</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> ›</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>   </span><span class="entity_def" id="PhiSem_Aggregate_Base.idx_step_mod_value_unchanged|fact"><span class="entity_def" id="PhiSem_Aggregate_Base.idx_step_mod_value_unchanged|thm"><span>idx_step_mod_value_unchanged</span></span></span><span> </span><span class="main"><span>:</span></span><span>
          </span><span class="quoted"><span class="quoted"><span>‹ </span><span class="free"><span>valid_idx_step</span></span><span> </span><span class="free"><span>T</span></span><span> </span><span class="free"><span>i</span></span><span>
        </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="free"><span>T</span></span><span>
        </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>idx_step_value</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="free"><span>u</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>idx_step_value</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="free"><span>u</span></span><span>
        </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>idx_step_mod_value</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>u</span></span><span> ›</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>   </span><span class="entity_def" id="PhiSem_Aggregate_Base.idx_step_mod_value_welltyp|fact"><span class="entity_def" id="PhiSem_Aggregate_Base.idx_step_mod_value_welltyp|thm"><span>idx_step_mod_value_welltyp</span></span></span><span class="main"><span>:</span></span><span>
           </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>valid_idx_step</span></span><span> </span><span class="free"><span>T</span></span><span> </span><span class="free"><span>i</span></span><span>
        </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="free"><span>T</span></span><span>
        </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>idx_step_value</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>idx_step_type</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="free"><span>T</span></span><span class="main"><span>)</span></span><span>
        </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>idx_step_mod_value</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="free"><span>T</span></span><span>›</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>   </span><span class="entity_def" id="PhiSem_Aggregate_Base.idx_step_type_measure|fact"><span class="entity_def" id="PhiSem_Aggregate_Base.idx_step_type_measure|thm"><span>idx_step_type_measure</span></span></span><span class="main"><span>:</span></span><span>
           </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>valid_idx_step</span></span><span> </span><span class="free"><span>T</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>type_measure</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>idx_step_type</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="free"><span>T</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>type_measure</span></span><span> </span><span class="free"><span>T</span></span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹We first formalize the behavior of indexing one-step inside one level of the inner structures,
  and upon them indexing of multiple steps is successively playing each step.

  </span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">const</span><span class="hidden">&gt;</span></span></span><span>‹</span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.valid_idx_step|const"><span>valid_idx_step</span></a><span>›</span></span><span> asserts whether an index is valid on the type.
  </span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">const</span><span class="hidden">&gt;</span></span></span><span>‹</span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.idx_step_type|const"><span>idx_step_type</span></a><span>›</span></span><span> steps into the inner type of the given type.
  </span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">const</span><span class="hidden">&gt;</span></span></span><span>‹</span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.idx_step_value|const"><span>idx_step_value</span></a><span>›</span></span><span> gives the inner structure of a given value, and </span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">const</span><span class="hidden">&gt;</span></span></span><span>‹</span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.idx_step_mod_value|const"><span>idx_step_mod_value</span></a><span>›</span></span><span>
    enables to modify the inner structure.
  </span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">const</span><span class="hidden">&gt;</span></span></span><span>‹</span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.type_measure|const"><span>type_measure</span></a><span>›</span></span><span> is a scaffold giving a decreasing measurement when indexing inside,
    such as the size of the term. It helps induction over the indexing. 
›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span class="entity_def" id="PhiSem_Aggregate_Base.index_value|const"><span>index_value</span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.fold|const"><span>fold</span></a><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.idx_step_value|const"><span>idx_step_value</span></a><span>›</span></span></span><span> </span><span class="comment1"><span>(*TODO: rename → get_element_of_value*)</span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span class="entity_def" id="PhiSem_Aggregate_Base.index_type|const"><span>index_type</span></span></span><span>  </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.fold|const"><span>fold</span></a><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.idx_step_type|const"><span>idx_step_type</span></a><span>›</span></span></span><span>  </span><span class="comment1"><span>(* get_element_of_type *)</span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span class="entity_def" id="PhiSem_Aggregate_Base.index_mod_value|const"><span>index_mod_value</span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.foldr|const"><span>foldr</span></a><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.idx_step_mod_value|const"><span>idx_step_mod_value</span></a><span>›</span></span></span><span> </span><span class="comment1"><span>(* modify_value_element *)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="PhiSem_Aggregate_Base.valid_index.simps|fact"><span class="entity_def" id="PhiSem_Aggregate_Base.valid_index_def|fact"><span class="entity_def" id="PhiSem_Aggregate_Base.valid_index.simps(2)|thm"><span class="entity_def" id="PhiSem_Aggregate_Base.valid_index.simps(1)|thm"><span class="entity_def" id="PhiSem_Aggregate_Base.valid_index_def|thm"><span class="entity_def" id="PhiSem_Aggregate_Base.valid_index_def|axiom"><span>primrec</span></span></span></span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="PhiSem_Aggregate_Base.valid_index|const"><span>valid_index</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.TY|type"><span>TY</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../Phi_System/Phi_Element_Path.html#Phi_Element_Path.aggregate_path|type"><span>aggregate_path</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>valid_index</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>T</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.True|const"><span>True</span></a><span>›</span></span></span><span>
      </span><span class="main"><span>|</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>valid_index</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>T</span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Cons|const"><span>#</span></a></span><span class="free"><span class="bound"><span class="entity"><span>idx</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.valid_idx_step|const"><span>valid_idx_step</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>T</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>valid_index</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.idx_step_type|const"><span>idx_step_type</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>T</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>idx</span></span></span></span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>declare</span></span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../Phi_System/USER_HOME/Current/phi-system/Phi_Logic_Programming_Reasoner/library/reasoner.ML.html#PLPR.\&lt;phi&gt;reason_default_pattern|attribute"><span class="operator"><span>φreason_default_pattern</span></span></a><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.valid_index|const"><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.valid_index|const"><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.valid_index|const"><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.valid_index|const"><span>valid_index</span></a></a></a></a><span> </span><span class="var"><span class="var"><span class="var"><span class="var"><span>?T</span></span></span></span></span><span> </span><span class="var"><span class="var"><span class="var"><span class="var"><span>?idx</span></span></span></span></span><span>›</span></span></span></span></span></span><span> </span><span class="main"><span class="main"><span>⇒</span></span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.valid_index|const"><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.valid_index|const"><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.valid_index|const"><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.valid_index|const"><span>valid_index</span></a></a></a></a><span> </span><span class="var"><span class="var"><span class="var"><span class="var"><span>?T</span></span></span></span></span><span> </span><span class="var"><span class="var"><span class="var"><span class="var"><span>?idx</span></span></span></span></span><span>›</span></span></span></span></span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>100</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span class="main"><span>]</span></span><span>

</span><span class="keyword1"><span class="command"><span>φreasoner_group</span></span></span><span> </span><span>chk_sem_ele_idx_all</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>1000</span><span class="main"><span>,</span></span><span> </span><span class="main"><span>[</span></span><span>0</span><span class="main"><span>,</span></span><span> 2000</span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>is_valid_step_idx_of</span></span><span> </span><span class="free"><span>idx</span></span><span> </span><span class="free"><span>T</span></span><span> </span><span class="free"><span>U</span></span><span>›</span></span></span><span class="main"><span>,</span></span><span>
                                                              </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>is_valid_index_of</span></span><span> </span><span class="free"><span>idx</span></span><span> </span><span class="free"><span>T</span></span><span> </span><span class="free"><span>U</span></span><span>›</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="quoted"><span>‹check whether the given element index ‹idx› is valid against semantic type ‹T››</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span>chk_sem_ele_idx</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>1010</span><span class="main"><span>,</span></span><span> </span><span class="main"><span>[</span></span><span>1000</span><span class="main"><span>,</span></span><span>1030</span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><span>chk_sem_ele_idx_all</span><span>
    </span><span class="quoted"><span>‹cutting rules›</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span>chk_sem_ele_idx_fail</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>0</span><span class="main"><span>,</span></span><span> </span><span class="main"><span>[</span></span><span>0</span><span class="main"><span>,</span></span><span>0</span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><span>chk_sem_ele_idx_all</span><span>
    </span><span class="quoted"><span>‹failure›</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Phi_System/USER_HOME/Current/phi-system/Phi_Logic_Programming_Reasoner/library/reasoner.ML.html#PLPR.\&lt;phi&gt;reason|attribute"><span class="operator"><span>φreason</span></span></a><span> </span><span class="main"><span class="main"><span class="main"><span class="main"><span>%</span></span></span></span></span><span>chk_sem_ele_idx</span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.valid_index|const"><span>valid_index</span></a><span> </span><span class="free"><span>T</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="PhiSem_Aggregate_Base.valid_index_tail|fact"><span class="entity_def" id="PhiSem_Aggregate_Base.valid_index_tail|thm"><span>valid_index_tail</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.iff|attribute"><span class="operator"><span>iff</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.valid_index|const"><span>valid_index</span></a><span> </span><span class="free"><span>T</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>idx</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span class="main"><span>[</span></span><span class="free"><span>i</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.valid_index|const"><span>valid_index</span></a><span> </span><span class="free"><span>T</span></span><span> </span><span class="free"><span>idx</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.valid_idx_step|const"><span>valid_idx_step</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.index_type|const"><span>index_type</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="free"><span>T</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>i</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>idx</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>T</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Phi_System/USER_HOME/Current/phi-system/Phi_Logic_Programming_Reasoner/library/reasoner.ML.html#PLPR.\&lt;phi&gt;reason|attribute"><span class="operator"><span>φreason</span></span></a><span> </span><span class="main"><span class="main"><span class="main"><span class="main"><span>%</span></span></span></span></span><span>chk_sem_ele_idx_fail</span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><a class="entity_ref" href="../Phi_System/Phi_Logic_Programming_Reasoner.PLPR_error_msg.html#PLPR_error_msg.FAIL|const"><span>FAIL</span></a><span> </span><span class="keyword1"><span>TEXT(</span></span><span class="inner_cartouche"><span>‹Fail to show the validity of index›</span></span><span> </span><span class="free"><span>idx</span></span><span> </span><span class="inner_cartouche"><span>‹on type›</span></span><span> </span><span class="free"><span>T</span></span><span class="main"><span>)</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.valid_index|const"><span>valid_index</span></a><span> </span><span class="free"><span>T</span></span><span> </span><span class="free"><span>idx</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../Phi_System/Phi_Logic_Programming_Reasoner.PLPR_error_msg.html#PLPR_error_msg.FAIL_def|fact"><span>FAIL_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="PhiSem_Aggregate_Base.valid_index_cat|fact"><span class="entity_def" id="PhiSem_Aggregate_Base.valid_index_cat|thm"><span>valid_index_cat</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.valid_index|const"><span>valid_index</span></a><span> </span><span class="free"><span>T</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>a</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.valid_index|const"><span>valid_index</span></a><span> </span><span class="free"><span>T</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.valid_index|const"><span>valid_index</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.index_type|const"><span>index_type</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>T</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>a</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>T</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="PhiSem_Aggregate_Base.valid_index_cons|fact"><span class="entity_def" id="PhiSem_Aggregate_Base.valid_index_cons|thm"><span>valid_index_cons</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.valid_index|const"><span>valid_index</span></a><span> </span><span class="free"><span>T</span></span><span> </span><span class="main"><span>[</span></span><span class="free"><span>i</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.valid_idx_step|const"><span>valid_idx_step</span></a><span> </span><span class="free"><span>T</span></span><span> </span><span class="free"><span>i</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="PhiSem_Aggregate_Base.index_value_welltyp|fact"><span class="entity_def" id="PhiSem_Aggregate_Base.index_value_welltyp|thm"><span>index_value_welltyp</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.valid_index|const"><span>valid_index</span></a><span> </span><span class="free"><span>T</span></span><span> </span><span class="free"><span>idx</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="free"><span>T</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.index_value|const"><span>index_value</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.index_type|const"><span>index_type</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="free"><span>T</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>idx</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>v</span></span></span><span> </span><span class="quoted"><span class="free"><span>T</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.idx_step_value_welltyp|fact"><span>idx_step_value_welltyp</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="PhiSem_Aggregate_Base.index_type_measure|fact"><span class="entity_def" id="PhiSem_Aggregate_Base.index_type_measure|thm"><span>index_type_measure</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.valid_index|const"><span>valid_index</span></a><span> </span><span class="free"><span>T</span></span><span> </span><span class="free"><span>idx</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>idx</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.type_measure|const"><span>type_measure</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.index_type|const"><span>index_type</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="free"><span>T</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.type_measure|const"><span>type_measure</span></a><span> </span><span class="free"><span>T</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>idx</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>T</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.dual_order.strict_trans|fact"><span>dual_order.strict_trans</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.fold_simps|fact"><span>fold_simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.idx_step_type_measure|fact"><span>idx_step_type_measure</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="PhiSem_Aggregate_Base.index_type_neq|fact"><span class="entity_def" id="PhiSem_Aggregate_Base.index_type_neq|thm"><span>index_type_neq</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.valid_index|const"><span>valid_index</span></a><span> </span><span class="free"><span>T</span></span><span> </span><span class="free"><span>idx</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>idx</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.index_type|const"><span>index_type</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="free"><span>T</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="free"><span>T</span></span><span> ›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.index_type_measure|fact"><span>index_type_measure</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="PhiSem_Aggregate_Base.index_mod_value_welltyp|fact"><span class="entity_def" id="PhiSem_Aggregate_Base.index_mod_value_welltyp|thm"><span>index_mod_value_welltyp</span></span></span><span class="main"><span>:</span></span><span>
   </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.valid_index|const"><span>valid_index</span></a><span> </span><span class="free"><span>T</span></span><span> </span><span class="free"><span>idx</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="free"><span>T</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.index_value|const"><span>index_value</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.index_type|const"><span>index_type</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="free"><span>T</span></span><span class="main"><span>)</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.index_mod_value|const"><span>index_mod_value</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="free"><span>T</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>idx</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>T</span></span></span><span> </span><span class="quoted"><span class="free"><span>v</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.idx_step_mod_value_welltyp|fact"><span>idx_step_mod_value_welltyp</span></a><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.idx_step_value_welltyp|fact"><span>idx_step_value_welltyp</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="PhiSem_Aggregate_Base.index_type_idem|fact"><span class="entity_def" id="PhiSem_Aggregate_Base.index_type_idem|thm"><span>index_type_idem</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.valid_index|const"><span>valid_index</span></a><span> </span><span class="free"><span>T</span></span><span> </span><span class="free"><span>idx</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.index_type|const"><span>index_type</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="free"><span>T</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>T</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>idx</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="free"><span>idx</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.index_type_measure|fact"><span>index_type_measure</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.fold_simps|fact"><span>fold_simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.discI|fact"><span>list.discI</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.order_less_irrefl|fact"><span>order_less_irrefl</span></a><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.valid_index.simps|fact"><span>valid_index.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="PhiSem_Aggregate_Base.index_mod_value_unchanged|fact"><span class="entity_def" id="PhiSem_Aggregate_Base.index_mod_value_unchanged|thm"><span>index_mod_value_unchanged</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.valid_index|const"><span>valid_index</span></a><span> </span><span class="free"><span>T</span></span><span> </span><span class="free"><span>idx</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="free"><span>T</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.index_value|const"><span>index_value</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="free"><span>u</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.index_value|const"><span>index_value</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="free"><span>u</span></span><span class="main"><span>)</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.index_mod_value|const"><span>index_mod_value</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>u</span></span><span> ›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>idx</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>T</span></span></span><span> </span><span class="quoted"><span class="free"><span>u</span></span></span><span> </span><span class="quoted"><span class="free"><span>f</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.idx_step_mod_value_unchanged|fact"><span>idx_step_mod_value_unchanged</span></a><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.idx_step_value_welltyp|fact"><span>idx_step_value_welltyp</span></a><span class="main"><span>)</span></span><span>
  

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Semantics of aggregate path›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="PhiSem_Aggregate_Base.AgIdx_VN_def|fact"><span class="entity_def" id="PhiSem_Aggregate_Base.AgIdx_VN_def|thm"><span class="entity_def" id="PhiSem_Aggregate_Base.AgIdx_VN_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span class="entity_def" id="PhiSem_Aggregate_Base.AgIdx_VN|const"><span>AgIdx_VN</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../Phi_System/Phi_Element_Path.html#Phi_Element_Path.aggregate_index&apos;.AgIdx_N|const"><span>AgIdx_N</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.the|const"><span>the</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="PhiSem_Common_Int.html#PhiSem_Common_Int.\&lt;phi&gt;Sem_int_to_logic_nat|const"><span>φSem_int_to_logic_nat</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.\&lt;phi&gt;arg.dest|const"><span>φarg.dest</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Reasoning Rules›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>paragraph</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Syntactical Check of Semantics Validity of Aggregate Path›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Phi_System/USER_HOME/Current/phi-system/Phi_Logic_Programming_Reasoner/library/reasoner.ML.html#PLPR.\&lt;phi&gt;reason|attribute"><span class="operator"><span>φreason</span></span></a><span> 1000</span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../Phi_System/IDE_CP_Reasoning3.html#IDE_CP_Reasoning3.chk_semantics_validity|const"><span>chk_semantics_validity</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span class="main"><span>::</span></span><a class="entity_ref" href="../Phi_System/Phi_Element_Path.html#Phi_Element_Path.aggregate_path|type"><span>aggregate_path</span></a><span class="main"><span>)</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../Phi_System/IDE_CP_Reasoning3.html#IDE_CP_Reasoning3.chk_semantics_validity_def|fact"><span>chk_semantics_validity_def</span></a><span> </span><span class="keyword1"><span class="command"><span>..</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Phi_System/USER_HOME/Current/phi-system/Phi_Logic_Programming_Reasoner/library/reasoner.ML.html#PLPR.\&lt;phi&gt;reason|attribute"><span class="operator"><span>φreason</span></span></a><span> 1000</span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><a class="entity_ref" href="../Phi_System/IDE_CP_Reasoning3.html#IDE_CP_Reasoning3.chk_semantics_validity|const"><span>chk_semantics_validity</span></a><span> </span><span class="main"><span>[</span></span><span class="free"><span>X</span></span><span class="main"><span>]</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="../Phi_System/IDE_CP_Reasoning3.html#IDE_CP_Reasoning3.chk_semantics_validity|const"><span>chk_semantics_validity</span></a><span> </span><span class="free"><span>R</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="../Phi_System/IDE_CP_Reasoning3.html#IDE_CP_Reasoning3.chk_semantics_validity|const"><span>chk_semantics_validity</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>X</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Cons|const"><span>#</span></a></span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><a class="entity_ref" href="../Phi_System/Phi_Element_Path.html#Phi_Element_Path.aggregate_path|type"><span>aggregate_path</span></a></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../Phi_System/IDE_CP_Reasoning3.html#IDE_CP_Reasoning3.chk_semantics_validity_def|fact"><span>chk_semantics_validity_def</span></a><span> </span><span class="keyword1"><span class="command"><span>..</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Phi_System/USER_HOME/Current/phi-system/Phi_Logic_Programming_Reasoner/library/reasoner.ML.html#PLPR.\&lt;phi&gt;reason|attribute"><span class="operator"><span>φreason</span></span></a><span> 1020</span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../Phi_System/IDE_CP_Reasoning3.html#IDE_CP_Reasoning3.chk_semantics_validity|const"><span>chk_semantics_validity</span></a><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.AgIdx_VN|const"><span>AgIdx_VN</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>]</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../Phi_System/IDE_CP_Reasoning3.html#IDE_CP_Reasoning3.chk_semantics_validity_def|fact"><span>chk_semantics_validity_def</span></a><span> </span><span class="keyword1"><span class="command"><span>..</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Phi_System/USER_HOME/Current/phi-system/Phi_Logic_Programming_Reasoner/library/reasoner.ML.html#PLPR.\&lt;phi&gt;reason|attribute"><span class="operator"><span>φreason</span></span></a><span> 1020</span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../Phi_System/IDE_CP_Reasoning3.html#IDE_CP_Reasoning3.chk_semantics_validity|const"><span>chk_semantics_validity</span></a><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Phi_System/Phi_Element_Path.html#Phi_Element_Path.aggregate_index&apos;.AgIdx_S|const"><span>AgIdx_S</span></a><span> </span><span class="free"><span>s</span></span><span class="main"><span>]</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../Phi_System/IDE_CP_Reasoning3.html#IDE_CP_Reasoning3.chk_semantics_validity_def|fact"><span>chk_semantics_validity_def</span></a><span> </span><span class="keyword1"><span class="command"><span>..</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Phi_System/USER_HOME/Current/phi-system/Phi_Logic_Programming_Reasoner/library/reasoner.ML.html#PLPR.\&lt;phi&gt;reason|attribute"><span class="operator"><span>φreason</span></span></a><span> 1020</span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><a class="entity_ref" href="../Phi_System/Phi_Logic_Programming_Reasoner.PLPR.html#PLPR.Is_Literal|const"><span>Is_Literal</span></a><span> </span><span class="free"><span>n</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="../Phi_System/IDE_CP_Reasoning3.html#IDE_CP_Reasoning3.chk_semantics_validity|const"><span>chk_semantics_validity</span></a><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Phi_System/Phi_Element_Path.html#Phi_Element_Path.aggregate_index&apos;.AgIdx_N|const"><span>AgIdx_N</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>]</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../Phi_System/IDE_CP_Reasoning3.html#IDE_CP_Reasoning3.chk_semantics_validity_def|fact"><span>chk_semantics_validity_def</span></a><span> </span><span class="keyword1"><span class="command"><span>..</span></span></span><span>



</span><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Instructions›</span></span></span><span>

</span><span class="comment1"><span>(* definition op_cons_tuple :: "'TY list ⇒ (VAL list) proc'"
  where "op_cons_tuple tys = (λ(vs,res).
    let N = length tys in
    if N ≤ length vs ∧ list_all2 (λv t. v ∈ Well_Type t) (take N vs) tys
    then Success (sem_mk_tup (take N vs) # drop N vs, res)
    else Fail)" *)</span></span><span>


</span><span class="keyword1"><span class="command"><span class="entity_def" id="PhiSem_Aggregate_Base.op_get_aggregate_def|fact"><span class="entity_def" id="PhiSem_Aggregate_Base.op_get_aggregate_def|thm"><span class="entity_def" id="PhiSem_Aggregate_Base.op_get_aggregate_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="PhiSem_Aggregate_Base.op_get_aggregate|const"><span>op_get_aggregate</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Phi_System/Phi_Element_Path.html#Phi_Element_Path.aggregate_path|type"><span>aggregate_path</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.TY|type"><span>TY</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.VAL|type"><span>VAL</span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.VAL|type"><span>VAL</span></a><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.proc&apos;|type"><span>proc'</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>op_get_aggregate</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>idx</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>T</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span>
    </span><a class="entity_ref" href="../Phi_System/PhiSem_Formalization_Tools.html#PhiSem_Formalization_Tools.\&lt;phi&gt;M_getV|const"><span>φM_getV</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>T</span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id|const"><span>id</span></a><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>v'</span></span><span class="main"><span>.</span></span><span>
    </span><a class="entity_ref" href="../Phi_System/PhiSem_Formalization_Tools.html#PhiSem_Formalization_Tools.\&lt;phi&gt;M_assert|const"><span>φM_assert</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.valid_index|const"><span>valid_index</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>T</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>idx</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⪢</span></span><span>
    </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Return|const"><span>Return</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.\&lt;phi&gt;arg.\&lt;phi&gt;arg|const"><span>φarg</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.index_value|const"><span>index_value</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>idx</span></span></span></span><span> </span><span class="bound"><span>v'</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
</span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>debt_axiomatization</span></span></span><span> </span><span class="free"><span class="entity_def" id="PhiSem_Aggregate_Base.allow_assigning_different_typ|const"><span>allow_assigning_different_typ</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.TY|type"><span>TY</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../Phi_System/Phi_Element_Path.html#Phi_Element_Path.aggregate_path|type"><span>aggregate_path</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="PhiSem_Aggregate_Base.op_set_aggregate_def|fact"><span class="entity_def" id="PhiSem_Aggregate_Base.op_set_aggregate_def|thm"><span class="entity_def" id="PhiSem_Aggregate_Base.op_set_aggregate_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="PhiSem_Aggregate_Base.op_set_aggregate|const"><span>op_set_aggregate</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.TY|type"><span>TY</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.TY|type"><span>TY</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../Phi_System/Phi_Element_Path.html#Phi_Element_Path.aggregate_path|type"><span>aggregate_path</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.VAL|type"><span>VAL</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>×</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.VAL|type"><span>VAL</span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.VAL|type"><span>VAL</span></a><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.proc&apos;|type"><span>proc'</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>op_set_aggregate</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>Tt</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>Tv</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>idx</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> 
    </span><a class="entity_ref" href="../Phi_System/PhiSem_Formalization_Tools.html#PhiSem_Formalization_Tools.\&lt;phi&gt;M_caseV|const"><span>φM_caseV</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>tup</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span>
    </span><a class="entity_ref" href="../Phi_System/PhiSem_Formalization_Tools.html#PhiSem_Formalization_Tools.\&lt;phi&gt;M_assert|const"><span>φM_assert</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.valid_index|const"><span>valid_index</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>Tt</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>idx</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.index_type|const"><span>index_type</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>idx</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>Tt</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>Tv</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.allow_assigning_different_typ|const"><span>allow_assigning_different_typ</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>Tt</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>idx</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⪢</span></span><span>
    </span><a class="entity_ref" href="../Phi_System/PhiSem_Formalization_Tools.html#PhiSem_Formalization_Tools.\&lt;phi&gt;M_getV|const"><span>φM_getV</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>Tt</span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id|const"><span>id</span></a><span> </span><span class="bound"><span>tup</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>tup'</span></span><span class="main"><span>.</span></span><span>
    </span><a class="entity_ref" href="../Phi_System/PhiSem_Formalization_Tools.html#PhiSem_Formalization_Tools.\&lt;phi&gt;M_getV|const"><span>φM_getV</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>Tv</span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id|const"><span>id</span></a><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>v'</span></span><span class="main"><span>.</span></span><span>
    </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Return|const"><span>Return</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.\&lt;phi&gt;arg.\&lt;phi&gt;arg|const"><span>φarg</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.index_mod_value|const"><span>index_mod_value</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>idx</span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>v'</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>tup'</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
</span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>


</span><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Reasoning›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹All the reasoning rules below are for semantic properties.
      All reasoning rules for transformations and SL are derived automatically›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Index Validation›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="PhiSem_Aggregate_Base.is_valid_step_idx_of_def|fact"><span class="entity_def" id="PhiSem_Aggregate_Base.is_valid_step_idx_of_def|thm"><span class="entity_def" id="PhiSem_Aggregate_Base.is_valid_step_idx_of_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span class="entity_def" id="PhiSem_Aggregate_Base.is_valid_step_idx_of|const"><span>is_valid_step_idx_of</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>idx</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>T</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>U</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.valid_idx_step|const"><span>valid_idx_step</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>T</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>idx</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>U</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.idx_step_type|const"><span>idx_step_type</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>idx</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>T</span></span></span></span><span>›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="PhiSem_Aggregate_Base.is_valid_index_of_def|fact"><span class="entity_def" id="PhiSem_Aggregate_Base.is_valid_index_of_def|thm"><span class="entity_def" id="PhiSem_Aggregate_Base.is_valid_index_of_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span class="entity_def" id="PhiSem_Aggregate_Base.is_valid_index_of|const"><span>is_valid_index_of</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>idx</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>T</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>U</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.valid_index|const"><span>valid_index</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>T</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>idx</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>U</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.index_type|const"><span>index_type</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>idx</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>T</span></span></span></span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>declare</span></span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>[</span></span><span>
  </span><a class="entity_ref" href="../Phi_System/USER_HOME/Current/phi-system/Phi_Logic_Programming_Reasoner/library/reasoner.ML.html#PLPR.\&lt;phi&gt;reason_default_pattern|attribute"><span class="operator"><span>φreason_default_pattern</span></span></a><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.is_valid_index_of|const"><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.is_valid_index_of|const"><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.is_valid_index_of|const"><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.is_valid_index_of|const"><span>is_valid_index_of</span></a></a></a></a><span> </span><span class="var"><span class="var"><span class="var"><span class="var"><span>?idx</span></span></span></span></span><span> </span><span class="var"><span class="var"><span class="var"><span class="var"><span>?T</span></span></span></span></span><span> </span><span class="main"><span class="main"><span class="main"><span class="main"><span>_</span></span></span></span></span><span>›</span></span></span></span></span></span><span> </span><span class="main"><span class="main"><span>⇒</span></span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.is_valid_index_of|const"><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.is_valid_index_of|const"><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.is_valid_index_of|const"><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.is_valid_index_of|const"><span>is_valid_index_of</span></a></a></a></a><span> </span><span class="var"><span class="var"><span class="var"><span class="var"><span>?idx</span></span></span></span></span><span> </span><span class="var"><span class="var"><span class="var"><span class="var"><span>?T</span></span></span></span></span><span> </span><span class="main"><span class="main"><span class="main"><span class="main"><span>_</span></span></span></span></span><span>›</span></span></span></span></span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>100</span><span class="main"><span class="main"><span>)</span></span></span><span>
                      </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>and</span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.is_valid_step_idx_of|const"><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.is_valid_step_idx_of|const"><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.is_valid_step_idx_of|const"><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.is_valid_step_idx_of|const"><span>is_valid_step_idx_of</span></a></a></a></a><span> </span><span class="var"><span class="var"><span class="var"><span class="var"><span>?idx</span></span></span></span></span><span> </span><span class="var"><span class="var"><span class="var"><span class="var"><span>?T</span></span></span></span></span><span> </span><span class="main"><span class="main"><span class="main"><span class="main"><span>_</span></span></span></span></span><span> ›</span></span></span></span></span></span><span> </span><span class="main"><span class="main"><span>⇒</span></span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.is_valid_step_idx_of|const"><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.is_valid_step_idx_of|const"><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.is_valid_step_idx_of|const"><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.is_valid_step_idx_of|const"><span>is_valid_step_idx_of</span></a></a></a></a><span> </span><span class="var"><span class="var"><span class="var"><span class="var"><span>?idx</span></span></span></span></span><span> </span><span class="var"><span class="var"><span class="var"><span class="var"><span>?T</span></span></span></span></span><span> </span><span class="main"><span class="main"><span class="main"><span class="main"><span>_</span></span></span></span></span><span> ›</span></span></span></span></span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>100</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>,</span></span><span>
  </span><a class="entity_ref" href="../Phi_System/USER_HOME/Current/phi-system/Phi_System/library/system/premise_attribute.ML.html#Phi_Preliminary.\&lt;phi&gt;premise_attribute|attribute"><span class="operator"><span>φpremise_attribute</span></span></a><span> </span><span class="quasi_keyword"><span>once</span></span><span class="main"><span class="main"><span>?</span></span></span><span> </span><span class="main"><span class="main"><span>[</span></span></span><a class="entity_ref" href="../Phi_System/USER_HOME/Current/phi-system/Phi_Logic_Programming_Reasoner/library/reasoner.ML.html#PLPR.\&lt;phi&gt;reason|attribute"><span class="operator"><span>φreason</span></span></a><span class="main"><span>?</span></span><span> </span><span class="main"><span>%</span></span><span>local</span><span class="main"><span class="main"><span>]</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>for</span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.is_valid_index_of|const"><span>is_valid_index_of</span></a><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>_</span></span><span>›</span></span></span><span>     </span><span class="main"><span class="main"><span>(</span></span></span><span class="main"><span class="main"><span>%</span></span></span><span>φattr</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>,</span></span><span>
  </span><a class="entity_ref" href="../Phi_System/USER_HOME/Current/phi-system/Phi_System/library/system/premise_attribute.ML.html#Phi_Preliminary.\&lt;phi&gt;premise_attribute|attribute"><span class="operator"><span>φpremise_attribute</span></span></a><span> </span><span class="quasi_keyword"><span>once</span></span><span class="main"><span class="main"><span>?</span></span></span><span> </span><span class="main"><span class="main"><span>[</span></span></span><a class="entity_ref" href="../Phi_System/USER_HOME/Current/phi-system/Phi_Logic_Programming_Reasoner/library/reasoner.ML.html#PLPR.\&lt;phi&gt;reason|attribute"><span class="operator"><span>φreason</span></span></a><span class="main"><span>?</span></span><span> </span><span class="main"><span>%</span></span><span>local</span><span class="main"><span class="main"><span>]</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>for</span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.is_valid_step_idx_of|const"><span>is_valid_step_idx_of</span></a><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>_</span></span><span>›</span></span></span><span>  </span><span class="main"><span class="main"><span>(</span></span></span><span class="main"><span class="main"><span>%</span></span></span><span>φattr</span><span class="main"><span class="main"><span>)</span></span></span><span>
</span><span class="main"><span>]</span></span><span class="main"><span>]</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="PhiSem_Aggregate_Base.is_valid_index_of_Nil|fact"><span class="entity_def" id="PhiSem_Aggregate_Base.is_valid_index_of_Nil|thm"><span>is_valid_index_of_Nil</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.is_valid_index_of|const"><span>is_valid_index_of</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span> </span><span class="free"><span>TY</span></span><span> </span><span class="free"><span>TY'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>TY</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>TY'</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.is_valid_index_of_def|fact"><span>is_valid_index_of_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Phi_System/USER_HOME/Current/phi-system/Phi_Logic_Programming_Reasoner/library/reasoner.ML.html#PLPR.\&lt;phi&gt;reason|attribute"><span class="operator"><span>φreason</span></span></a><span> </span><span class="main"><span class="main"><span class="main"><span class="main"><span>%</span></span></span></span></span><span>chk_sem_ele_idx</span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.is_valid_index_of|const"><span>is_valid_index_of</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="free"><span>T</span></span><span> </span><span class="free"><span>U</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.valid_index|const"><span>valid_index</span></a><span> </span><span class="free"><span>T</span></span><span> </span><span class="free"><span>idx</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.is_valid_index_of_def|fact"><span>is_valid_index_of_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Phi_System/USER_HOME/Current/phi-system/Phi_Logic_Programming_Reasoner/library/reasoner.ML.html#PLPR.\&lt;phi&gt;reason|attribute"><span class="operator"><span>φreason</span></span></a><span> </span><span class="main"><span class="main"><span class="main"><span class="main"><span>%</span></span></span></span></span><span>chk_sem_ele_idx</span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.is_valid_index_of|const"><span>is_valid_index_of</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span> </span><span class="free"><span>T</span></span><span> </span><span class="free"><span>T</span></span><span> ›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.is_valid_index_of_def|fact"><span>is_valid_index_of_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Phi_System/USER_HOME/Current/phi-system/Phi_Logic_Programming_Reasoner/library/reasoner.ML.html#PLPR.\&lt;phi&gt;reason|attribute"><span class="operator"><span>φreason</span></span></a><span> </span><span class="main"><span class="main"><span class="main"><span class="main"><span>%</span></span></span></span></span><span>chk_sem_ele_idx</span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.is_valid_step_idx_of|const"><span>is_valid_step_idx_of</span></a><span> </span><span class="free"><span>i</span></span><span> </span><span class="free"><span>T</span></span><span> </span><span class="free"><span>W</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.is_valid_index_of|const"><span>is_valid_index_of</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="free"><span>W</span></span><span> </span><span class="free"><span>U</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.is_valid_index_of|const"><span>is_valid_index_of</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Cons|const"><span>#</span></a></span><span> </span><span class="free"><span>idx</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>T</span></span><span> </span><span class="free"><span>U</span></span><span> ›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.is_valid_index_of_def|fact"><span>is_valid_index_of_def</span></a><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.is_valid_step_idx_of_def|fact"><span>is_valid_step_idx_of_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹parse_ele_idx›</span></span></span><span> </span><span class="comment1"><span>― ‹Parse Element Index Input by Semantic Type›</span></span><span>

</span><span class="keyword1"><span class="command"><span>consts</span></span></span><span> </span><span class="entity_def" id="PhiSem_Aggregate_Base.\&lt;A&gt;parse_eleidx|const"><span>𝒜parse_eleidx</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><a class="entity_ref" href="../Phi_System/Phi_Logic_Programming_Reasoner.PLPR.html#PLPR.action|type"><span>action</span></a></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="PhiSem_Aggregate_Base.parse_eleidx_input_def|fact"><span class="entity_def" id="PhiSem_Aggregate_Base.parse_eleidx_input_def|thm"><span class="entity_def" id="PhiSem_Aggregate_Base.parse_eleidx_input_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span class="entity_def" id="PhiSem_Aggregate_Base.parse_eleidx_input|const"><span>parse_eleidx_input</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>TY</span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>input</span></span></span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../Phi_System/IDE_CP_Core.html#IDE_CP_Core.element_index_input|type"><span>element_index_input</span></a><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>semantic_idx</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>spec_idx</span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>reject</span></span></span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../Phi_System/IDE_CP_Core.html#IDE_CP_Core.element_index_input|type"><span>element_index_input</span></a><span class="main"><span>)</span></span><span>
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.valid_index|const"><span>valid_index</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>TY</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>spec_idx</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>semantic_idx</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>spec_idx</span></span></span></span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="PhiSem_Aggregate_Base.parse_eleidx_input_least1_def|fact"><span class="entity_def" id="PhiSem_Aggregate_Base.parse_eleidx_input_least1_def|thm"><span class="entity_def" id="PhiSem_Aggregate_Base.parse_eleidx_input_least1_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span class="entity_def" id="PhiSem_Aggregate_Base.parse_eleidx_input_least1|const"><span>parse_eleidx_input_least1</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>TY</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>input</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>sem_idx</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>spec_idx</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>reject</span></span></span></span><span>
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.parse_eleidx_input|const"><span>parse_eleidx_input</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>TY</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>input</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>sem_idx</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>spec_idx</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>reject</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span>
        </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>input</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>spec_idx</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span class="main"><span>)</span></span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>declare</span></span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>[</span></span><span>
  </span><a class="entity_ref" href="../Phi_System/USER_HOME/Current/phi-system/Phi_Logic_Programming_Reasoner/library/reasoner.ML.html#PLPR.\&lt;phi&gt;reason_default_pattern|attribute"><span class="operator"><span>φreason_default_pattern</span></span></a><span>
      </span><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.parse_eleidx_input|const"><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.parse_eleidx_input|const"><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.parse_eleidx_input|const"><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.parse_eleidx_input|const"><span>parse_eleidx_input</span></a></a></a></a><span> </span><span class="var"><span class="var"><span class="var"><span class="var"><span>?TY</span></span></span></span></span><span> </span><span class="var"><span class="var"><span class="var"><span class="var"><span>?input</span></span></span></span></span><span> </span><span class="main"><span class="main"><span class="main"><span class="main"><span>_</span></span></span></span></span><span> </span><span class="main"><span class="main"><span class="main"><span class="main"><span>_</span></span></span></span></span><span> </span><span class="main"><span class="main"><span class="main"><span class="main"><span>_</span></span></span></span></span><span> ›</span></span></span></span></span></span><span> </span><span class="main"><span class="main"><span>⇒</span></span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.parse_eleidx_input|const"><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.parse_eleidx_input|const"><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.parse_eleidx_input|const"><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.parse_eleidx_input|const"><span>parse_eleidx_input</span></a></a></a></a><span> </span><span class="var"><span class="var"><span class="var"><span class="var"><span>?TY</span></span></span></span></span><span> </span><span class="var"><span class="var"><span class="var"><span class="var"><span>?input</span></span></span></span></span><span> </span><span class="main"><span class="main"><span class="main"><span class="main"><span>_</span></span></span></span></span><span> </span><span class="main"><span class="main"><span class="main"><span class="main"><span>_</span></span></span></span></span><span> </span><span class="main"><span class="main"><span class="main"><span class="main"><span>_</span></span></span></span></span><span> ›</span></span></span></span></span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>100</span><span class="main"><span class="main"><span>)</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>and</span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.parse_eleidx_input_least1|const"><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.parse_eleidx_input_least1|const"><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.parse_eleidx_input_least1|const"><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.parse_eleidx_input_least1|const"><span>parse_eleidx_input_least1</span></a></a></a></a><span> </span><span class="var"><span class="var"><span class="var"><span class="var"><span>?TY</span></span></span></span></span><span> </span><span class="var"><span class="var"><span class="var"><span class="var"><span>?input</span></span></span></span></span><span> </span><span class="main"><span class="main"><span class="main"><span class="main"><span>_</span></span></span></span></span><span> </span><span class="main"><span class="main"><span class="main"><span class="main"><span>_</span></span></span></span></span><span> </span><span class="main"><span class="main"><span class="main"><span class="main"><span>_</span></span></span></span></span><span> ›</span></span></span></span></span></span><span> </span><span class="main"><span class="main"><span>⇒</span></span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.parse_eleidx_input_least1|const"><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.parse_eleidx_input_least1|const"><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.parse_eleidx_input_least1|const"><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.parse_eleidx_input_least1|const"><span>parse_eleidx_input_least1</span></a></a></a></a><span> </span><span class="var"><span class="var"><span class="var"><span class="var"><span>?TY</span></span></span></span></span><span> </span><span class="var"><span class="var"><span class="var"><span class="var"><span>?input</span></span></span></span></span><span> </span><span class="main"><span class="main"><span class="main"><span class="main"><span>_</span></span></span></span></span><span> </span><span class="main"><span class="main"><span class="main"><span class="main"><span>_</span></span></span></span></span><span> </span><span class="main"><span class="main"><span class="main"><span class="main"><span>_</span></span></span></span></span><span> ›</span></span></span></span></span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>100</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>,</span></span><span>

  </span><a class="entity_ref" href="../Phi_System/USER_HOME/Current/phi-system/Phi_System/library/system/premise_attribute.ML.html#Phi_Preliminary.\&lt;phi&gt;premise_attribute|attribute"><span class="operator"><span>φpremise_attribute</span></span></a><span> </span><span class="quasi_keyword"><span>once</span></span><span class="main"><span class="main"><span>?</span></span></span><span> </span><span class="main"><span class="main"><span>[</span></span></span><a class="entity_ref" href="../Phi_System/USER_HOME/Current/phi-system/Phi_Logic_Programming_Reasoner/library/reasoner.ML.html#PLPR.\&lt;phi&gt;reason|attribute"><span class="operator"><span>φreason</span></span></a><span class="main"><span>?</span></span><span> </span><span class="main"><span>%</span></span><span>local</span><span class="main"><span class="main"><span>]</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>for</span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.parse_eleidx_input|const"><span>parse_eleidx_input</span></a><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>_</span></span><span>›</span></span></span><span>         </span><span class="main"><span class="main"><span>(</span></span></span><span class="main"><span class="main"><span>%</span></span></span><span>φattr</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>,</span></span><span>
  </span><a class="entity_ref" href="../Phi_System/USER_HOME/Current/phi-system/Phi_System/library/system/premise_attribute.ML.html#Phi_Preliminary.\&lt;phi&gt;premise_attribute|attribute"><span class="operator"><span>φpremise_attribute</span></span></a><span> </span><span class="quasi_keyword"><span>once</span></span><span class="main"><span class="main"><span>?</span></span></span><span> </span><span class="main"><span class="main"><span>[</span></span></span><a class="entity_ref" href="../Phi_System/USER_HOME/Current/phi-system/Phi_Logic_Programming_Reasoner/library/reasoner.ML.html#PLPR.\&lt;phi&gt;reason|attribute"><span class="operator"><span>φreason</span></span></a><span class="main"><span>?</span></span><span> </span><span class="main"><span>%</span></span><span>local</span><span class="main"><span class="main"><span>]</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>for</span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.parse_eleidx_input_least1|const"><span>parse_eleidx_input_least1</span></a><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>_</span></span><span>›</span></span></span><span>  </span><span class="main"><span class="main"><span>(</span></span></span><span class="main"><span class="main"><span>%</span></span></span><span>φattr</span><span class="main"><span class="main"><span>)</span></span></span><span>
</span><span class="main"><span>]</span></span><span class="main"><span>]</span></span><span>

</span><span class="keyword1"><span class="command"><span>φreasoner_group</span></span></span><span> </span><span>𝒜parse_eleidx</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>1000</span><span class="main"><span>,</span></span><span> </span><span class="main"><span>[</span></span><span>1000</span><span class="main"><span>,</span></span><span>1000</span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.\&lt;phi&gt;arg.dest|const"><span>φarg.dest</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.Satisfaction|const"><span>⊨</span></a></span><span> </span><span class="free"><span>S</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_System/Phi_Logic_Programming_Reasoner.PLPR.html#PLPR.Action_Tag|const"><span>@tag</span></a></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.\&lt;A&gt;parse_eleidx|const"><span>𝒜parse_eleidx</span></a><span>›</span></span></span><span>
      </span><span class="quoted"><span>‹rules giving abstract specifiction of the values of an element index›</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span>parse_eleidx_input_all</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>1000</span><span class="main"><span>,</span></span><span> </span><span class="main"><span>[</span></span><span>1</span><span class="main"><span>,</span></span><span> 2000</span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.parse_eleidx_input|const"><span>parse_eleidx_input</span></a><span> </span><span class="free"><span>TY</span></span><span> </span><span class="free"><span>input</span></span><span> </span><span class="free"><span>semantic_idx</span></span><span> </span><span class="free"><span>spec_idx</span></span><span> </span><span class="free"><span>reject</span></span><span>›</span></span></span><span>
      </span><span class="quoted"><span>‹reasoning parsing source of element index›</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span>parse_eleidx_input_success</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>2000</span><span class="main"><span>,</span></span><span> </span><span class="main"><span>[</span></span><span>2000</span><span class="main"><span>,</span></span><span> 2000</span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><span>parse_eleidx_input_all</span><span>
      </span><span class="quoted"><span>‹direct success›</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span>parse_eleidx_literal_symbol</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>1700</span><span class="main"><span>,</span></span><span> </span><span class="main"><span>[</span></span><span>1700</span><span class="main"><span>,</span></span><span> 1700</span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><span>parse_eleidx_input_all</span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>parse_eleidx_input_success</span><span>
      </span><span class="quoted"><span>‹literal index›</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span>parse_eleidx_literal_number</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>1600</span><span class="main"><span>,</span></span><span> </span><span class="main"><span>[</span></span><span>1600</span><span class="main"><span>,</span></span><span> 1600</span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><span>parse_eleidx_input_all</span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>parse_eleidx_literal_symbol</span><span>
      </span><span class="quoted"><span>‹literal number›</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span>parse_eleidx_input</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>1000</span><span class="main"><span>,</span></span><span> </span><span class="main"><span>[</span></span><span>1000</span><span class="main"><span>,</span></span><span> 1200</span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><span>parse_eleidx_input_all</span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>parse_eleidx_literal_number</span><span>
      </span><span class="quoted"><span>‹usual rules›</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span>parse_eleidx_number</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>700</span><span class="main"><span>,</span></span><span> </span><span class="main"><span>[</span></span><span>700</span><span class="main"><span>,</span></span><span>899</span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><span>parse_eleidx_input_all</span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>parse_eleidx_input</span><span> </span><span class="quoted"><span>‹›</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span>parse_eleidx_val</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>500</span><span class="main"><span>,</span></span><span> </span><span class="main"><span>[</span></span><span>500</span><span class="main"><span>,</span></span><span>699</span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><span>parse_eleidx_input_all</span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>parse_eleidx_number</span><span> </span><span class="quoted"><span>‹›</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span>parse_eleidx_input_fallback</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>1</span><span class="main"><span>,</span></span><span> </span><span class="main"><span>[</span></span><span>1</span><span class="main"><span>,</span></span><span>1</span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><span>parse_eleidx_input_all</span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>parse_eleidx_val</span><span>
      </span><span class="quoted"><span>‹rejecting all input, meaning the parsing fails›</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Phi_System/USER_HOME/Current/phi-system/Phi_Logic_Programming_Reasoner/library/reasoner.ML.html#PLPR.\&lt;phi&gt;reason|attribute"><span class="operator"><span>φreason</span></span></a><span> </span><span class="main"><span class="main"><span class="main"><span class="main"><span>%</span></span></span></span></span><span>parse_eleidx_input</span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.parse_eleidx_input|const"><span>parse_eleidx_input</span></a><span> </span><span class="free"><span>TY</span></span><span> </span><span class="free"><span>input</span></span><span> </span><span class="free"><span>sem_idx</span></span><span> </span><span class="free"><span>spec_idx</span></span><span> </span><span class="free"><span>reject</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_System/Phi_Logic_Programming_Reasoner.PLPR.html#PLPR.Simp_Premise|const"><span>𝖼𝗈𝗇𝖽𝗂𝗍𝗂𝗈𝗇</span></a></span><span> </span><span class="free"><span>input</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><span class="free"><span>spec_idx</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.parse_eleidx_input_least1|const"><span>parse_eleidx_input_least1</span></a><span> </span><span class="free"><span>TY</span></span><span> </span><span class="free"><span>input</span></span><span> </span><span class="free"><span>sem_idx</span></span><span> </span><span class="free"><span>spec_idx</span></span><span> </span><span class="free"><span>reject</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.parse_eleidx_input_least1_def|fact"><span>parse_eleidx_input_least1_def</span></a><span> </span><a class="entity_ref" href="../Phi_System/Phi_Logic_Programming_Reasoner.PLPR.html#PLPR.Premise_def|fact"><span>Premise_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Phi_System/USER_HOME/Current/phi-system/Phi_Logic_Programming_Reasoner/library/reasoner.ML.html#PLPR.\&lt;phi&gt;reason|attribute"><span class="operator"><span>φreason</span></span></a><span> </span><span class="main"><span class="main"><span class="main"><span class="main"><span>%</span></span></span></span></span><span>parse_eleidx_input_success</span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.parse_eleidx_input|const"><span>parse_eleidx_input</span></a><span> </span><span class="free"><span>TY</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.parse_eleidx_input_def|fact"><span>parse_eleidx_input_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Phi_System/USER_HOME/Current/phi-system/Phi_Logic_Programming_Reasoner/library/reasoner.ML.html#PLPR.\&lt;phi&gt;reason|attribute"><span class="operator"><span>φreason</span></span></a><span> </span><span class="quasi_keyword"><span class="quasi_keyword"><span class="quasi_keyword"><span>default</span></span></span></span><span> </span><span class="main"><span class="main"><span class="main"><span class="main"><span>%</span></span></span></span></span><span>parse_eleidx_input_fallback</span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.parse_eleidx_input|const"><span>parse_eleidx_input</span></a><span> </span><span class="free"><span>TY</span></span><span> </span><span class="free"><span>input</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span> </span><span class="free"><span>input</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.parse_eleidx_input_def|fact"><span>parse_eleidx_input_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Phi_System/USER_HOME/Current/phi-system/Phi_Logic_Programming_Reasoner/library/reasoner.ML.html#PLPR.\&lt;phi&gt;reason|attribute"><span class="operator"><span>φreason</span></span></a><span> </span><span class="main"><span class="main"><span class="main"><span class="main"><span>%</span></span></span></span></span><span>parse_eleidx_literal_symbol</span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><span class="keyword1"><a class="entity_ref" href="../Phi_System/Phi_Logic_Programming_Reasoner.PLPR.html#PLPR.\&lt;r&gt;Guard|const"><span>𝗀𝗎𝖺𝗋𝖽</span></a></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.is_valid_step_idx_of|const"><span>is_valid_step_idx_of</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_System/Phi_Element_Path.html#Phi_Element_Path.aggregate_index&apos;.AgIdx_S|const"><span>AgIdx_S</span></a><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>TY</span></span><span> </span><span class="free"><span>U</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.parse_eleidx_input|const"><span>parse_eleidx_input</span></a><span> </span><span class="free"><span>U</span></span><span> </span><span class="free"><span>input</span></span><span> </span><span class="free"><span>sem_idx</span></span><span> </span><span class="free"><span>spec_idx</span></span><span> </span><span class="free"><span>reject</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.parse_eleidx_input|const"><span>parse_eleidx_input</span></a><span> </span><span class="free"><span>TY</span></span><span>
      </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.\&lt;phi&gt;arg.dest|const"><span>φarg.dest</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_System/PhiSem_Formalization_Tools.html#PhiSem_Formalization_Tools.semantic_literal|const"><span>semantic_literal</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="PhiSem_Symbol.html#PhiSem_Symbol.sem_mk_symbol|const"><span>sem_mk_symbol</span></a><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>S</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Cons|const"><span>#</span></a></span><span> </span><span class="free"><span>input</span></span><span class="main"><span>)</span></span><span>
      </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_System/Phi_Element_Path.html#Phi_Element_Path.aggregate_index&apos;.AgIdx_S|const"><span>AgIdx_S</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Cons|const"><span>#</span></a></span><span> </span><span class="free"><span>sem_idx</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_System/Phi_Element_Path.html#Phi_Element_Path.aggregate_index&apos;.AgIdx_S|const"><span>AgIdx_S</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Cons|const"><span>#</span></a></span><span> </span><span class="free"><span>spec_idx</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>reject</span></span><span> ›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.parse_eleidx_input_def|fact"><span>parse_eleidx_input_def</span></a><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.is_valid_step_idx_of_def|fact"><span>is_valid_step_idx_of_def</span></a><span> </span><a class="entity_ref" href="../Phi_System/Phi_Logic_Programming_Reasoner.PLPR.html#PLPR.\&lt;r&gt;Guard_def|fact"><span>𝗋Guard_def</span></a><span> </span><a class="entity_ref" href="../Phi_System/Phi_Logic_Programming_Reasoner.PLPR.html#PLPR.Ant_Seq_def|fact"><span>Ant_Seq_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Phi_System/USER_HOME/Current/phi-system/Phi_Logic_Programming_Reasoner/library/reasoner.ML.html#PLPR.\&lt;phi&gt;reason|attribute"><span class="operator"><span>φreason</span></span></a><span> </span><span class="main"><span class="main"><span class="main"><span class="main"><span>%</span></span></span></span></span><span>parse_eleidx_number</span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><span class="keyword1"><a class="entity_ref" href="../Phi_System/Phi_Logic_Programming_Reasoner.PLPR.html#PLPR.\&lt;r&gt;Guard|const"><span>𝗀𝗎𝖺𝗋𝖽</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.\&lt;phi&gt;arg.dest|const"><span>φarg.dest</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.Satisfaction|const"><span>⊨</span></a></span><span> </span><span class="free"><span>S</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_System/Phi_Logic_Programming_Reasoner.PLPR.html#PLPR.Action_Tag|const"><span>@tag</span></a></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.\&lt;A&gt;parse_eleidx|const"><span>𝒜parse_eleidx</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_System/Phi_Logic_Programming_Reasoner.PLPR.html#PLPR.Ant_Seq|const"><span>∧<span class="hidden">⇩</span><sub>𝗋</sub></span></a></span><span>
          </span><a class="entity_ref" href="PhiSem_Common_Int.html#PhiSem_Common_Int.get_logical_nat_from_semantic_int|const"><span>get_logical_nat_from_semantic_int</span></a><span> </span><span class="free"><span>S</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_System/Phi_Logic_Programming_Reasoner.PLPR.html#PLPR.Ant_Seq|const"><span>∧<span class="hidden">⇩</span><sub>𝗋</sub></span></a></span><span>
          </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.is_valid_step_idx_of|const"><span>is_valid_step_idx_of</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_System/Phi_Element_Path.html#Phi_Element_Path.aggregate_index&apos;.AgIdx_N|const"><span>AgIdx_N</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>TY</span></span><span> </span><span class="free"><span>U</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.parse_eleidx_input|const"><span>parse_eleidx_input</span></a><span> </span><span class="free"><span>U</span></span><span> </span><span class="free"><span>input</span></span><span> </span><span class="free"><span>sem_idx</span></span><span> </span><span class="free"><span>spec_idx</span></span><span> </span><span class="free"><span>reject</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.parse_eleidx_input|const"><span>parse_eleidx_input</span></a><span> </span><span class="free"><span>TY</span></span><span>              
      </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.\&lt;phi&gt;arg.dest|const"><span>φarg.dest</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>S</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Cons|const"><span>#</span></a></span><span> </span><span class="free"><span>input</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.AgIdx_VN|const"><span>AgIdx_VN</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Cons|const"><span>#</span></a></span><span> </span><span class="free"><span>sem_idx</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_System/Phi_Element_Path.html#Phi_Element_Path.aggregate_index&apos;.AgIdx_N|const"><span>AgIdx_N</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Cons|const"><span>#</span></a></span><span> </span><span class="free"><span>spec_idx</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>reject</span></span><span> ›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.parse_eleidx_input_def|fact"><span>parse_eleidx_input_def</span></a><span> </span><a class="entity_ref" href="../Phi_System/Phi_Logic_Programming_Reasoner.PLPR.html#PLPR.Action_Tag_def|fact"><span>Action_Tag_def</span></a><span>
            </span><a class="entity_ref" href="PhiSem_Common_Int.html#PhiSem_Common_Int.get_logical_nat_from_semantic_int_def|fact"><span>get_logical_nat_from_semantic_int_def</span></a><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.AgIdx_VN_def|fact"><span>AgIdx_VN_def</span></a><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.is_valid_step_idx_of_def|fact"><span>is_valid_step_idx_of_def</span></a><span>
            </span><a class="entity_ref" href="PhiSem_Common_Int.html#PhiSem_Common_Int.\&lt;r&gt;nat_to_suc_nat_def|fact"><span>𝗋nat_to_suc_nat_def</span></a><span> </span><a class="entity_ref" href="../Phi_System/Phi_Logic_Programming_Reasoner.PLPR.html#PLPR.\&lt;r&gt;Guard_def|fact"><span>𝗋Guard_def</span></a><span> </span><a class="entity_ref" href="../Phi_System/Phi_Logic_Programming_Reasoner.PLPR.html#PLPR.Ant_Seq_def|fact"><span>Ant_Seq_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="free"><span>v</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.sel|fact"><span>option.sel</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Phi_System/USER_HOME/Current/phi-system/Phi_Logic_Programming_Reasoner/library/reasoner.ML.html#PLPR.\&lt;phi&gt;reason|attribute"><span class="operator"><span>φreason</span></span></a><span> </span><span class="main"><span class="main"><span class="main"><span class="main"><span>%</span></span></span></span></span><span>parse_eleidx_literal_number</span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><span class="keyword1"><a class="entity_ref" href="../Phi_System/Phi_Logic_Programming_Reasoner.PLPR.html#PLPR.\&lt;r&gt;Guard|const"><span>𝗀𝗎𝖺𝗋𝖽</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.\&lt;phi&gt;arg.dest|const"><span>φarg.dest</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_System/PhiSem_Formalization_Tools.html#PhiSem_Formalization_Tools.semantic_literal|const"><span>semantic_literal</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.Satisfaction|const"><span>⊨</span></a></span><span> </span><span class="free"><span>S</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_System/Phi_Logic_Programming_Reasoner.PLPR.html#PLPR.Action_Tag|const"><span>@tag</span></a></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.\&lt;A&gt;parse_eleidx|const"><span>𝒜parse_eleidx</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_System/Phi_Logic_Programming_Reasoner.PLPR.html#PLPR.Ant_Seq|const"><span>∧<span class="hidden">⇩</span><sub>𝗋</sub></span></a></span><span>
          </span><a class="entity_ref" href="PhiSem_Common_Int.html#PhiSem_Common_Int.get_logical_nat_from_semantic_int|const"><span>get_logical_nat_from_semantic_int</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.Itself|const"><span>Itself</span></a><span class="main"><span>)</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_System/Phi_Logic_Programming_Reasoner.PLPR.html#PLPR.Ant_Seq|const"><span>∧<span class="hidden">⇩</span><sub>𝗋</sub></span></a></span><span>
          </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.is_valid_step_idx_of|const"><span>is_valid_step_idx_of</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_System/Phi_Element_Path.html#Phi_Element_Path.aggregate_index&apos;.AgIdx_N|const"><span>AgIdx_N</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>TY</span></span><span> </span><span class="free"><span>U</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.parse_eleidx_input|const"><span>parse_eleidx_input</span></a><span> </span><span class="free"><span>U</span></span><span> </span><span class="free"><span>input</span></span><span> </span><span class="free"><span>sem_idx</span></span><span> </span><span class="free"><span>spec_idx</span></span><span> </span><span class="free"><span>reject</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.parse_eleidx_input|const"><span>parse_eleidx_input</span></a><span> </span><span class="free"><span>TY</span></span><span>
      </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.\&lt;phi&gt;arg.dest|const"><span>φarg.dest</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_System/PhiSem_Formalization_Tools.html#PhiSem_Formalization_Tools.semantic_literal|const"><span>semantic_literal</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>S</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Cons|const"><span>#</span></a></span><span> </span><span class="free"><span>input</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_System/Phi_Element_Path.html#Phi_Element_Path.aggregate_index&apos;.AgIdx_N|const"><span>AgIdx_N</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Cons|const"><span>#</span></a></span><span> </span><span class="free"><span>sem_idx</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_System/Phi_Element_Path.html#Phi_Element_Path.aggregate_index&apos;.AgIdx_N|const"><span>AgIdx_N</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Cons|const"><span>#</span></a></span><span> </span><span class="free"><span>spec_idx</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>reject</span></span><span> ›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.parse_eleidx_input_def|fact"><span>parse_eleidx_input_def</span></a><span> </span><a class="entity_ref" href="../Phi_System/Phi_Logic_Programming_Reasoner.PLPR.html#PLPR.Action_Tag_def|fact"><span>Action_Tag_def</span></a><span>
            </span><a class="entity_ref" href="PhiSem_Common_Int.html#PhiSem_Common_Int.get_logical_nat_from_semantic_int_def|fact"><span>get_logical_nat_from_semantic_int_def</span></a><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.AgIdx_VN_def|fact"><span>AgIdx_VN_def</span></a><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.is_valid_step_idx_of_def|fact"><span>is_valid_step_idx_of_def</span></a><span>
            </span><a class="entity_ref" href="PhiSem_Common_Int.html#PhiSem_Common_Int.\&lt;r&gt;nat_to_suc_nat_def|fact"><span>𝗋nat_to_suc_nat_def</span></a><span> </span><a class="entity_ref" href="../Phi_System/Phi_Logic_Programming_Reasoner.PLPR.html#PLPR.\&lt;r&gt;Guard_def|fact"><span>𝗋Guard_def</span></a><span> </span><a class="entity_ref" href="../Phi_System/Phi_Logic_Programming_Reasoner.PLPR.html#PLPR.Ant_Seq_def|fact"><span>Ant_Seq_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.sel|fact"><span>option.sel</span></a><span class="main"><span>)</span></span><span>


</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Evaluate Index›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>consts</span></span></span><span> </span><span class="entity_def" id="PhiSem_Aggregate_Base.eval_aggregate_path|const"><span>eval_aggregate_path</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><a class="entity_ref" href="../Phi_System/Phi_Logic_Programming_Reasoner.PLPR.html#PLPR.mode|type"><span>mode</span></a></span><span>

</span><span class="keyword1"><span class="command"><span>ML</span></span></span><span> </span><span class="quoted"><span>‹
</span><span class="keyword1"><span class="keyword"><span>structure</span></span></span><span> </span><span class="entity"><span>Eval_Sem_Idx_SS</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>Simpset</span></span><span> </span><span class="main"><span>(</span></span><span>
  </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>initial_ss</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>Simpset_Configure.Minimal_SS</span></span><span>
  </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>binding</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>SOME</span><span> </span><span class="antiquoted"><span class="entity"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">binding</span><span class="hidden">&gt;</span></span></span><span>‹</span><span class="entity_def" id="PhiSem_Aggregate_Base.eval_aggregate_path|attribute"><span class="entity_def" id="PhiSem_Aggregate_Base.eval_aggregate_path|fact"><span>eval_aggregate_path</span></span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>comment</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="inner_quoted"><span>"Rules evaluating indexing of semantic type and value"</span></span><span>
  </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>attribute</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>NONE</span><span>
  </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>post_merging</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>I</span><span>
</span><span class="main"><span>)</span></span><span>›</span></span><span>

</span><span class="keyword1"><span class="command"><span>setup</span></span></span><span> </span><span class="quoted"><span>‹</span><span>Context.theory_map</span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>Eval_Sem_Idx_SS.map</span></span><span> </span><span class="main"><span>(</span></span><span>
  </span><span class="entity"><span>Simplifier.add_cong</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm'</span></span><span> </span><a class="entity_ref" href="../Phi_System/PhiTool_Symbol.html#PhiTool_Symbol.mk_symbol_cong|fact"><span>mk_symbol_cong</span></a><span class="antiquote"><span>}</span></span></span></span><span>
</span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>›</span></span><span>

</span><span class="keyword1"><span class="command"><span>φreasoner_ML</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.eval_aggregate_path|const"><span>eval_aggregate_path</span></a></span><span> 1300 </span><span class="main"><span>(</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="keyword1"><a class="entity_ref" href="../Phi_System/Phi_Logic_Programming_Reasoner.PLPR.html#PLPR.Simplify|const"><span>𝗌𝗂𝗆𝗉𝗅𝗂𝖿𝗒[</span></a></span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.eval_aggregate_path|const"><span>eval_aggregate_path</span></a><span class="main"><a class="entity_ref" href="../Phi_System/Phi_Logic_Programming_Reasoner.PLPR.html#PLPR.Simplify|const"><span>]</span></a></span><span> </span><span class="var"><span>?X'</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_Logic_Programming_Reasoner.PLPR.html#PLPR.Simplify|const"><span>:</span></a></span><span> </span><span class="var"><span>?X</span></span><span>›</span></span></span><span>
                                      </span><span class="main"><span>|</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="keyword1"><a class="entity_ref" href="../Phi_System/Phi_Logic_Programming_Reasoner.PLPR.html#PLPR.Premise|const"><span>𝖼𝗈𝗇𝖽𝗂𝗍𝗂𝗈𝗇[</span></a></span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.eval_aggregate_path|const"><span>eval_aggregate_path</span></a><span class="main"><a class="entity_ref" href="../Phi_System/Phi_Logic_Programming_Reasoner.PLPR.html#PLPR.Premise|const"><span>]</span></a></span><span> </span><span class="var"><span>?P</span></span><span>›</span></span></span><span> </span><span class="main"><span>)</span></span><span>
  </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>‹</span><span class="entity"><span>Phi_Reasoners.wrap</span></span><span> </span><span class="main"><span>(</span></span><span>
      </span><span class="entity"><span>PLPR_Simplifier.simplifier_by_ss'</span></span><span> </span><span class="main"><span>(</span></span><span>K</span><span> </span><span>Seq.empty</span><span class="main"><span>)</span></span><span> </span><span class="entity"><span>Eval_Sem_Idx_SS.get'</span></span><span> </span><span class="main"><span>{</span></span><span>fix_vars</span><span class="main"><span>=</span></span><span>false</span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span>o</span><span> </span><span>snd</span><span>›</span></span><span>


</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.eval_aggregate_path|attribute"><span class="operator"><span>eval_aggregate_path</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.nth_Cons_0|fact"><span>nth_Cons_0</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.nth_Cons_Suc|fact"><span>nth_Cons_Suc</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.fold_simps|fact"><span>fold_simps</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.size|fact"><span>list.size</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.simp_thms|fact"><span>simp_thms</span></a><span>

</span><span class="keyword1"><span class="command"><span>declare</span></span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>[</span></span><span>
  </span><a class="entity_ref" href="../Phi_System/USER_HOME/Current/phi-system/Phi_System/library/system/premise_attribute.ML.html#Phi_Preliminary.\&lt;phi&gt;premise_attribute|attribute"><span class="operator"><span>φpremise_attribute</span></span></a><span>       </span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>THEN</span></span><span> Premise_D</span><span class="main"><span class="main"><span>]</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>for</span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="keyword1"><a class="entity_ref" href="../Phi_System/Phi_Logic_Programming_Reasoner.PLPR.html#PLPR.Premise|const"><span>𝖼𝗈𝗇𝖽𝗂𝗍𝗂𝗈𝗇[</span></a></span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.eval_aggregate_path|const"><span>eval_aggregate_path</span></a><span class="main"><a class="entity_ref" href="../Phi_System/Phi_Logic_Programming_Reasoner.PLPR.html#PLPR.Premise|const"><span>]</span></a></span><span> </span><span class="main"><span>_</span></span><span>›</span></span></span><span>  </span><span class="main"><span class="main"><span>(</span></span></span><span class="main"><span class="main"><span>%</span></span></span><span>φattr_late_normalize</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>,</span></span><span>
  </span><a class="entity_ref" href="../Phi_System/USER_HOME/Current/phi-system/Phi_System/library/system/premise_attribute.ML.html#Phi_Preliminary.\&lt;phi&gt;premise_attribute|attribute"><span class="operator"><span>φpremise_attribute</span></span></a><span> </span><span class="quasi_keyword"><span>once</span></span><span class="main"><span class="main"><span>?</span></span></span><span> </span><span class="main"><span class="main"><span>[</span></span></span><a class="entity_ref" href="../Phi_System/USER_HOME/Current/phi-system/Phi_System/library/system/Phi_Envir.ML.html#IDE_CP_Core.useful|attribute"><span class="operator"><span>useful</span></span></a><span class="main"><span class="main"><span>]</span></span></span><span>         </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>for</span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="keyword1"><a class="entity_ref" href="../Phi_System/Phi_Logic_Programming_Reasoner.PLPR.html#PLPR.Premise|const"><span>𝖼𝗈𝗇𝖽𝗂𝗍𝗂𝗈𝗇[</span></a></span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.eval_aggregate_path|const"><span>eval_aggregate_path</span></a><span class="main"><a class="entity_ref" href="../Phi_System/Phi_Logic_Programming_Reasoner.PLPR.html#PLPR.Premise|const"><span>]</span></a></span><span> </span><span class="main"><span>_</span></span><span>›</span></span></span><span>  </span><span class="main"><span class="main"><span>(</span></span></span><span class="main"><span class="main"><span>%</span></span></span><span>φattr</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span class="comment1"><span>(*TODO: use EIF instead of this?*)</span></span><span>
</span><span class="main"><span>]</span></span><span class="main"><span>]</span></span><span>


</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Index to Fields of Structures›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="PhiSem_Aggregate_Base.\&lt;phi&gt;Type_Mapping_def|fact"><span class="entity_def" id="PhiSem_Aggregate_Base.\&lt;phi&gt;Type_Mapping_def|thm"><span class="entity_def" id="PhiSem_Aggregate_Base.\&lt;phi&gt;Type_Mapping_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span class="entity_def" id="PhiSem_Aggregate_Base.\&lt;phi&gt;Type_Mapping|const"><span>φType_Mapping</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>T</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>U</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>g</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span class="bound"><span>v</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.Satisfaction|const"><span>⊨</span></a></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>T</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>g</span></span></span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.Satisfaction|const"><span>⊨</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>U</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="PhiSem_Aggregate_Base.\&lt;phi&gt;Aggregate_Getter_def|fact"><span class="entity_def" id="PhiSem_Aggregate_Base.\&lt;phi&gt;Aggregate_Getter_def|thm"><span class="entity_def" id="PhiSem_Aggregate_Base.\&lt;phi&gt;Aggregate_Getter_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="PhiSem_Aggregate_Base.\&lt;phi&gt;Aggregate_Getter|const"><span>φAggregate_Getter</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../Phi_System/Phi_Element_Path.html#Phi_Element_Path.aggregate_path|type"><span>aggregate_path</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.VAL|type"><span>VAL</span></a><span class="main"><span>,</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;|type"><span>φ</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.VAL|type"><span>VAL</span></a><span class="main"><span>,</span></span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;|type"><span>φ</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>φAggregate_Getter</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>idx</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>T</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>U</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>g</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.\&lt;phi&gt;Type_Mapping|const"><span>φType_Mapping</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>T</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>U</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>g</span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.index_value|const"><span>index_value</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>idx</span></span></span></span><span class="main"><span>)</span></span><span> ›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="PhiSem_Aggregate_Base.\&lt;phi&gt;Aggregate_Mapper_def|fact"><span class="entity_def" id="PhiSem_Aggregate_Base.\&lt;phi&gt;Aggregate_Mapper_def|thm"><span class="entity_def" id="PhiSem_Aggregate_Base.\&lt;phi&gt;Aggregate_Mapper_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="PhiSem_Aggregate_Base.\&lt;phi&gt;Aggregate_Mapper|const"><span>φAggregate_Mapper</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../Phi_System/Phi_Element_Path.html#Phi_Element_Path.aggregate_path|type"><span>aggregate_path</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.VAL|type"><span>VAL</span></a><span class="main"><span>,</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;|type"><span>φ</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.VAL|type"><span>VAL</span></a><span class="main"><span>,</span></span><span class="tfree"><span>'a2</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;|type"><span>φ</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.VAL|type"><span>VAL</span></a><span class="main"><span>,</span></span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;|type"><span>φ</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.VAL|type"><span>VAL</span></a><span class="main"><span>,</span></span><span class="tfree"><span>'b2</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;|type"><span>φ</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'b2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>φAggregate_Mapper</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>idx</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>T</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>T'</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>U</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>U'</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span>
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span class="bound"><span>g</span></span><span> </span><span class="bound"><span>g'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.\&lt;phi&gt;Type_Mapping|const"><span>φType_Mapping</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>U</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>U'</span></span></span></span><span> </span><span class="bound"><span>g'</span></span><span> </span><span class="bound"><span>g</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.\&lt;phi&gt;Type_Mapping|const"><span>φType_Mapping</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>T</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>T'</span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="bound"><span>g'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.index_mod_value|const"><span>index_mod_value</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>idx</span></span></span></span><span> </span><span class="bound"><span>g</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> ›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="PhiSem_Aggregate_Base.\&lt;phi&gt;Aggregate_Constructor_Synth_def|fact"><span class="entity_def" id="PhiSem_Aggregate_Base.\&lt;phi&gt;Aggregate_Constructor_Synth_def|thm"><span class="entity_def" id="PhiSem_Aggregate_Base.\&lt;phi&gt;Aggregate_Constructor_Synth_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="PhiSem_Aggregate_Base.\&lt;phi&gt;Aggregate_Constructor_Synth|const"><span>φAggregate_Constructor_Synth</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.VAL|type"><span>VAL</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list|type"><span>list</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.VAL|type"><span>VAL</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.VAL|type"><span>VAL</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list|type"><span>list</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.TY|type"><span>TY</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.VAL|type"><span>VAL</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>φAggregate_Constructor_Synth</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>constructor</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>Args</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>TY</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>Spec</span></span></span></span><span>
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span class="bound"><span>args</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><span class="bound"><span>args</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.Satisfaction|const"><span>⊨</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>Args</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>constructor</span></span></span></span><span> </span><span class="bound"><span>args</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.Satisfaction|const"><span>⊨</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>Spec</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>constructor</span></span></span></span><span> </span><span class="bound"><span>args</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>TY</span></span></span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="PhiSem_Aggregate_Base.\&lt;phi&gt;Aggregate_Constructor_def|fact"><span class="entity_def" id="PhiSem_Aggregate_Base.\&lt;phi&gt;Aggregate_Constructor_def|thm"><span class="entity_def" id="PhiSem_Aggregate_Base.\&lt;phi&gt;Aggregate_Constructor_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="PhiSem_Aggregate_Base.\&lt;phi&gt;Aggregate_Constructor|const"><span>φAggregate_Constructor</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.VAL|type"><span>VAL</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list|type"><span>list</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.VAL|type"><span>VAL</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.VAL|type"><span>VAL</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.\&lt;phi&gt;arg|type"><span>φarg</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list|type"><span>list</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.TY|type"><span>TY</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.VAL|type"><span>VAL</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>φAggregate_Constructor</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>constructor</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>args</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>TY</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>Spec</span></span></span></span><span>
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>constructor</span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.map|const"><span>map</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.\&lt;phi&gt;arg.dest|const"><span>φarg.dest</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>args</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.Satisfaction|const"><span>⊨</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>Spec</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>constructor</span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.map|const"><span>map</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.\&lt;phi&gt;arg.dest|const"><span>φarg.dest</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>args</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>TY</span></span></span></span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>consts</span></span></span><span> </span><span class="entity_def" id="PhiSem_Aggregate_Base.\&lt;A&gt;ctr_arg|const"><span>𝒜ctr_arg</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../Phi_System/PhiTool_Symbol.html#PhiTool_Symbol.symbol|type"><span>symbol</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Sum_Type.html#Sum_Type.sum|type"><span>+</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../Phi_System/Phi_Logic_Programming_Reasoner.PLPR.html#PLPR.action|type"><span>action</span></a><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>declare</span></span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../Phi_System/USER_HOME/Current/phi-system/Phi_Logic_Programming_Reasoner/library/reasoner.ML.html#PLPR.\&lt;phi&gt;reason_default_pattern|attribute"><span class="operator"><span>φreason_default_pattern</span></span></a><span>
    </span><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.\&lt;phi&gt;Aggregate_Getter|const"><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.\&lt;phi&gt;Aggregate_Getter|const"><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.\&lt;phi&gt;Aggregate_Getter|const"><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.\&lt;phi&gt;Aggregate_Getter|const"><span>φAggregate_Getter</span></a></a></a></a><span> </span><span class="var"><span class="var"><span class="var"><span class="var"><span>?idx</span></span></span></span></span><span> </span><span class="var"><span class="var"><span class="var"><span class="var"><span>?T</span></span></span></span></span><span> </span><span class="main"><span class="main"><span class="main"><span class="main"><span>_</span></span></span></span></span><span> </span><span class="main"><span class="main"><span class="main"><span class="main"><span>_</span></span></span></span></span><span> ›</span></span></span></span></span></span><span> </span><span class="main"><span class="main"><span>⇒</span></span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.\&lt;phi&gt;Aggregate_Getter|const"><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.\&lt;phi&gt;Aggregate_Getter|const"><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.\&lt;phi&gt;Aggregate_Getter|const"><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.\&lt;phi&gt;Aggregate_Getter|const"><span>φAggregate_Getter</span></a></a></a></a><span> </span><span class="var"><span class="var"><span class="var"><span class="var"><span>?idx</span></span></span></span></span><span> </span><span class="var"><span class="var"><span class="var"><span class="var"><span>?T</span></span></span></span></span><span> </span><span class="main"><span class="main"><span class="main"><span class="main"><span>_</span></span></span></span></span><span> </span><span class="main"><span class="main"><span class="main"><span class="main"><span>_</span></span></span></span></span><span> ›</span></span></span></span></span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>100</span><span class="main"><span class="main"><span>)</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>and</span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.\&lt;phi&gt;Aggregate_Mapper|const"><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.\&lt;phi&gt;Aggregate_Mapper|const"><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.\&lt;phi&gt;Aggregate_Mapper|const"><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.\&lt;phi&gt;Aggregate_Mapper|const"><span>φAggregate_Mapper</span></a></a></a></a><span> </span><span class="var"><span class="var"><span class="var"><span class="var"><span>?idx</span></span></span></span></span><span> </span><span class="var"><span class="var"><span class="var"><span class="var"><span>?T</span></span></span></span></span><span> </span><span class="main"><span class="main"><span class="main"><span class="main"><span>_</span></span></span></span></span><span> </span><span class="main"><span class="main"><span class="main"><span class="main"><span>_</span></span></span></span></span><span> </span><span class="main"><span class="main"><span class="main"><span class="main"><span>_</span></span></span></span></span><span> </span><span class="main"><span class="main"><span class="main"><span class="main"><span>_</span></span></span></span></span><span> ›</span></span></span></span></span></span><span> </span><span class="main"><span class="main"><span>⇒</span></span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.\&lt;phi&gt;Aggregate_Mapper|const"><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.\&lt;phi&gt;Aggregate_Mapper|const"><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.\&lt;phi&gt;Aggregate_Mapper|const"><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.\&lt;phi&gt;Aggregate_Mapper|const"><span>φAggregate_Mapper</span></a></a></a></a><span> </span><span class="var"><span class="var"><span class="var"><span class="var"><span>?idx</span></span></span></span></span><span> </span><span class="var"><span class="var"><span class="var"><span class="var"><span>?T</span></span></span></span></span><span> </span><span class="main"><span class="main"><span class="main"><span class="main"><span>_</span></span></span></span></span><span> </span><span class="main"><span class="main"><span class="main"><span class="main"><span>_</span></span></span></span></span><span> </span><span class="main"><span class="main"><span class="main"><span class="main"><span>_</span></span></span></span></span><span> </span><span class="main"><span class="main"><span class="main"><span class="main"><span>_</span></span></span></span></span><span> ›</span></span></span></span></span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>100</span><span class="main"><span class="main"><span>)</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>and</span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.\&lt;phi&gt;Aggregate_Constructor_Synth|const"><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.\&lt;phi&gt;Aggregate_Constructor_Synth|const"><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.\&lt;phi&gt;Aggregate_Constructor_Synth|const"><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.\&lt;phi&gt;Aggregate_Constructor_Synth|const"><span>φAggregate_Constructor_Synth</span></a></a></a></a><span> </span><span class="main"><span class="main"><span class="main"><span class="main"><span>_</span></span></span></span></span><span> </span><span class="main"><span class="main"><span class="main"><span class="main"><span>_</span></span></span></span></span><span> </span><span class="main"><span class="main"><span class="main"><span class="main"><span>_</span></span></span></span></span><span> </span><span class="var"><span class="var"><span class="var"><span class="var"><span>?T</span></span></span></span></span><span>›</span></span></span></span></span></span><span> </span><span class="main"><span class="main"><span>⇒</span></span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.\&lt;phi&gt;Aggregate_Constructor_Synth|const"><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.\&lt;phi&gt;Aggregate_Constructor_Synth|const"><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.\&lt;phi&gt;Aggregate_Constructor_Synth|const"><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.\&lt;phi&gt;Aggregate_Constructor_Synth|const"><span>φAggregate_Constructor_Synth</span></a></a></a></a><span> </span><span class="main"><span class="main"><span class="main"><span class="main"><span>_</span></span></span></span></span><span> </span><span class="main"><span class="main"><span class="main"><span class="main"><span>_</span></span></span></span></span><span> </span><span class="main"><span class="main"><span class="main"><span class="main"><span>_</span></span></span></span></span><span> </span><span class="var"><span class="var"><span class="var"><span class="var"><span>?T</span></span></span></span></span><span>›</span></span></span></span></span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>100</span><span class="main"><span class="main"><span>)</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>and</span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.\&lt;phi&gt;Aggregate_Constructor|const"><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.\&lt;phi&gt;Aggregate_Constructor|const"><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.\&lt;phi&gt;Aggregate_Constructor|const"><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.\&lt;phi&gt;Aggregate_Constructor|const"><span>φAggregate_Constructor</span></a></a></a></a><span> </span><span class="var"><span class="var"><span class="var"><span class="var"><span>?ctor</span></span></span></span></span><span> </span><span class="var"><span class="var"><span class="var"><span class="var"><span>?args</span></span></span></span></span><span> </span><span class="main"><span class="main"><span class="main"><span class="main"><span>_</span></span></span></span></span><span> </span><span class="main"><span class="main"><span class="main"><span class="main"><span>_</span></span></span></span></span><span>›</span></span></span></span></span></span><span> </span><span class="main"><span class="main"><span>⇒</span></span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.\&lt;phi&gt;Aggregate_Constructor|const"><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.\&lt;phi&gt;Aggregate_Constructor|const"><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.\&lt;phi&gt;Aggregate_Constructor|const"><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.\&lt;phi&gt;Aggregate_Constructor|const"><span>φAggregate_Constructor</span></a></a></a></a><span> </span><span class="var"><span class="var"><span class="var"><span class="var"><span>?ctor</span></span></span></span></span><span> </span><span class="var"><span class="var"><span class="var"><span class="var"><span>?args</span></span></span></span></span><span> </span><span class="main"><span class="main"><span class="main"><span class="main"><span>_</span></span></span></span></span><span> </span><span class="main"><span class="main"><span class="main"><span class="main"><span>_</span></span></span></span></span><span>›</span></span></span></span></span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>100</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>,</span></span><span>


    </span><a class="entity_ref" href="../Phi_System/USER_HOME/Current/phi-system/Phi_System/library/system/premise_attribute.ML.html#Phi_Preliminary.\&lt;phi&gt;premise_attribute|attribute"><span class="operator"><span>φpremise_attribute</span></span></a><span> </span><span class="quasi_keyword"><span>once</span></span><span class="main"><span class="main"><span>?</span></span></span><span> </span><span class="main"><span class="main"><span>[</span></span></span><a class="entity_ref" href="../Phi_System/USER_HOME/Current/phi-system/Phi_Logic_Programming_Reasoner/library/reasoner.ML.html#PLPR.\&lt;phi&gt;reason|attribute"><span class="operator"><span>φreason</span></span></a><span class="main"><span>?</span></span><span> </span><span class="main"><span>%</span></span><span>local</span><span class="main"><span class="main"><span>]</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>for</span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.\&lt;phi&gt;Aggregate_Getter|const"><span>φAggregate_Getter</span></a><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>_</span></span><span>›</span></span></span><span>       </span><span class="main"><span class="main"><span>(</span></span></span><span class="main"><span class="main"><span>%</span></span></span><span>φattr</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>,</span></span><span>
    </span><a class="entity_ref" href="../Phi_System/USER_HOME/Current/phi-system/Phi_System/library/system/premise_attribute.ML.html#Phi_Preliminary.\&lt;phi&gt;premise_attribute|attribute"><span class="operator"><span>φpremise_attribute</span></span></a><span> </span><span class="quasi_keyword"><span>once</span></span><span class="main"><span class="main"><span>?</span></span></span><span> </span><span class="main"><span class="main"><span>[</span></span></span><a class="entity_ref" href="../Phi_System/USER_HOME/Current/phi-system/Phi_Logic_Programming_Reasoner/library/reasoner.ML.html#PLPR.\&lt;phi&gt;reason|attribute"><span class="operator"><span>φreason</span></span></a><span class="main"><span>?</span></span><span> </span><span class="main"><span>%</span></span><span>local</span><span class="main"><span class="main"><span>]</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>for</span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.\&lt;phi&gt;Aggregate_Mapper|const"><span>φAggregate_Mapper</span></a><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>_</span></span><span>›</span></span></span><span>   </span><span class="main"><span class="main"><span>(</span></span></span><span class="main"><span class="main"><span>%</span></span></span><span>φattr</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>,</span></span><span>
    </span><a class="entity_ref" href="../Phi_System/USER_HOME/Current/phi-system/Phi_System/library/system/premise_attribute.ML.html#Phi_Preliminary.\&lt;phi&gt;premise_attribute|attribute"><span class="operator"><span>φpremise_attribute</span></span></a><span> </span><span class="quasi_keyword"><span>once</span></span><span class="main"><span class="main"><span>?</span></span></span><span> </span><span class="main"><span class="main"><span>[</span></span></span><a class="entity_ref" href="../Phi_System/USER_HOME/Current/phi-system/Phi_Logic_Programming_Reasoner/library/reasoner.ML.html#PLPR.\&lt;phi&gt;reason|attribute"><span class="operator"><span>φreason</span></span></a><span class="main"><span>?</span></span><span> </span><span class="main"><span>%</span></span><span>local</span><span class="main"><span class="main"><span>]</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>for</span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.\&lt;phi&gt;Aggregate_Constructor|const"><span>φAggregate_Constructor</span></a><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>_</span></span><span>›</span></span></span><span>  </span><span class="main"><span class="main"><span>(</span></span></span><span class="main"><span class="main"><span>%</span></span></span><span>φattr</span><span class="main"><span class="main"><span>)</span></span></span><span>
</span><span class="main"><span>]</span></span><span class="main"><span>]</span></span><span>

</span><span class="keyword1"><span class="command"><span>φreasoner_group</span></span></span><span> </span><span>aggregate_access_all</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>100</span><span class="main"><span>,</span></span><span> </span><span class="main"><span>[</span></span><span>1</span><span class="main"><span>,</span></span><span> 2000</span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.\&lt;phi&gt;Aggregate_Getter|const"><span>φAggregate_Getter</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="free"><span>T</span></span><span> </span><span class="free"><span>U</span></span><span> </span><span class="free"><span>g</span></span><span>›</span></span></span><span class="main"><span>,</span></span><span>
                                                         </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.\&lt;phi&gt;Aggregate_Mapper|const"><span>φAggregate_Mapper</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="free"><span>T</span></span><span> </span><span class="free"><span>T'</span></span><span> </span><span class="free"><span>U</span></span><span> </span><span class="free"><span>U'</span></span><span> </span><span class="free"><span>f</span></span><span>›</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="quoted"><span>‹Rules lifting semantic access of aggregate structures onto abstract domain›</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span>aggregate_access</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>1010</span><span class="main"><span>,</span></span><span> </span><span class="main"><span>[</span></span><span>1000</span><span class="main"><span>,</span></span><span>1030</span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><span>aggregate_access_all</span><span>
      </span><span class="quoted"><span>‹cutting rules›</span></span><span>

</span><span class="comment1"><span>(*
lemma [φreason 1]:
  ‹φAggregate_Getter [] T T id›
  unfolding φAggregate_Getter_def φType_Mapping_def
  by simp
*)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="PhiSem_Aggregate_Base.\&lt;phi&gt;Aggregate_Getter_Nil|fact"><span class="entity_def" id="PhiSem_Aggregate_Base.\&lt;phi&gt;Aggregate_Getter_Nil|thm"><span>φAggregate_Getter_Nil</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../Phi_System/USER_HOME/Current/phi-system/Phi_Logic_Programming_Reasoner/library/reasoner.ML.html#PLPR.\&lt;phi&gt;reason|attribute"><span class="operator"><span>φreason</span></span></a><span> </span><span class="main"><span class="main"><span class="main"><span class="main"><span>%</span></span></span></span></span><span>aggregate_access</span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.\&lt;phi&gt;Aggregate_Getter|const"><span>φAggregate_Getter</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span> </span><span class="free"><span>T</span></span><span> </span><span class="free"><span>T</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id|const"><span>id</span></a><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.\&lt;phi&gt;Aggregate_Getter_def|fact"><span>φAggregate_Getter_def</span></a><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.\&lt;phi&gt;Type_Mapping_def|fact"><span>φType_Mapping_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="comment1"><span>(*
lemma [φreason 1]:
  ‹φAggregate_Mapper [] T T' T T' id›
  unfolding φAggregate_Mapper_def φType_Mapping_def
  by simp
*)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Phi_System/USER_HOME/Current/phi-system/Phi_Logic_Programming_Reasoner/library/reasoner.ML.html#PLPR.\&lt;phi&gt;reason|attribute"><span class="operator"><span>φreason</span></span></a><span> </span><span class="main"><span class="main"><span class="main"><span class="main"><span>%</span></span></span></span></span><span>aggregate_access</span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.\&lt;phi&gt;Aggregate_Mapper|const"><span>φAggregate_Mapper</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span> </span><span class="free"><span>T</span></span><span> </span><span class="free"><span>T'</span></span><span> </span><span class="free"><span>T</span></span><span> </span><span class="free"><span>T'</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id|const"><span>id</span></a><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.\&lt;phi&gt;Aggregate_Mapper_def|fact"><span>φAggregate_Mapper_def</span></a><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.\&lt;phi&gt;Type_Mapping_def|fact"><span>φType_Mapping_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>


</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Is Aggregate›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="PhiSem_Aggregate_Base.Is_Aggregate_def|fact"><span class="entity_def" id="PhiSem_Aggregate_Base.Is_Aggregate_def|thm"><span class="entity_def" id="PhiSem_Aggregate_Base.Is_Aggregate_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="PhiSem_Aggregate_Base.Is_Aggregate|const"><span>Is_Aggregate</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><span class="tfree"><span>'c</span></span><span class="main"><span>,</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;|type"><span>φ</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>Is_Aggregate</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>T</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.True|const"><span>True</span></a><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>φreasoner_group</span></span></span><span> </span><span>is_aggregate_all</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>1000</span><span class="main"><span>,</span></span><span> </span><span class="main"><span>[</span></span><span>1</span><span class="main"><span>,</span></span><span> 2000</span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.Is_Aggregate|const"><span>Is_Aggregate</span></a><span> </span><span class="free"><span>T</span></span><span>›</span></span></span><span>
      </span><span class="quoted"><span>‹checking whether the given φtype specifies an aggregate›</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span>is_aggregate</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>1000</span><span class="main"><span>,</span></span><span> </span><span class="main"><span>[</span></span><span>1000</span><span class="main"><span>,</span></span><span> 1030</span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><span>is_aggregate_all</span><span>
      </span><span class="quoted"><span>‹cutting rules›</span></span><span>

</span><span class="keyword1"><span class="command"><span>φproperty_deriver</span></span></span><span> </span><span>Is_Aggregate</span><span> 555 </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.Is_Aggregate|const"><span>Is_Aggregate</span></a><span> </span><span class="main"><span>_</span></span><span>›</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>‹</span><span class="entity"><span>Phi_Type_Derivers.meta_Synt_Deriver</span></span><span>
      </span><span class="main"><span>(</span></span><span class="inner_quoted"><span>"Is_Aggregate"</span></span><span class="main"><span>,</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>lemma'</span></span><span> </span><span class="quoted"><span>‹</span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.Is_Aggregate|const"><span>Is_Aggregate</span></a><span> </span><span class="free"><span>T</span></span><span>›</span></span><span> </span><span class="quasi_keyword"><span>by</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.Is_Aggregate_def|fact"><span>Is_Aggregate_def</span></a><span class="main"><span>)</span></span><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>,</span></span><span>
       </span><span>SOME</span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>reasoner_group</span></span><span> </span><span class="main"><span>%</span></span><span>is_aggregate</span><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>)</span></span><span>›</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Phi_System/USER_HOME/Current/phi-system/Phi_Logic_Programming_Reasoner/library/reasoner.ML.html#PLPR.\&lt;phi&gt;reason|attribute"><span class="operator"><span>φreason</span></span></a><span> </span><span class="main"><span class="main"><span class="main"><span class="main"><span>%</span></span></span></span></span><span>is_aggregate</span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.Is_Aggregate|const"><span>Is_Aggregate</span></a><span> </span><span class="free"><span>T</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.Is_Aggregate|const"><span>Is_Aggregate</span></a><span> </span><span class="free"><span>U</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.Is_Aggregate|const"><span>Is_Aggregate</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>T</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Prod|const"><span>∗</span></a></span><span> </span><span class="free"><span>U</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.Is_Aggregate_def|fact"><span>Is_Aggregate_def</span></a><span> </span><span class="keyword1"><span class="command"><span>..</span></span></span><span>

</span><span class="comment1"><span>(*
subsection ‹IDE-Interfaces›

term ParamTag

definition Index_Param_Tag :: ‹aggregate_path ⇒ bool› ("𝗂𝗇𝖽𝖾𝗑 𝗉𝖺𝗋𝖺𝗆 _" [1000] 26)
  where "𝗂𝗇𝖽𝖾𝗑 𝗉𝖺𝗋𝖺𝗆 x ≡ True"

lemma Index_Param_Tag_Swap:
  ‹ 𝗉𝖺𝗋𝖺𝗆 P ⟹ 𝗂𝗇𝖽𝖾𝗑 𝗉𝖺𝗋𝖺𝗆 P ›
  unfolding Index_Param_Tag_def ..

ML_file ‹syntax/index_param.ML›

φlang_parser set_index_param 5000 (premises ‹𝗂𝗇𝖽𝖾𝗑 𝗉𝖺𝗋𝖺𝗆 _›) ‹fn (ctxt,sequent) =&gt;
  Scan.pass (Context.Proof ctxt) Synt_Index_Param.index_term_parser &gt;&gt; (fn term =&gt; fn _ =&gt;
      Phi_Sys.set_param term (ctxt, @{thm Index_Param_Tag_Swap} RS sequent))›
*)</span></span><span>


</span><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹First-level Abstraction of Instructions›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="PhiSem_Aggregate_Base.op_get_aggregate|fact"><span class="entity_def" id="PhiSem_Aggregate_Base.op_get_aggregate|thm"><span>op_get_aggregate</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.Is_Aggregate|const"><span>Is_Aggregate</span></a><span> </span><span class="free"><span>T</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.Semantic_Type&apos;|const"><span>Semantic_Type'</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="free"><span>T</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>TY</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.parse_eleidx_input_least1|const"><span>parse_eleidx_input_least1</span></a><span> </span><span class="free"><span>TY</span></span><span> </span><span class="free"><span>input_index</span></span><span> </span><span class="free"><span>sem_idx</span></span><span> </span><span class="free"><span>spec_idx</span></span><span> </span><span class="free"><span>reject</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.\&lt;phi&gt;Aggregate_Getter|const"><span>φAggregate_Getter</span></a><span> </span><span class="free"><span>spec_idx</span></span><span> </span><span class="free"><span>T</span></span><span> </span><span class="free"><span>U</span></span><span> </span><span class="free"><span>f</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="../Phi_System/IDE_CP_Core.html#IDE_CP_Core.report_unprocessed_element_index|const"><span>report_unprocessed_element_index</span></a><span> </span><span class="free"><span>reject</span></span><span> </span><a class="entity_ref" href="../Phi_System/IDE_CP_Core.html#IDE_CP_Core.\&lt;E&gt;\&lt;I&gt;\&lt;H&gt;\&lt;O&gt;\&lt;O&gt;\&lt;K&gt;_none|const"><span>ℰℐℋ𝒪𝒪𝒦_none</span></a><span>
</span><span class="main"><span>⟹</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.\&lt;phi&gt;Procedure_no_exception|const"><span>𝗉𝗋𝗈𝖼</span></a></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.op_get_aggregate|const"><span>op_get_aggregate</span></a><span> </span><span class="free"><span>sem_idx</span></span><span> </span><span class="free"><span>TY</span></span><span> </span><span class="free"><span>rv</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.\&lt;phi&gt;Procedure_no_exception|const"><span>⦃</span></a></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.Val|const"><span>𝗏𝖺𝗅[</span></a></span><span class="free"><span>rv</span></span><span class="main"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.Val|const"><span>]</span></a></span><span> </span><span class="free"><span>T</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.\&lt;phi&gt;Procedure_no_exception|const"><span>⟼</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="keyword1"><span>𝗏𝖺𝗅</span></span><span> </span><span class="free"><span>U</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.\&lt;phi&gt;Procedure_no_exception|const"><span>⦄</span></a></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.op_get_aggregate_def|fact"><span>op_get_aggregate_def</span></a><span> </span><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.Semantic_Type&apos;_def|fact"><span>Semantic_Type'_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_iff|fact"><span>subset_iff</span></a><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.\&lt;phi&gt;Aggregate_Getter_def|fact"><span>φAggregate_Getter_def</span></a><span>
            </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.parse_eleidx_input_def|fact"><span>parse_eleidx_input_def</span></a><span>
            </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.parse_eleidx_input_least1_def|fact"><span>parse_eleidx_input_least1_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="free"><span>rv</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.\&lt;phi&gt;Type_Mapping_def|fact"><span>φType_Mapping_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="quoted"><span>"</span><span class="entity_def" id="PhiSem_Aggregate_Base._op_set_aggregate_|fact"><span class="entity_def" id="PhiSem_Aggregate_Base._op_set_aggregate_|thm"><span>_op_set_aggregate_</span></span></span><span>"</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.Semantic_Type&apos;|const"><span>Semantic_Type'</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="free"><span>T</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>TY</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.parse_eleidx_input_least1|const"><span>parse_eleidx_input_least1</span></a><span> </span><span class="free"><span>TY</span></span><span> </span><span class="free"><span>input_index</span></span><span> </span><span class="free"><span>sem_idx</span></span><span> </span><span class="free"><span>idx</span></span><span> </span><span class="free"><span>reject</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.Semantic_Type&apos;|const"><span>Semantic_Type'</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="free"><span>U</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>TY<span class="hidden">⇩</span><sub>U</sub></span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.is_valid_index_of|const"><span>is_valid_index_of</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="free"><span>TY</span></span><span> </span><span class="free"><span>TY<span class="hidden">⇩</span><sub>U</sub>'</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="../Phi_System/Phi_Logic_Programming_Reasoner.PLPR.html#PLPR.Premise|const"><span>Premise</span></a><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.eval_aggregate_path|const"><span>eval_aggregate_path</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>TY<span class="hidden">⇩</span><sub>U</sub>'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>TY<span class="hidden">⇩</span><sub>U</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.allow_assigning_different_typ|const"><span>allow_assigning_different_typ</span></a><span> </span><span class="free"><span>TY</span></span><span> </span><span class="free"><span>idx</span></span><span class="main"><span>)</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.\&lt;phi&gt;Aggregate_Mapper|const"><span>φAggregate_Mapper</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="free"><span>T</span></span><span> </span><span class="free"><span>T'</span></span><span> </span><span class="free"><span>U'</span></span><span> </span><span class="free"><span>U</span></span><span> </span><span class="free"><span>f</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="../Phi_System/IDE_CP_Core.html#IDE_CP_Core.report_unprocessed_element_index|const"><span>report_unprocessed_element_index</span></a><span> </span><span class="free"><span>reject</span></span><span> </span><a class="entity_ref" href="../Phi_System/IDE_CP_Core.html#IDE_CP_Core.\&lt;E&gt;\&lt;I&gt;\&lt;H&gt;\&lt;O&gt;\&lt;O&gt;\&lt;K&gt;_none|const"><span>ℰℐℋ𝒪𝒪𝒦_none</span></a><span>
</span><span class="main"><span>⟹</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.\&lt;phi&gt;Procedure_no_exception|const"><span>𝗉𝗋𝗈𝖼</span></a></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.op_set_aggregate|const"><span>op_set_aggregate</span></a><span> </span><span class="free"><span>TY</span></span><span> </span><span class="free"><span>TY<span class="hidden">⇩</span><sub>U</sub></span></span><span> </span><span class="free"><span>sem_idx</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>rv</span></span><span class="main"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.\&lt;phi&gt;V_pair|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span class="free"><span>ru</span></span><span class="main"><span>)</span></span><span>
      </span><span class="main"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.\&lt;phi&gt;Procedure_no_exception|const"><span>⦃</span></a></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.Val|const"><span>𝗏𝖺𝗅[</span></a></span><span class="free"><span>rv</span></span><span class="main"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.Val|const"><span>]</span></a></span><span> </span><span class="free"><span>T</span></span><span class="main"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.COMMA|const"><span>❟</span></a></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.Val|const"><span>𝗏𝖺𝗅[</span></a></span><span class="free"><span>ru</span></span><span class="main"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.Val|const"><span>]</span></a></span><span> </span><span class="free"><span>U</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.\&lt;phi&gt;Procedure_no_exception|const"><span>⟼</span></a></span><span> </span><span class="main"><span>λ</span></span><span class="bound"><span>ret</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.Val|const"><span>𝗏𝖺𝗅[</span></a></span><span class="bound"><span>ret</span></span><span class="main"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.Val|const"><span>]</span></a></span><span> </span><span class="free"><span>T'</span></span><span>
        </span><span class="keyword1"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Algebras.Phi_Spec_Pre.html#Phi_Spec_Pre.Subjection|const"><span>𝗌𝗎𝖻𝗃</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>TY<span class="hidden">⇩</span><sub>U</sub>'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>TY<span class="hidden">⇩</span><sub>U</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.\&lt;phi&gt;arg.dest|const"><span>φarg.dest</span></a><span> </span><span class="bound"><span>ret</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="free"><span>TY</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.\&lt;phi&gt;Procedure_no_exception|const"><span>⦄</span></a></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.op_set_aggregate_def|fact"><span>op_set_aggregate_def</span></a><span> </span><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.Semantic_Type&apos;_def|fact"><span>Semantic_Type'_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_iff|fact"><span>subset_iff</span></a><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.\&lt;phi&gt;Aggregate_Mapper_def|fact"><span>φAggregate_Mapper_def</span></a><span> </span><a class="entity_ref" href="../Phi_System/Phi_Logic_Programming_Reasoner.PLPR.html#PLPR.Premise_def|fact"><span>Premise_def</span></a><span>
            </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.parse_eleidx_input_def|fact"><span>parse_eleidx_input_def</span></a><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.is_valid_index_of_def|fact"><span>is_valid_index_of_def</span></a><span>
            </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.parse_eleidx_input_least1_def|fact"><span>parse_eleidx_input_least1_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="free"><span>rv</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="free"><span>ru</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span>
      </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../Phi_System/Calculus_of_Programming.html#Calculus_of_Programming.\&lt;phi&gt;M_Success_P|fact"><span>φM_Success_P</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../Phi_System/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.where|attribute"><span class="operator"><span>where</span></span></a></span></span><span> X</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span></span><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="operator"><span>simplified</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.\&lt;phi&gt;Type_Mapping_def|fact"><span>φType_Mapping_def</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span>
      </span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.index_mod_value_welltyp|fact"><span>index_mod_value_welltyp</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="PhiSem_Aggregate_Base.op_set_aggregate|fact"><span class="entity_def" id="PhiSem_Aggregate_Base.op_set_aggregate|thm"><span>op_set_aggregate</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.Is_Aggregate|const"><span>Is_Aggregate</span></a><span> </span><span class="free"><span>T</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.Semantic_Type&apos;|const"><span>Semantic_Type'</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="free"><span>T</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>TY</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.parse_eleidx_input_least1|const"><span>parse_eleidx_input_least1</span></a><span> </span><span class="free"><span>TY</span></span><span> </span><span class="free"><span>input_index</span></span><span> </span><span class="free"><span>sem_idx</span></span><span> </span><span class="free"><span>idx</span></span><span> </span><span class="free"><span>reject</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.Semantic_Type&apos;|const"><span>Semantic_Type'</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="free"><span>U</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>TY2</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.is_valid_index_of|const"><span>is_valid_index_of</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="free"><span>TY</span></span><span> </span><span class="free"><span>TY2'</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="../Phi_System/Phi_Logic_Programming_Reasoner.PLPR.html#PLPR.Premise|const"><span>Premise</span></a><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.eval_aggregate_path|const"><span>eval_aggregate_path</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>TY2'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>TY2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.allow_assigning_different_typ|const"><span>allow_assigning_different_typ</span></a><span> </span><span class="free"><span>TY</span></span><span> </span><span class="free"><span>idx</span></span><span class="main"><span>)</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.\&lt;phi&gt;Aggregate_Mapper|const"><span>φAggregate_Mapper</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="free"><span>T</span></span><span> </span><span class="free"><span>T'</span></span><span> </span><span class="free"><span>U'</span></span><span> </span><span class="free"><span>U</span></span><span> </span><span class="free"><span>f</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="../Phi_System/IDE_CP_Core.html#IDE_CP_Core.report_unprocessed_element_index|const"><span>report_unprocessed_element_index</span></a><span> </span><span class="free"><span>reject</span></span><span> </span><a class="entity_ref" href="../Phi_System/IDE_CP_Core.html#IDE_CP_Core.\&lt;E&gt;\&lt;I&gt;\&lt;H&gt;\&lt;O&gt;\&lt;O&gt;\&lt;K&gt;_none|const"><span>ℰℐℋ𝒪𝒪𝒦_none</span></a><span>
</span><span class="main"><span>⟹</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.\&lt;phi&gt;Procedure_no_exception|const"><span>𝗉𝗋𝗈𝖼</span></a></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.op_set_aggregate|const"><span>op_set_aggregate</span></a><span> </span><span class="free"><span>TY</span></span><span> </span><span class="free"><span>TY2</span></span><span> </span><span class="free"><span>sem_idx</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>rv</span></span><span class="main"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.\&lt;phi&gt;V_pair|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="free"><span>ru</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.\&lt;phi&gt;Procedure_no_exception|const"><span>⦃</span></a></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.Val|const"><span>𝗏𝖺𝗅[</span></a></span><span class="free"><span>rv</span></span><span class="main"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.Val|const"><span>]</span></a></span><span> </span><span class="free"><span>T</span></span><span class="main"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.COMMA|const"><span>❟</span></a></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.Val|const"><span>𝗏𝖺𝗅[</span></a></span><span class="free"><span>ru</span></span><span class="main"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.Val|const"><span>]</span></a></span><span> </span><span class="free"><span>U</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.\&lt;phi&gt;Procedure_no_exception|const"><span>⟼</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="keyword1"><span>𝗏𝖺𝗅</span></span><span> </span><span class="free"><span>T'</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.\&lt;phi&gt;Procedure_no_exception|const"><span>⦄</span></a></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.\&lt;phi&gt;CONSEQ|fact"><span>φCONSEQ</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base._op_set_aggregate_|fact"><span>_op_set_aggregate_</span></a><span>"</span></span><span> </span><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.view_shift_refl|fact"><span>view_shift_refl</span></a><span> </span><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.view_shift_by_implication|fact"><span>view_shift_by_implication</span></a><span> </span><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.view_shift_refl|fact"><span>view_shift_refl</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>?</span></span></span><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span>
      </span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.Transformation_def|fact"><span>Transformation_def</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>hide_fact</span></span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base._op_set_aggregate_|fact"><span>_op_set_aggregate_</span></a><span>"</span></span><span>

</span><span class="keyword1"><span class="command"><span>proc</span></span></span><span> </span><span class="entity_def" id="PhiSem_Aggregate_Base.op_construct_aggregate_\&lt;phi&gt;app|fact"><span class="entity_def" id="PhiSem_Aggregate_Base.op_construct_aggregate_def|fact"><span class="entity_def" id="PhiSem_Aggregate_Base.op_construct_aggregate_\&lt;phi&gt;app|thm"><span class="entity_def" id="PhiSem_Aggregate_Base.op_construct_aggregate_def|thm"><span class="entity_def" id="PhiSem_Aggregate_Base.op_construct_aggregate_def|axiom"><span class="entity_def" id="PhiSem_Aggregate_Base.op_construct_aggregate|const"><span>op_construct_aggregate</span></span></span></span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>input</span></span></span><span>  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.Void|const"><span>Void</span></a><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>requires</span></span></span><span> </span><span>C</span><span class="main"><span>[</span></span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.\&lt;phi&gt;Aggregate_Constructor_def|fact"><span>φAggregate_Constructor_def</span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../Phi_System/USER_HOME/Current/phi-system/Phi_System/library/system/Phi_Envir.ML.html#IDE_CP_Core.useful|attribute"><span class="operator"><span>useful</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
            </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.\&lt;phi&gt;Aggregate_Constructor|const"><span>φAggregate_Constructor</span></a><span> </span><span class="free"><span>constructor</span></span><span> </span><span class="free"><span>args</span></span><span> </span><span class="free"><span>TY</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="free"><span>T</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>output</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="keyword1"><span>𝗏𝖺𝗅</span></span><span> </span><span class="free"><span>T</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>❴</span></span></span><span>
    </span><a class="entity_ref" href="../Phi_System/PhiSem_Formalization_Tools.html#PhiSem_Formalization_Tools.semantic_assert_\&lt;phi&gt;app|fact"><span>semantic_assert</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>constructor</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.map|const"><span>map</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.\&lt;phi&gt;arg.dest|const"><span>φarg.dest</span></a><span> </span><span class="free"><span>args</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="free"><span>TY</span></span><span>›</span></span></span><span>
    </span><a class="entity_ref" href="../Phi_System/PhiSem_Formalization_Tools.html#PhiSem_Formalization_Tools.semantic_return_\&lt;phi&gt;app|fact"><span>semantic_return</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>constructor</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.map|const"><span>map</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.\&lt;phi&gt;arg.dest|const"><span>φarg.dest</span></a><span> </span><span class="free"><span>args</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.Satisfaction|const"><span>⊨</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="free"><span>T</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>❵</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>


</span><span class="keyword1"><span class="command"><span>proc</span></span></span><span> </span><span class="entity_def" id="PhiSem_Aggregate_Base.synthesis_construct_aggregate_\&lt;phi&gt;app|fact"><span class="entity_def" id="PhiSem_Aggregate_Base.synthesis_construct_aggregate_def|fact"><span class="entity_def" id="PhiSem_Aggregate_Base.synthesis_construct_aggregate_\&lt;phi&gt;app|thm"><span class="entity_def" id="PhiSem_Aggregate_Base.synthesis_construct_aggregate_def|thm"><span class="entity_def" id="PhiSem_Aggregate_Base.synthesis_construct_aggregate_def|axiom"><span class="entity_def" id="PhiSem_Aggregate_Base.synthesis_construct_aggregate|const"><span>synthesis_construct_aggregate</span></span></span></span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>requires</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.\&lt;phi&gt;Aggregate_Constructor_def|fact"><span>φAggregate_Constructor_def</span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../Phi_System/USER_HOME/Current/phi-system/Phi_System/library/system/Phi_Envir.ML.html#IDE_CP_Core.useful|attribute"><span class="operator"><span>useful</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
           </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.\&lt;phi&gt;Aggregate_Constructor_Synth|const"><span>φAggregate_Constructor_Synth</span></a><span> </span><span class="free"><span>constructor</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="free"><span>U</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>TY</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="free"><span>T</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
       </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_19939..19940">C</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="keyword1"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.\&lt;phi&gt;Procedure_no_exception|const"><span>𝗉𝗋𝗈𝖼</span></a></span><span> </span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.\&lt;phi&gt;Procedure_no_exception|const"><span>⦃</span></a></span><span> </span><span class="free"><span>R<span class="hidden">⇩</span><sub>0</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.\&lt;phi&gt;Procedure_no_exception|const"><span>⟼</span></a></span><span> </span><span class="main"><span>λ</span></span><span class="bound"><span>ret</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.Vals|const"><span>𝗏𝖺𝗅𝗌[</span></a></span><span class="bound"><span>ret</span></span><span class="main"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.Vals|const"><span>]</span></a></span><span> </span><span class="free"><span>U</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.ALWAYS_REMAINS|const"><span>𝗋𝖾𝗆𝖺𝗂𝗇𝗌</span></a></span><span> </span><span class="free"><span>R<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.\&lt;phi&gt;Procedure_no_exception|const"><span>⦄</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_System/Phi_Logic_Programming_Reasoner.PLPR.html#PLPR.Action_Tag|const"><span>@tag</span></a></span><span> </span><a class="entity_ref" href="../Phi_System/IDE_CP_Core.html#IDE_CP_Core.synthesis|const"><span>synthesis</span></a><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>input</span></span></span><span>  </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>R<span class="hidden">⇩</span><sub>0</sub></span></span><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>output</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="keyword1"><span>𝗏𝖺𝗅</span></span><span> </span><span class="free"><span>T</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.ALWAYS_REMAINS|const"><span>𝗋𝖾𝗆𝖺𝗂𝗇𝗌</span></a></span><span> </span><span class="free"><span>R<span class="hidden">⇩</span><sub>1</sub></span></span><span>›</span></span></span><span>
  </span><span class="main"><span>@tag</span></span><span> </span><span class="quoted"><a class="entity_ref" href="../Phi_System/IDE_CP_Core.html#IDE_CP_Core.synthesis|const"><span>synthesis</span></a></span><span>
  </span><span class="keyword1"><span class="command"><span>❴</span></span></span><span>
    </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#offset_19939..19940"><span>C</span></a><span> </span><a class="entity_ref" href="../Phi_System/PhiSem_Formalization_Tools.html#PhiSem_Formalization_Tools.semantic_local_values_nochk_\&lt;phi&gt;app|fact"><span>semantic_local_values_nochk</span></a><span>
    </span><a class="entity_ref" href="../Phi_System/PhiSem_Formalization_Tools.html#PhiSem_Formalization_Tools.semantic_assert_\&lt;phi&gt;app|fact"><span>semantic_assert</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>constructor</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.\&lt;phi&gt;arg.dest|const"><span>φarg.dest</span></a><span> </span><span class="skolem"><span>𝗏0</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="free"><span>TY</span></span><span>›</span></span></span><span>
    </span><a class="entity_ref" href="../Phi_System/PhiSem_Formalization_Tools.html#PhiSem_Formalization_Tools.semantic_return_\&lt;phi&gt;app|fact"><span>semantic_return</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>constructor</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.\&lt;phi&gt;arg.dest|const"><span>φarg.dest</span></a><span> </span><span class="skolem"><span>𝗏0</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.Satisfaction|const"><span>⊨</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="free"><span>T</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>❵</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>φreasoner_group</span></span></span><span> </span><span>φsynthesis_ag</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>%</span></span><span>φsynthesis_cut</span><span class="main"><span>,</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>%</span></span><span>φsynthesis_cut</span><span class="main"><span>,</span></span><span> </span><span class="main"><span>%</span></span><span>φsynthesis_cut</span><span class="main"><span>+</span></span><span>300</span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span>
  </span><span class="quoted"><span>‹synthesis for aggregate structures›</span></span><span>



</span><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Syntax Base›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Structure and Tuple›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>nonterminal</span></span></span><span> </span><span class="quoted"><span>"</span><span class="entity_def" id="offset_20445..20458">φ_tuple_args_</span><span>"</span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span>"</span><span class="entity_def" id="offset_20465..20477">φ_tuple_arg_</span><span>"</span></span><span>

</span><span class="keyword1"><span class="command"><span>consts</span></span></span><span> </span><span class="entity_def" id="PhiSem_Aggregate_Base.\&lt;phi&gt;_Empty_Tuple_sugar|const"><span>φ_Empty_Tuple_sugar</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.VAL|type"><span>VAL</span></a><span class="main"><span>,</span></span><span> </span><span class="tfree"><span>'any</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;|type"><span>φ</span></a><span>›</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>⦃</span></span><span> </span><span class="keyword1"><span>⦄</span></span><span>"</span></span><span class="main"><span>)</span></span><span> </span><span class="comment1"><span>― ‹A syntax sugar to be overloaded›</span></span><span>

</span><span class="keyword1"><span class="command"><span>syntax</span></span></span><span> </span><span class="quoted"><span>"_φTuple"</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#offset_20445..20458"><span>φ_tuple_args_</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span>logic</span><span>›</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>⦃</span></span><span> _ </span><span class="keyword1"><span>⦄</span></span><span>"</span></span><span class="main"><span>)</span></span><span>
       </span><span class="quoted"><span>"_φtuple_arg"</span></span><span>  </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#offset_20465..20477"><span>φ_tuple_arg_</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#offset_20445..20458"><span>φ_tuple_args_</span></a><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"_"</span></span><span class="main"><span>)</span></span><span>
       </span><span class="quoted"><span>"_φtuple_args"</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#offset_20465..20477"><span>φ_tuple_arg_</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#offset_20445..20458"><span>φ_tuple_args_</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#offset_20445..20458"><span>φ_tuple_args_</span></a><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"_</span><span class="keyword1"><span>,</span></span><span class="keyword3"><span>/ </span></span><span>_"</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>translations</span></span></span><span>
  </span><span class="quoted"><span>"_φTuple </span><span class="main"><span>(</span></span><span>_φtuple_args </span><span class="free"><span>y</span></span><span> </span><span class="free"><span>z</span></span><span class="main"><span>)</span></span><span>"</span></span><span> </span><span class="main"><span>⇌</span></span><span> </span><span class="quoted"><span>"</span><span class="keyword1"><span>CONST</span></span><span> </span><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Prod|const"><span>φProd</span></a><span> </span><span class="main"><span>(</span></span><span>_φTuple </span><span class="main"><span>(</span></span><span>_φtuple_arg </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>_φTuple </span><span class="free"><span>z</span></span><span class="main"><span>)</span></span><span>"</span></span><span>

</span><span class="keyword1"><span class="command"><span>ML</span></span></span><span> </span><span class="quoted"><span>‹</span><span class="keyword1"><span class="keyword"><span>fun</span></span></span><span> </span><span class="entity"><span>strip_phi_tuple_args</span></span><span> </span><span class="main"><span>(</span></span><span>Const</span><span class="main"><span>(</span></span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">syntax_const</span><span class="hidden">&gt;</span></span></span><span>‹_φtuple_args›</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>_</span></span><span class="main"><span>)</span></span><span> </span><span>$</span><span> </span><span class="entity"><span>x</span></span><span> </span><span>$</span><span> </span><span class="entity"><span>L</span></span><span class="main"><span>)</span></span><span>
          </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>x</span></span><span> </span><span>::</span><span> </span><span class="entity"><span>strip_phi_tuple_args</span></span><span> </span><span class="entity"><span>L</span></span><span>
      </span><span class="main"><span>|</span></span><span> </span><span class="entity"><span>strip_phi_tuple_args</span></span><span> </span><span class="main"><span>(</span></span><span>Const</span><span class="main"><span>(</span></span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">syntax_const</span><span class="hidden">&gt;</span></span></span><span>‹_φtuple_arg›</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>_</span></span><span class="main"><span>)</span></span><span> </span><span>$</span><span> </span><span class="entity"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>[</span></span><span class="entity"><span>x</span></span><span class="main"><span>]</span></span><span>
      </span><span class="main"><span>|</span></span><span> </span><span class="entity"><span>strip_phi_tuple_args</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>error</span><span> </span><span class="inner_quoted"><span>"Bad Syntax"</span></span><span>›</span></span><span>


</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Access to Element Field›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>consts</span></span></span><span> </span><span class="entity_def" id="PhiSem_Aggregate_Base.access_to_ele_synt|const"><span>access_to_ele_synt</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'c</span></span><span>›</span></span></span><span>
    </span><span class="comment1"><span>― ‹A syntax sugar to be overloaded›</span></span><span>
</span><span class="keyword1"><span class="command"><span>syntax</span></span></span><span> </span><span class="quoted"><span>"_access_to_ele_synt_"</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span>logic</span><span> </span><span class="main"><span>⇒</span></span><span> </span><span>φ_ag_idx_</span><span> </span><span class="main"><span>⇒</span></span><span> </span><span>logic</span><span>›</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>infixl</span></span></span><span> </span><span class="quoted"><span>"</span><span class="keyword1"><span>‣</span></span><span>"</span></span><span> 55</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>parse_translation</span></span></span><span> </span><span class="quoted"><span>‹</span><span class="main"><span>[</span></span><span>
  </span><span class="main"><span>(</span></span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">syntax_const</span><span class="hidden">&gt;</span></span></span><span>‹_access_to_ele_synt_›</span></span><span class="main"><span>,</span></span><span> </span><span class="keyword1"><span class="keyword"><span>fn</span></span></span><span> </span><span class="entity"><span>ctxt</span></span><span> </span><span class="main"><span>=&gt;</span></span><span> </span><span class="keyword1"><span class="keyword"><span>fn</span></span></span><span> </span><span class="main"><span>[</span></span><span class="entity"><span>a</span></span><span class="main"><span>,</span></span><span class="entity"><span>x</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>=&gt;</span></span><span>
      </span><span>Const</span><span class="main"><span>(</span></span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">const_syntax</span><span class="hidden">&gt;</span></span></span><span>‹</span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.access_to_ele_synt|const"><span>access_to_ele_synt</span></a><span>›</span></span><span class="main"><span>,</span></span><span> </span><span>dummyT</span><span class="main"><span>)</span></span><span> </span><span>$</span><span> </span><span class="entity"><span>a</span></span><span> </span><span>$</span><span> </span><span class="entity"><span>Phi_Aggregate_Syntax.parse_index</span></span><span> </span><span class="entity"><span>x</span></span><span class="main"><span>)</span></span><span>
</span><span class="main"><span>]</span></span><span>›</span></span><span>

</span><span class="keyword1"><span class="command"><span>print_translation</span></span></span><span> </span><span class="quoted"><span>‹</span><span class="main"><span>[</span></span><span>
  </span><span class="main"><span>(</span></span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">const_syntax</span><span class="hidden">&gt;</span></span></span><span>‹</span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.access_to_ele_synt|const"><span>access_to_ele_synt</span></a><span>›</span></span><span class="main"><span>,</span></span><span> </span><span class="keyword1"><span class="keyword"><span>fn</span></span></span><span> </span><span class="entity"><span>ctxt</span></span><span> </span><span class="main"><span>=&gt;</span></span><span> </span><span class="keyword1"><span class="keyword"><span>fn</span></span></span><span> </span><span class="main"><span>[</span></span><span class="entity"><span>a</span></span><span class="main"><span>,</span></span><span class="entity"><span>x</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>=&gt;</span></span><span>
      </span><span>Const</span><span class="main"><span>(</span></span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">syntax_const</span><span class="hidden">&gt;</span></span></span><span>‹_access_to_ele_synt_›</span></span><span class="main"><span>,</span></span><span> </span><span>dummyT</span><span class="main"><span>)</span></span><span> </span><span>$</span><span> </span><span class="entity"><span>a</span></span><span> </span><span>$</span><span> </span><span class="entity"><span>Phi_Aggregate_Syntax.print_index</span></span><span> </span><span class="entity"><span>x</span></span><span> </span><span class="main"><span>)</span></span><span>
</span><span class="main"><span>]</span></span><span>›</span></span><span>
 
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹We can use </span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">term</span><span class="hidden">&gt;</span></span></span><span class="quoted"><span>‹</span><span class="free"><span>p</span></span><span> </span><span class="main"><span>‣</span></span><span> field›</span></span></span><span> to access the address of the element named </span><span class="antiquoted"><span class="raw_text"><span class="operator"><span>‹</span></span><span>field›</span></span></span><span> in the
  object pointed by </span><span class="antiquoted"><span class="raw_text"><span class="operator"><span>‹</span></span><span>p›</span></span></span><span>.
  We may also use </span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">term</span><span class="hidden">&gt;</span></span></span><span class="quoted"><span>‹</span><span class="free"><span>p</span></span><span> </span><span class="main"><span>‣</span></span><span> </span><span class="numeral"><span>2</span></span><span>›</span></span></span><span> to access the address of the 2nd element.
  Use </span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">term</span><span class="hidden">&gt;</span></span></span><span class="quoted"><span>‹</span><span class="free"><span>p</span></span><span> </span><span class="main"><span>‣</span></span><span> </span><span class="keyword1"><span>LOGIC_IDX(</span></span><span class="free"><span>var</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span> to access the element </span><span class="antiquoted"><span class="raw_text"><span class="operator"><span>‹</span></span><span>var›</span></span></span><span> which is a logical variable›</span></span></span><span>



</span><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹IDE Interface›</span></span></span><span>

</span><span class="comment1"><span>(* declare_φlang_operator infix 40 := *)</span></span><span>

</span><span class="keyword1"><span class="command"><span>φoverloads</span></span></span><span> </span><span class="quoted"><span>"</span><span class="entity_def" id="PhiSem_Aggregate_Base.\&lt;tribullet&gt;_\&lt;phi&gt;app|fact"><span>‣</span></span><span>"</span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span>"</span><span class="entity_def" id="PhiSem_Aggregate_Base.:=_\&lt;phi&gt;app|fact"><span>:=</span></span><span>"</span></span><span>

</span><span class="keyword1"><span class="command"><span>declare</span></span></span><span> </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.op_get_aggregate|fact"><span>op_get_aggregate</span></a><span class="main"><span>[</span></span><a class="entity_ref" href="../Phi_System/USER_HOME/Current/phi-system/Phi_System/library/system/app_rules.ML.html#IDE_CP_Core.\&lt;phi&gt;overload|attribute"><span class="operator"><span>φoverload</span></span></a><span> </span><span class="quoted"><span>"</span><span>‣</span><span>"</span></span><span class="main"><span>]</span></span><span>
        </span><a class="entity_ref" href="PhiSem_Aggregate_Base.html#PhiSem_Aggregate_Base.op_set_aggregate|fact"><span>op_set_aggregate</span></a><span class="main"><span>[</span></span><a class="entity_ref" href="../Phi_System/USER_HOME/Current/phi-system/Phi_System/library/system/app_rules.ML.html#IDE_CP_Core.\&lt;phi&gt;overload|attribute"><span class="operator"><span>φoverload</span></span></a><span> </span><span class="quoted"><span>"</span><span>:=</span><span>"</span></span><span class="main"><span>]</span></span><span>

</span><span class="keyword1"><span class="command"><span>φreasoner_group</span></span></span><span> </span><span>φparser_lbrack</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>500</span><span class="main"><span>,</span></span><span> </span><span class="main"><span>[</span></span><span>500</span><span class="main"><span>,</span></span><span>500</span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span>‹›</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span>φparser_rbrack</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>500</span><span class="main"><span>,</span></span><span class="main"><span>[</span></span><span>500</span><span class="main"><span>,</span></span><span>500</span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span>‹›</span></span><span>

</span><span class="keyword1"><span class="command"><span>ML_file</span></span></span><span> </span><span class="quoted"><a href="USER_HOME/Current/phi-system/Phi_Semantics/library/generic_element_access.ML.html"><span>‹library/generic_element_access.ML›</span></a></span><span>

</span><span class="keyword1"><span class="command"><span>φlang_parser</span></span></span><span> aggregate_getter_setter </span><span class="main"><span>(</span></span><span class="main"><span>%</span></span><span>φparser_lbrack</span><span class="main"><span>,</span></span><span> </span><span class="main"><span>%</span></span><span>φlang_top</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>[</span></span><span class="quoted"><span>"["</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span class="quoted"><span>‹</span><span class="keyword1"><span>PROP</span></span><span> </span><span class="main"><span>_</span></span><span>›</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="quoted"><span>‹ </span><span class="keyword1"><span class="keyword"><span>fn</span></span></span><span> </span><span class="entity"><span>s</span></span><span> </span><span class="main"><span>=&gt;</span></span><span> </span><span>Parse.position</span><span> </span><span class="antiquoted"><span class="entity"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">keyword</span><span class="hidden">&gt;</span></span></span><span>‹</span><span class="keyword2"><span>[</span></span><span>›</span></span></span><span> </span><span>&gt;&gt;</span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span class="keyword"><span>fn</span></span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>_</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>pos</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=&gt;</span></span><span> </span><span class="keyword1"><span class="keyword"><span>fn</span></span></span><span> </span><span class="entity"><span>cfg</span></span><span> </span><span class="main"><span>=&gt;</span></span><span>
    </span><span class="entity"><span>Generic_Element_Access.open_bracket_opr</span></span><span> </span><span class="entity"><span>pos</span></span><span> </span><span class="entity"><span>cfg</span></span><span> </span><span class="entity"><span>s</span></span><span class="main"><span>)</span></span><span> ›</span></span><span>

</span><span class="keyword1"><span class="command"><span>φlang_parser</span></span></span><span> aggregate_getter_end </span><span class="main"><span>(</span></span><span class="main"><span>%</span></span><span>φparser_rbrack</span><span class="main"><span>,</span></span><span> </span><span class="main"><span>%</span></span><span>φlang_top</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>[</span></span><span class="quoted"><span>"]"</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span class="quoted"><span>‹</span><span class="keyword1"><span>PROP</span></span><span> </span><span class="main"><span>_</span></span><span>›</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="quoted"><span>‹ </span><span class="keyword1"><span class="keyword"><span>fn</span></span></span><span> </span><span class="entity"><span>opr_ctxt</span></span><span> </span><span class="main"><span>=&gt;</span></span><span> </span><span>Parse.position</span><span> </span><span class="antiquoted"><span class="entity"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">keyword</span><span class="hidden">&gt;</span></span></span><span>‹</span><span class="keyword2"><span>]</span></span><span>›</span></span></span><span> </span><span>&gt;&gt;</span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span class="keyword"><span>fn</span></span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>_</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>pos</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=&gt;</span></span><span> </span><span class="keyword1"><span class="keyword"><span>fn</span></span></span><span> </span><span class="entity"><span>cfg</span></span><span> </span><span class="main"><span>=&gt;</span></span><span> </span><span class="main"><span>(</span></span><span>
    </span><span class="entity"><span>Generic_Element_Access.close_bracket</span></span><span> </span><span class="entity"><span>pos</span></span><span> </span><span class="entity"><span>cfg</span></span><span> </span><span class="entity"><span>opr_ctxt</span></span><span>
</span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> ›</span></span><span>

</span><span class="keyword1"><span class="command"><span>φlang_parser</span></span></span><span> construct_aggregate </span><span class="main"><span>(</span></span><span class="main"><span>%</span></span><span>φparser_lbrack</span><span class="main"><span>,</span></span><span> </span><span class="main"><span>%</span></span><span>φlang_top</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>[</span></span><span class="quoted"><span>"⦃"</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span class="quoted"><span>‹</span><span class="keyword1"><span>PROP</span></span><span> </span><span class="main"><span>_</span></span><span>›</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="quoted"><span>‹ </span><span class="keyword1"><span class="keyword"><span>fn</span></span></span><span> </span><span class="entity"><span>s</span></span><span> </span><span class="main"><span>=&gt;</span></span><span> </span><span>Parse.position</span><span> </span><span class="antiquoted"><span class="entity"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">keyword</span><span class="hidden">&gt;</span></span></span><span>‹</span><span class="keyword2"><span>⦃</span></span><span>›</span></span></span><span> </span><span>--</span><span> </span><span>Scan.option</span><span> </span><span class="main"><span>(</span></span><span>Parse.short_ident</span><span> </span><span>--|</span><span> </span><span class="antiquoted"><span class="entity"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">keyword</span><span class="hidden">&gt;</span></span></span><span>‹</span><span class="keyword2"><span>:</span></span><span>›</span></span></span><span class="main"><span>)</span></span><span>
</span><span>&gt;&gt;</span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span class="keyword"><span>fn</span></span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>_</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>pos</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>arg_name</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=&gt;</span></span><span> </span><span class="keyword1"><span class="keyword"><span>fn</span></span></span><span> </span><span class="entity"><span>cfg</span></span><span> </span><span class="main"><span>=&gt;</span></span><span>
    </span><span class="entity"><span>Generic_Element_Access.gen_constructor</span></span><span> </span><span class="inner_quoted"><span>""</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="inner_quoted"><span>"⦃"</span></span><span class="main"><span>,</span></span><span class="entity"><span>pos</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>arg_name</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>pos</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="entity"><span>cfg</span></span><span> </span><span class="entity"><span>s</span></span><span class="main"><span>)</span></span><span> ›</span></span><span>

</span><span class="keyword1"><span class="command"><span>φlang_parser</span></span></span><span> construct_aggregate_end </span><span class="main"><span>(</span></span><span class="main"><span>%</span></span><span>φparser_rbrack</span><span class="main"><span>,</span></span><span> </span><span class="main"><span>%</span></span><span>φlang_top</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>[</span></span><span class="quoted"><span>"⦄"</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span class="quoted"><span>‹</span><span class="keyword1"><span>PROP</span></span><span> </span><span class="main"><span>_</span></span><span>›</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="quoted"><span>‹ </span><span class="keyword1"><span class="keyword"><span>fn</span></span></span><span> </span><span class="entity"><span>opr_ctxt</span></span><span> </span><span class="main"><span>=&gt;</span></span><span> </span><span>Parse.position</span><span> </span><span class="antiquoted"><span class="entity"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">keyword</span><span class="hidden">&gt;</span></span></span><span>‹</span><span class="keyword2"><span>⦄</span></span><span>›</span></span></span><span> </span><span>&gt;&gt;</span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span class="keyword"><span>fn</span></span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>_</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>pos</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=&gt;</span></span><span> </span><span class="keyword1"><span class="keyword"><span>fn</span></span></span><span> </span><span class="entity"><span>cfg</span></span><span> </span><span class="main"><span>=&gt;</span></span><span> </span><span class="main"><span>(</span></span><span>
    </span><span class="entity"><span>Phi_Opr_Stack.check_meta_apply_balance</span></span><span> </span><span class="inner_quoted"><span>"⦃"</span></span><span> </span><span class="entity"><span>pos</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>#</span></span><span class="inner_numeral"><span>1</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>#</span></span><span class="inner_numeral"><span>1</span></span><span> </span><span class="entity"><span>opr_ctxt</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>;</span></span><span>
    </span><span class="entity"><span>Phi_Opr_Stack.close_parenthesis</span></span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>cfg</span></span><span class="main"><span>,</span></span><span> </span><span>NONE</span><span class="main"><span>,</span></span><span> </span><span>false</span><span class="main"><span>)</span></span><span> </span><span class="entity"><span>opr_ctxt</span></span><span>
</span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> ›</span></span><span>

</span><span class="keyword1"><span class="command"><span>φlang_parser</span></span></span><span> triangle_operator </span><span class="main"><span>(</span></span><span class="main"><span>%</span></span><span>φparser_unique</span><span class="main"><span>,</span></span><span> </span><span class="main"><span>%</span></span><span>φlang_top</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>[</span></span><span class="quoted"><span>"‣"</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span class="quoted"><span>‹</span><span class="keyword1"><span>PROP</span></span><span> </span><span class="main"><span>_</span></span><span>›</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="quoted"><span>‹ </span><span class="keyword1"><span class="keyword"><span>fn</span></span></span><span> </span><span class="entity"><span>opr_ctxt</span></span><span> </span><span class="main"><span>=&gt;</span></span><span> </span><span>Parse.position</span><span> </span><span class="antiquoted"><span class="entity"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">keyword</span><span class="hidden">&gt;</span></span></span><span>‹</span><span class="keyword2"><span>‣</span></span><span>›</span></span></span><span> </span><span>&gt;&gt;</span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span class="keyword"><span>fn</span></span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>_</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>pos</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=&gt;</span></span><span> </span><span class="keyword1"><span class="keyword"><span>fn</span></span></span><span> </span><span class="entity"><span>cfg</span></span><span> </span><span class="main"><span>=&gt;</span></span><span> </span><span class="main"><span>(</span></span><span>
  </span><span class="entity"><span>Phi_Opr_Stack.push_meta_operator</span></span><span> </span><span class="entity"><span>cfg</span></span><span>
            </span><span class="main"><span>(</span></span><span class="entity"><span>Generic_Element_Access.mk_dot_opr</span></span><span> </span><span class="entity"><span>pos</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>#</span></span><span class="inner_numeral"><span>1</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>#</span></span><span class="inner_numeral"><span>1</span></span><span> </span><span class="entity"><span>opr_ctxt</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="entity"><span>opr_ctxt</span></span><span>
</span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> ›</span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹We differentiate </span><span class="antiquoted"><span class="raw_text"><span class="operator"><span>‹</span></span><span>←›</span></span></span><span> and </span><span class="antiquoted"><span class="raw_text"><span class="operator"><span>‹</span></span><span>:=›</span></span></span><span>.
  </span><span class="antiquoted"><span class="raw_text"><span class="operator"><span>‹</span></span><span>←›</span></span></span><span> is used to update the value of a local variable.
  </span><span class="antiquoted"><span class="raw_text"><span class="operator"><span>‹</span></span><span>:=›</span></span></span><span> is used to change the value of a memory object.
  Without this differentiation, ambiguity occurs when we have a local variable of a pointer
  pointing to a memory object which also stores a pointer, and an assignment can ambiguously refer
  to updating the variable or writing to the memory object.
›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>ML</span></span></span><span> </span><span class="quoted"><span>‹
</span><span class="keyword1"><span class="keyword"><span>fun</span></span></span><span> </span><span class="entity"><span>dot_opr_chk_left_precedence</span></span><span> </span><span class="entity"><span>prio</span></span><span> </span><span class="entity"><span>pos</span></span><span> </span><span class="entity"><span>oprs</span></span><span> </span><span class="main"><span>=</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>let</span></span></span><span> </span><span class="keyword3"><span class="keyword"><span>open</span></span></span><span> </span><span>Phi_Opr_Stack</span><span>
      </span><span class="keyword1"><span class="keyword"><span>fun</span></span></span><span> </span><span class="entity"><span>prec_of</span></span><span> </span><span class="entity"><span>first</span></span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>Meta_Opr</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>_</span></span><span class="main"><span>,</span></span><span class="main"><span>_</span></span><span class="main"><span>,</span></span><span class="main"><span>(</span></span><span class="inner_quoted"><span>"$"</span></span><span class="main"><span>,</span></span><span class="main"><span>_</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span class="main"><span>_</span></span><span class="main"><span>,</span></span><span class="main"><span>_</span></span><span class="main"><span>,</span></span><span class="main"><span>_</span></span><span class="main"><span>,</span></span><span class="main"><span>_</span></span><span class="main"><span>)</span></span><span> </span><span>::</span><span> </span><span class="entity"><span>L</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span>
            </span><span class="keyword2"><span class="keyword"><span>let</span></span></span><span> </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>p</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>precedence_of</span></span><span> </span><span class="entity"><span>L</span></span><span>
             </span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="entity"><span>p</span></span><span> </span><span>&gt;=</span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>priority</span></span><span> </span><span class="main"><span>%</span></span><span>φlang_dot_opr</span><span class="antiquote"><span>}</span></span></span></span><span>
                </span><span class="keyword2"><span class="keyword"><span>then</span></span></span><span> </span><span class="entity"><span>prec_of</span></span><span> </span><span>false</span><span> </span><span class="entity"><span>L</span></span><span>
                </span><span class="keyword2"><span class="keyword"><span>else</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="entity"><span>p</span></span><span> </span><span>&lt;</span><span> </span><span class="entity"><span>prio</span></span><span>
                </span><span class="keyword2"><span class="keyword"><span>then</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="entity"><span>first</span></span><span>
                  </span><span class="keyword2"><span class="keyword"><span>then</span></span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>priority</span></span><span> </span><span class="quasi_keyword"><span>loose</span></span><span> </span><span class="main"><span>%</span></span><span>φlang_push_val</span><span class="main"><span>+</span></span><span>1</span><span class="antiquote"><span>}</span></span></span></span><span>
                  </span><span class="keyword2"><span class="keyword"><span>else</span></span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>priority</span></span><span> </span><span class="quasi_keyword"><span>loose</span></span><span> </span><span class="main"><span>%</span></span><span>φlang_dot_opr</span><span class="main"><span>+</span></span><span>1</span><span class="antiquote"><span>}</span></span></span></span><span>
                </span><span class="keyword2"><span class="keyword"><span>else</span></span></span><span> </span><span class="entity"><span>prio</span></span><span>
            </span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>
        </span><span class="main"><span>|</span></span><span> </span><span class="entity"><span>prec_of</span></span><span> </span><span class="entity"><span>first</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span>
            </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="entity"><span>first</span></span><span>
            </span><span class="keyword2"><span class="keyword"><span>then</span></span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>priority</span></span><span> </span><span class="quasi_keyword"><span>loose</span></span><span> </span><span class="main"><span>%</span></span><span>φlang_push_val</span><span class="main"><span>+</span></span><span>1</span><span class="antiquote"><span>}</span></span></span></span><span>
            </span><span class="keyword2"><span class="keyword"><span>else</span></span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>priority</span></span><span> </span><span class="quasi_keyword"><span>loose</span></span><span> </span><span class="main"><span>%</span></span><span>φlang_dot_opr</span><span class="main"><span>+</span></span><span>1</span><span class="antiquote"><span>}</span></span></span></span><span>
        </span><span class="main"><span>|</span></span><span> </span><span class="entity"><span>prec_of</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>Meta_Opr</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>_</span></span><span class="main"><span>,</span></span><span class="main"><span>_</span></span><span class="main"><span>,</span></span><span class="main"><span>(</span></span><span class="inner_quoted"><span>"‣"</span></span><span class="main"><span>,</span></span><span class="main"><span>_</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span class="main"><span>_</span></span><span class="main"><span>,</span></span><span class="main"><span>_</span></span><span class="main"><span>,</span></span><span class="main"><span>_</span></span><span class="main"><span>,</span></span><span class="main"><span>_</span></span><span class="main"><span>)</span></span><span> </span><span>::</span><span> </span><span class="entity"><span>L</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>prec_of</span></span><span> </span><span>false</span><span> </span><span class="entity"><span>L</span></span><span>
        </span><span class="main"><span>|</span></span><span> </span><span class="entity"><span>prec_of</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>Meta_Opr</span></span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>pr</span></span><span class="main"><span>,</span></span><span class="main"><span>_</span></span><span class="main"><span>,</span></span><span class="main"><span>_</span></span><span class="main"><span>,</span></span><span class="main"><span>_</span></span><span class="main"><span>,</span></span><span class="main"><span>_</span></span><span class="main"><span>,</span></span><span class="main"><span>_</span></span><span class="main"><span>,</span></span><span class="main"><span>_</span></span><span class="main"><span>)</span></span><span> </span><span>::</span><span> </span><span class="entity"><span>L</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span>
            </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="entity"><span>pr</span></span><span> </span><span>&gt;</span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>priority</span></span><span> </span><span class="main"><span>%</span></span><span>φlang_app</span><span class="antiquote"><span>}</span></span></span></span><span>
            </span><span class="keyword2"><span class="keyword"><span>then</span></span></span><span> </span><span class="entity"><span>prec_of</span></span><span> </span><span>false</span><span> </span><span class="entity"><span>L</span></span><span>
            </span><span class="keyword2"><span class="keyword"><span>else</span></span></span><span> </span><span class="entity"><span>Generic_Element_Access.err_assignment</span></span><span> </span><span class="entity"><span>pos</span></span><span>
        </span><span class="main"><span>|</span></span><span> </span><span class="entity"><span>prec_of</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>Opr</span></span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>pr</span></span><span class="main"><span>,</span></span><span class="main"><span>_</span></span><span class="main"><span>,</span></span><span class="main"><span>_</span></span><span class="main"><span>,</span></span><span class="main"><span>_</span></span><span class="main"><span>,</span></span><span class="main"><span>_</span></span><span class="main"><span>,</span></span><span class="main"><span>_</span></span><span class="main"><span>)</span></span><span> </span><span>::</span><span> </span><span class="entity"><span>L</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span>
            </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="entity"><span>pr</span></span><span> </span><span>&gt;</span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>priority</span></span><span> </span><span class="main"><span>%</span></span><span>φlang_app</span><span class="antiquote"><span>}</span></span></span></span><span>
            </span><span class="keyword2"><span class="keyword"><span>then</span></span></span><span> </span><span class="entity"><span>prec_of</span></span><span> </span><span>false</span><span> </span><span class="entity"><span>L</span></span><span>
            </span><span class="keyword2"><span class="keyword"><span>else</span></span></span><span> </span><span class="entity"><span>Generic_Element_Access.err_assignment</span></span><span> </span><span class="entity"><span>pos</span></span><span>
        </span><span class="main"><span>|</span></span><span> </span><span class="entity"><span>prec_of</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>prio</span></span><span>
   </span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><span class="entity"><span>prec_of</span></span><span> </span><span>true</span><span> </span><span class="entity"><span>oprs</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>
›</span></span><span>

</span><span class="keyword1"><span class="command"><span>φlang_parser</span></span></span><span> assignment_opr </span><span class="main"><span>(</span></span><span class="main"><span>%</span></span><span>φparser_left_arrow</span><span class="main"><span>,</span></span><span> </span><span class="main"><span>%</span></span><span>φlang_top</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>[</span></span><span class="quoted"><span>"←"</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span class="quoted"><span>‹</span><span class="keyword1"><span>PROP</span></span><span> </span><span class="main"><span>_</span></span><span>›</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="quoted"><span>‹ </span><span class="keyword1"><span class="keyword"><span>fn</span></span></span><span> </span><span class="entity"><span>opr_ctxt</span></span><span> </span><span class="main"><span>=&gt;</span></span><span> </span><span>Parse.position</span><span> </span><span class="antiquoted"><span class="entity"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">keyword</span><span class="hidden">&gt;</span></span></span><span>‹</span><span class="keyword2"><span>←</span></span><span>›</span></span></span><span> </span><span>&gt;&gt;</span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span class="keyword"><span>fn</span></span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>_</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>pos</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=&gt;</span></span><span> </span><span class="keyword1"><span class="keyword"><span>fn</span></span></span><span> </span><span class="entity"><span>cfg</span></span><span> </span><span class="main"><span>=&gt;</span></span><span> </span><span class="main"><span>(</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>let</span></span></span><span> </span><span class="keyword3"><span class="keyword"><span>open</span></span></span><span> </span><span>Phi_Opr_Stack</span><span>
    </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>prio</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>dot_opr_chk_left_precedence</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>priority</span></span><span> </span><span class="main"><span>%</span></span><span>φlang_assignment</span><span class="antiquote"><span>}</span></span></span></span><span> </span><span class="entity"><span>pos</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>#</span></span><span class="inner_numeral"><span>1</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>#</span></span><span class="inner_numeral"><span>1</span></span><span> </span><span class="entity"><span>opr_ctxt</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
 </span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><span class="entity"><span>push_meta_operator</span></span><span> </span><span class="entity"><span>cfg</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="entity"><span>prio</span></span><span class="main"><span>,</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>priority</span></span><span> </span><span class="main"><span>%</span></span><span>φlang_assignment</span><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>VAR_ARITY_IN_OPSTACK</span></span><span class="main"><span>,</span></span><span class="inner_numeral"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>(</span></span><span class="inner_quoted"><span>"←"</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>pos</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span> </span><span>NONE</span><span class="main"><span>,</span></span><span>
                       </span><span class="entity"><span>Generic_Element_Access.dot_triangle_assignment</span></span><span class="main"><span>)</span></span><span> </span><span class="entity"><span>opr_ctxt</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>
</span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> ›</span></span><span>

</span><span class="keyword1"><span class="command"><span>φlang_parser</span></span></span><span> update_opr </span><span class="main"><span>(</span></span><span class="main"><span>%</span></span><span>φparser_left_arrow</span><span class="main"><span>,</span></span><span> </span><span class="main"><span>%</span></span><span>φlang_top</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>[</span></span><span class="quoted"><span>":="</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span class="quoted"><span>‹</span><span class="keyword1"><span>PROP</span></span><span> </span><span class="main"><span>_</span></span><span>›</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="quoted"><span>‹ </span><span class="keyword1"><span class="keyword"><span>fn</span></span></span><span> </span><span class="entity"><span>opr_ctxt</span></span><span> </span><span class="main"><span>=&gt;</span></span><span> </span><span>Parse.position</span><span> </span><span class="antiquoted"><span class="entity"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">keyword</span><span class="hidden">&gt;</span></span></span><span>‹</span><span class="keyword2"><span>:=</span></span><span>›</span></span></span><span> </span><span>&gt;&gt;</span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span class="keyword"><span>fn</span></span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>_</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>pos</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=&gt;</span></span><span> </span><span class="keyword1"><span class="keyword"><span>fn</span></span></span><span> </span><span class="entity"><span>cfg</span></span><span> </span><span class="main"><span>=&gt;</span></span><span> </span><span class="main"><span>(</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>let</span></span></span><span> </span><span class="keyword3"><span class="keyword"><span>open</span></span></span><span> </span><span>Phi_Opr_Stack</span><span>
    </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>prio</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>dot_opr_chk_left_precedence</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>priority</span></span><span> </span><span class="main"><span>%</span></span><span>φlang_update_opr</span><span class="antiquote"><span>}</span></span></span></span><span> </span><span class="entity"><span>pos</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>#</span></span><span class="inner_numeral"><span>1</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>#</span></span><span class="inner_numeral"><span>1</span></span><span> </span><span class="entity"><span>opr_ctxt</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
 </span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><span class="entity"><span>push_meta_operator</span></span><span> </span><span class="entity"><span>cfg</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="entity"><span>prio</span></span><span class="main"><span>,</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>priority</span></span><span> </span><span class="main"><span>%</span></span><span>φlang_update_opr</span><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>VAR_ARITY_IN_OPSTACK</span></span><span class="main"><span>,</span></span><span class="inner_numeral"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>(</span></span><span class="inner_quoted"><span>":="</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>pos</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span> </span><span>NONE</span><span class="main"><span>,</span></span><span>
                       </span><span class="entity"><span>Generic_Element_Access.dot_triangle_update_opr</span></span><span class="main"><span>)</span></span><span> </span><span class="entity"><span>opr_ctxt</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>
</span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> ›</span></span><span>

</span><span class="keyword1"><span class="command"><span>φlang_parser</span></span></span><span> literal_symbol_in_eleidx </span><span class="main"><span>(</span></span><span class="main"><span>%</span></span><span>φparser_app</span><span>-250</span><span class="main"><span>,</span></span><span> </span><span class="main"><span>%</span></span><span>φlang_push_val</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>[</span></span><span class="quoted"><span>""</span></span><span class="main"><span>]</span></span><span>
                                      </span><span class="main"><span>(</span></span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../Phi_System/Calculus_of_Programming.html#Calculus_of_Programming.CurrentConstruction|const"><span>CurrentConstruction</span></a><span> </span><a class="entity_ref" href="../Phi_System/Calculus_of_Programming.html#Calculus_of_Programming.programming_mode|const"><span>programming_mode</span></a><span> </span><span class="var"><span>?blk</span></span><span> </span><span class="var"><span>?H</span></span><span> </span><span class="var"><span>?S</span></span><span>›</span></span></span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span>‹
</span><span class="keyword1"><span class="keyword"><span>fn</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>oprs</span></span><span class="main"><span>,</span></span><span class="main"><span>(</span></span><span class="entity"><span>ctxt</span></span><span class="main"><span>,</span></span><span class="entity"><span>sequent</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=&gt;</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>case</span></span></span><span> </span><span class="main"><span>#</span></span><span class="inner_numeral"><span>1</span></span><span> </span><span class="entity"><span>oprs</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>of</span></span></span><span> </span><span class="entity"><span>Phi_Opr_Stack.Meta_Opr</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>_</span></span><span class="main"><span>,</span></span><span class="main"><span>_</span></span><span class="main"><span>,</span></span><span class="main"><span>(</span></span><span class="inner_quoted"><span>"‣"</span></span><span class="main"><span>,</span></span><span class="main"><span>_</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span class="main"><span>_</span></span><span class="main"><span>,</span></span><span class="main"><span>_</span></span><span class="main"><span>,</span></span><span class="main"><span>_</span></span><span class="main"><span>,</span></span><span class="main"><span>_</span></span><span class="main"><span>)</span></span><span> </span><span>::</span><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>=&gt;</span></span><span> </span><span class="main"><span>(</span></span><span>
        </span><span>Parse.name</span><span> </span><span>&gt;&gt;</span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span class="keyword"><span>fn</span></span></span><span> </span><span class="entity"><span>s</span></span><span> </span><span class="main"><span>=&gt;</span></span><span> </span><span class="keyword1"><span class="keyword"><span>fn</span></span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>=&gt;</span></span><span>
        </span><span class="main"><span>(</span></span><span class="entity"><span>oprs</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>ctxt</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>#</span></span><span>transformation_rule </span><span class="entity"><span>Phi_Working_Mode.programming</span></span><span>
                  </span><span>OF</span><span> </span><span class="main"><span>[</span></span><span class="entity"><span>sequent</span></span><span class="main"><span>,</span></span><span> </span><span>Thm.instantiate</span><span>
                                  </span><span class="main"><span>(</span></span><span>TVars.empty</span><span class="main"><span>,</span></span><span> </span><span>Vars.make</span><span> </span><span class="main"><span>[</span></span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="inner_quoted"><span>"s"</span></span><span class="main"><span>,</span></span><span class="inner_numeral"><span>0</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">typ</span><span class="hidden">&gt;</span></span></span><span class="quoted"><span>‹</span><a class="entity_ref" href="../Phi_System/PhiTool_Symbol.html#PhiTool_Symbol.symbol|type"><span>symbol</span></a><span>›</span></span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span>
                                                           </span><span>Thm.cterm_of</span><span> </span><span class="entity"><span>ctxt</span></span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>Phi_Tool_Symbol.mk_symbol</span></span><span> </span><span class="entity"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span>
                                  </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> "</span><a class="entity_ref" href="PhiSem_Symbol.html#PhiSem_Symbol._intro_symbol_|fact"><span>_intro_symbol_</span></a><span>"</span><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
     </span><span class="main"><span>|</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>=&gt;</span></span><span> </span><span>Scan.fail</span><span>
›</span></span><span>



</span><span class="keyword2"><span class="keyword"><span>end</span></span></span></pre>
</body>

</html>